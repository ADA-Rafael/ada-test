(function(Pe,fe){"object"==typeof exports&&"undefined"!=typeof module?module.exports=fe():"function"==typeof define&&define.amd?define(fe):(Pe=Pe||self).cytoscape=fe()})(this,function(){"use strict";function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t,n){return t&&ue(e.prototype,t),n&&ue(e,n),e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=[],i=!0,o=!1,l=void 0;try{for(var s,u=n[Symbol.iterator]();!(i=(s=u.next()).done)&&(a.push(s.value),!r||a.length!==r);i=!0);}catch(c){o=!0,l=c}finally{try{i||null==u.return||u.return()}finally{if(o)throw l}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var U="undefined"==typeof window?null:window,ae=U?U.navigator:null,xe=Pe(""),Re=Pe({}),ce=Pe(function(){}),ze="undefined"==typeof HTMLElement?"undefined":Pe(HTMLElement),be=function(e){return e&&e.instanceString&&H(e.instanceString)?e.instanceString():null},ie=function(e){return null!=e&&Pe(e)==xe},H=function(e){return null!=e&&Pe(e)===ce},ne=function(e){return!Oe(e)&&(Array.isArray?Array.isArray(e):null!=e&&e instanceof Array)},ve=function(e){return null!=e&&Pe(e)===Re&&!ne(e)&&e.constructor===Object},Z=function(e){return null!=e&&Pe(e)===Pe(1)&&!isNaN(e)},rt=function(e){return"undefined"===ze?void 0:null!=e&&e instanceof HTMLElement},Oe=function(e){return at(e)||ft(e)},at=function(e){return"collection"===be(e)&&e._private.single},ft=function(e){return"collection"===be(e)&&!e._private.single},Ge=function(e){return"core"===be(e)},se=function(e){return"stylesheet"===be(e)},Ae=function(e){return null==e||!(""!==e&&!e.match(/^\s+$/))},gt=function(e){return null!=(t=e)&&Pe(t)===Re&&H(e.then);var t},Ze=function(e,t){t||(t=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var r=[],a=0;a<arguments.length;a++)r.push(arguments[a]);return r.join("$")});var n=function r(){var a,i=this,o=arguments,l=t.apply(i,o),s=r.cache;return(a=s[l])||(a=s[l]=e.apply(i,o)),a};return n.cache={},n},wt=Ze(function(e){return e.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}),Gt=Ze(function(e){return e.replace(/(-\w)/g,function(t){return t[1].toUpperCase()})}),Xt=Ze(function(e,t){return e+t[0].toUpperCase()+t.substring(1)},function(e,t){return e+"$"+t}),rn=function(e){return Ae(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},an="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",Ve=function(e,t){return e<t?-1:e>t?1:0},me=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments,n=1;n<t.length;n++){var r=t[n];if(null!=r)for(var a=Object.keys(r),i=0;i<a.length;i++){var o=a[i];e[o]=r[o]}}return e},$e={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Dt=function(e){for(var t=e.map,n=e.keys,r=n.length,a=0;a<r;a++){var i=n[a];if(ve(i))throw Error("Tried to set map with object key");a<n.length-1?(null==t[i]&&(t[i]={}),t=t[i]):t[i]=e.value}},Qt=function(e){for(var t=e.map,n=e.keys,r=n.length,a=0;a<r;a++){var i=n[a];if(ve(i))throw Error("Tried to get map with object key");if(null==(t=t[i]))return t}return t},lt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Mn=/^\s+|\s+$/g,ut=/^[-+]0x[0-9a-f]+$/i,Qn=/^0b[01]+$/i,Jn=/^0o[0-7]+$/i,Dn=parseInt,De="object"==typeof self&&self&&self.Object===Object&&self,Fe="object"==typeof lt&&lt&&lt.Object===Object&&lt||De||Function("return this")(),Ce=Object.prototype.toString,Je=Math.max,Qe=Math.min,dt=function(){return Fe.Date.now()};function et(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Et(e){if("number"==typeof e)return e;if("symbol"==typeof(r=e)||(a=r)&&"object"==typeof a&&"[object Symbol]"==Ce.call(r))return NaN;var r,a;if(et(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=et(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Mn,"");var n=Qn.test(e);return n||Jn.test(e)?Dn(e.slice(2),n?2:8):ut.test(e)?NaN:+e}var we=function(e,t,n){var r,a,i,o,l,s,u=0,c=!1,d=!1,p=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(b){var C=r,E=a;return r=a=void 0,u=b,o=e.apply(E,C)}function h(b){return u=b,l=setTimeout(m,t),c?f(b):o}function v(b){var C=b-s;return void 0===s||C>=t||C<0||d&&b-u>=i}function m(){var C,E,b=dt();if(v(b))return g(b);l=setTimeout(m,(E=t-((C=b)-s),d?Qe(E,i-(C-u)):E))}function g(b){return l=void 0,p&&r?f(b):(r=a=void 0,o)}function y(){var b=dt(),C=v(b);if(r=arguments,a=this,s=b,C){if(void 0===l)return h(s);if(d)return l=setTimeout(m,t),f(s)}return void 0===l&&(l=setTimeout(m,t)),o}return t=Et(t)||0,et(n)&&(c=!!n.leading,i=(d="maxWait"in n)?Je(Et(n.maxWait)||0,t):i,p="trailing"in n?!!n.trailing:p),y.cancel=function(){void 0!==l&&clearTimeout(l),u=0,r=s=a=l=void 0},y.flush=function(){return void 0===l?o:g(dt())},y},ge=U?U.performance:null,Se=ge&&ge.now?function(){return ge.now()}:function(){return Date.now()},Ne=function(){if(U){if(U.requestAnimationFrame)return function(e){U.requestAnimationFrame(e)};if(U.mozRequestAnimationFrame)return function(e){U.mozRequestAnimationFrame(e)};if(U.webkitRequestAnimationFrame)return function(e){U.webkitRequestAnimationFrame(e)};if(U.msRequestAnimationFrame)return function(e){U.msRequestAnimationFrame(e)}}return function(e){e&&setTimeout(function(){e(Se())},1e3/60)}}(),Be=function(e){return Ne(e)},_e=Se,We=65599,ct=function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9261,r=n;!(t=e.next()).done;)r=r*We+t.value|0;return r},qe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9261;return t*We+e|0},mt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5381;return(t<<5)+t+e|0},it=function(e){return 2097152*e[0]+e[1]},yt=function(e,t){return[qe(e[0],t[0]),mt(e[1],t[1])]},Xe=function(e,t){var n={value:0,done:!1},r=0,a=e.length;return ct({next:function(){return r<a?n.value=e.charCodeAt(r++):n.done=!0,n}},t)},Ur=function(){return on(arguments)},on=function(e){for(var t,n=0;n<e.length;n++){var r=e[n];t=0===n?Xe(r):Xe(r,t)}return t},dn=!0,Aa=null!=console.warn,Fa=null!=console.trace,zn=Number.MAX_SAFE_INTEGER||9007199254740991,Bn=function(){return!0},hn=function(){return!1},Nn=function(){return 0},er=function(){},ot=function(e){throw new Error(e)},Hi=function(e){if(void 0===e)return dn;dn=!!e},Ue=function(e){Hi()&&(Aa?console.warn(e):(console.log(e),Fa&&console.trace()))},Jt=function(e){return null==e?e:ne(e)?e.slice():ve(e)?me({},e):e},Wi=function(e,t){for(t=e="";e++<36;t+=51*e&52?(15^e?8^Math.random()*(20^e?16:4):4).toString(16):"-");return t},Nl={},Ki=function(){return Nl},Ct=function(e){var t=Object.keys(e);return function(n){for(var r={},a=0;a<t.length;a++){var i=t[a],o=null==n?void 0:n[i];r[i]=void 0===o?e[i]:o}return r}},pn=function(e,t,n){for(var r=e.length-1;r>=0&&(e[r]!==t||(e.splice(r,1),!n));r--);},ja=function(e){e.splice(0,e.length)},Zt=function(e,t,n){return n&&(t=Xt(n,t)),e[t]},fn=function(e,t,n,r){n&&(t=Xt(n,t)),e[t]=r},en="undefined"!=typeof Map?Map:function(){function e(){fe(this,e),this._obj={}}return J(e,[{key:"set",value:function(t,n){return this._obj[t]=n,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return void 0!==this._obj[t]}},{key:"get",value:function(t){return this._obj[t]}}]),e}(),Ol=function(){function e(t){if(fe(this,e),this._obj=Object.create(null),this.size=0,null!=t){var n;n=null!=t.instanceString&&t.instanceString()===this.instanceString()?t.toArray():t;for(var r=0;r<n.length;r++)this.add(n[r])}}return J(e,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var n=this._obj;1!==n[t]&&(n[t]=1,this.size++)}},{key:"delete",value:function(t){var n=this._obj;1===n[t]&&(n[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return 1===this._obj[t]}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter(function(n){return t.has(n)})}},{key:"forEach",value:function(t,n){return this.toArray().forEach(t,n)}}]),e}(),tr="undefined"!==("undefined"==typeof Set?"undefined":Pe(Set))?Set:Ol,$r=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==e&&void 0!==t&&Ge(e)){var r=t.group;if(null==r&&(r=t.data&&null!=t.data.source&&null!=t.data.target?"edges":"nodes"),"nodes"===r||"edges"===r){this.length=1,this[0]=this;var a=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:r,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:void 0===t.selectable||!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:void 0===t.grabbable||!!t.grabbable,pannable:void 0===t.pannable?"edges"===r:!!t.pannable,active:!1,classes:new tr,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==a.position.x&&(a.position.x=0),null==a.position.y&&(a.position.y=0),t.renderedPosition){var i=t.renderedPosition,o=e.pan(),l=e.zoom();a.position={x:(i.x-o.x)/l,y:(i.y-o.y)/l}}var s=[];ne(t.classes)?s=t.classes:ie(t.classes)&&(s=t.classes.split(/\s+/));for(var u=0,c=s.length;u<c;u++){var d=s[u];d&&""!==d&&a.classes.add(d)}this.createEmitter();var p=t.style||t.css;p&&(Ue("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(p)),(void 0===n||n)&&this.restore()}else ot("An element must be of type `nodes` or `edges`; you specified `"+r+"`")}else ot("An element must have a core reference and parameters set")},Gi=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(t,n,r){var a;ve(t)&&!Oe(t)&&(t=(a=t).roots||a.root,n=a.visit,r=a.directed),r=2!==arguments.length||H(n)?r:n,n=H(n)?n:function(){};for(var i,o=this._private.cy,l=t=ie(t)?this.filter(t):t,s=[],u=[],c={},d={},p={},f=0,h=this.byGroup(),v=h.nodes,m=h.edges,g=0;g<l.length;g++){var y=l[g],b=y.id();y.isNode()&&(s.unshift(y),e.bfs&&(p[b]=!0,u.push(y)),d[b]=0)}var C=function(){var _=e.bfs?s.shift():s.pop(),D=_.id();if(e.dfs){if(p[D])return"continue";p[D]=!0,u.push(_)}var T,z=d[D],I=c[D],N=null!=I?I.source():null,M=null!=I?I.target():null,q=null==I?void 0:_.same(N)?M[0]:N[0];if(!0===(T=n(_,I,q,f++,z)))return i=_,"break";if(!1===T)return"break";for(var A=_.connectedEdges().filter(function(Y){return(!r||Y.source().same(_))&&m.has(Y)}),L=0;L<A.length;L++){var X=A[L],F=X.connectedNodes().filter(function(Y){return!Y.same(_)&&v.has(Y)}),V=F.id();0===F.length||p[V]||(s.push(F=F[0]),e.bfs&&(p[V]=!0,u.push(F)),c[V]=X,d[V]=d[D]+1)}};e:for(;0!==s.length;){var E=C();switch(E){case"continue":continue;case"break":break e}}for(var w=o.collection(),x=0;x<u.length;x++){var S=u[x],P=c[S.id()];null!=P&&w.push(P),w.push(S)}return{path:o.collection(w),found:o.collection(i)}}},Sr={breadthFirstSearch:Gi({bfs:!0}),depthFirstSearch:Gi({dfs:!0})};Sr.bfs=Sr.breadthFirstSearch,Sr.dfs=Sr.depthFirstSearch;var e,t,Pr=(e=t={exports:{}},function(){var n,r,a,i,o,l,s,u,c,d,p,f,h,v,m;a=Math.floor,d=Math.min,r=function(g,y){return g<y?-1:g>y?1:0},c=function(g,y,b,C,E){var w;if(null==b&&(b=0),null==E&&(E=r),b<0)throw new Error("lo must be non-negative");for(null==C&&(C=g.length);b<C;)E(y,g[w=a((b+C)/2)])<0?C=w:b=w+1;return[].splice.apply(g,[b,b-b].concat(y)),y},l=function(g,y,b){return null==b&&(b=r),g.push(y),v(g,0,g.length-1,b)},o=function(g,y){var b,C;return null==y&&(y=r),b=g.pop(),g.length?(C=g[0],g[0]=b,m(g,0,y)):C=b,C},u=function(g,y,b){var C;return null==b&&(b=r),C=g[0],g[0]=y,m(g,0,b),C},s=function(g,y,b){var C;return null==b&&(b=r),g.length&&b(g[0],y)<0&&(y=(C=[g[0],y])[0],g[0]=C[1],m(g,0,b)),y},i=function(g,y){var C,E,w,x,S;for(null==y&&(y=r),x=[],C=0,E=(w=function(){S=[];for(var P=0,_=a(g.length/2);0<=_?P<_:P>_;0<=_?P++:P--)S.push(P);return S}.apply(this).reverse()).length;C<E;C++)x.push(m(g,w[C],y));return x},h=function(g,y,b){var C;if(null==b&&(b=r),-1!==(C=g.indexOf(y)))return v(g,0,C,b),m(g,C,b)},p=function(g,y,b){var E,w,x,S;if(null==b&&(b=r),!(E=g.slice(0,y)).length)return E;for(i(E,b),w=0,x=(S=g.slice(y)).length;w<x;w++)s(E,S[w],b);return E.sort(b).reverse()},f=function(g,y,b){var C,E,w,x,S,P,_,D,T;if(null==b&&(b=r),10*y<=g.length){if(!(w=g.slice(0,y).sort(b)).length)return w;for(E=w[w.length-1],x=0,P=(_=g.slice(y)).length;x<P;x++)b(C=_[x],E)<0&&(c(w,C,0,null,b),w.pop(),E=w[w.length-1]);return w}for(i(g,b),T=[],S=0,D=d(y,g.length);0<=D?S<D:S>D;0<=D?++S:--S)T.push(o(g,b));return T},v=function(g,y,b,C){var E,w,x;for(null==C&&(C=r),E=g[b];b>y&&C(E,w=g[x=b-1>>1])<0;)g[b]=w,b=x;return g[b]=E},m=function(g,y,b){var C,E,w,x,S;for(null==b&&(b=r),E=g.length,S=y,w=g[y],C=2*y+1;C<E;)(x=C+1)<E&&!(b(g[C],g[x])<0)&&(C=x),g[y]=g[C],C=2*(y=C)+1;return g[y]=w,v(g,S,y,b)},n=function(){function g(y){this.cmp=null!=y?y:r,this.nodes=[]}return g.push=l,g.pop=o,g.replace=u,g.pushpop=s,g.heapify=i,g.updateItem=h,g.nlargest=p,g.nsmallest=f,g.prototype.push=function(y){return l(this.nodes,y,this.cmp)},g.prototype.pop=function(){return o(this.nodes,this.cmp)},g.prototype.peek=function(){return this.nodes[0]},g.prototype.contains=function(y){return-1!==this.nodes.indexOf(y)},g.prototype.replace=function(y){return u(this.nodes,y,this.cmp)},g.prototype.pushpop=function(y){return s(this.nodes,y,this.cmp)},g.prototype.heapify=function(){return i(this.nodes,this.cmp)},g.prototype.updateItem=function(y){return h(this.nodes,y,this.cmp)},g.prototype.clear=function(){return this.nodes=[]},g.prototype.empty=function(){return 0===this.nodes.length},g.prototype.size=function(){return this.nodes.length},g.prototype.clone=function(){var y;return(y=new g).nodes=this.nodes.slice(0),y},g.prototype.toArray=function(){return this.nodes.slice(0)},g.prototype.insert=g.prototype.push,g.prototype.top=g.prototype.peek,g.prototype.front=g.prototype.peek,g.prototype.has=g.prototype.contains,g.prototype.copy=g.prototype.clone,g}(),e.exports=n}.call(lt),t.exports),Il=Ct({root:null,weight:function(e){return 1},directed:!1}),Rl={dijkstra:function(e){if(!ve(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var n=Il(e),r=n.root,a=n.weight,i=n.directed,o=this,l=a,s=ie(r)?this.filter(r)[0]:r[0],u={},c={},d={},p=this.byGroup(),f=p.nodes,h=p.edges;h.unmergeBy(function(I){return I.isLoop()});for(var v=function(I){return u[I.id()]},m=function(I,N){u[I.id()]=N,g.updateItem(I)},g=new Pr(function(I,N){return v(I)-v(N)}),y=0;y<f.length;y++){var b=f[y];u[b.id()]=b.same(s)?0:1/0,g.push(b)}for(var C=function(I,N){for(var M,q=(i?I.edgesTo(N):I.edgesWith(N)).intersect(h),A=1/0,L=0;L<q.length;L++){var X=q[L],F=l(X);(F<A||!M)&&(A=F,M=X)}return{edge:M,dist:A}};g.size()>0;){var E=g.pop(),w=v(E),x=E.id();if(d[x]=w,w!==1/0)for(var S=E.neighborhood().intersect(f),P=0;P<S.length;P++){var _=S[P],D=_.id(),T=C(E,_),z=w+T.dist;z<v(_)&&(m(_,z),c[D]={node:E,edge:T.edge})}}return{distanceTo:function(I){var N=ie(I)?f.filter(I)[0]:I[0];return d[N.id()]},pathTo:function(I){var N=ie(I)?f.filter(I)[0]:I[0],M=[],q=N,A=q.id();if(N.length>0)for(M.unshift(N);c[A];){var L=c[A];M.unshift(L.edge),M.unshift(L.node),A=(q=L.node).id()}return o.spawn(M)}}}},Ll={kruskal:function(e){e=e||function(y){return 1};for(var t=this.byGroup(),n=t.nodes,r=t.edges,a=n.length,i=new Array(a),o=n,l=function(y){for(var b=0;b<i.length;b++)if(i[b].has(y))return b},s=0;s<a;s++)i[s]=this.spawn(n[s]);for(var u=r.sort(function(y,b){return e(y)-e(b)}),c=0;c<u.length;c++){var d=u[c],p=d.source()[0],f=d.target()[0],h=l(p),v=l(f),m=i[h],g=i[v];h!==v&&(o.merge(d),m.merge(g),i.splice(v,1))}return o}},Al=Ct({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),Fl={aStar:function(e){var t=this.cy(),n=Al(e),r=n.root,a=n.goal,i=n.heuristic,o=n.directed,l=n.weight;r=t.collection(r)[0],a=t.collection(a)[0];var s,u,c=r.id(),d=a.id(),p={},f={},h={},v=new Pr(function(A,L){return f[A.id()]-f[L.id()]}),m=new tr,g={},y={},b=function(A,L){v.push(A),m.add(L)};b(r,c),p[c]=0,f[c]=i(r);for(var E=0;v.size()>0;){if(u=(s=v.pop()).id(),m.delete(u),E++,u===d){for(var w=[],x=a,S=d,P=y[S];w.unshift(x),null!=P&&w.unshift(P),null!=(x=g[S]);)P=y[S=x.id()];return{found:!0,distance:p[u],path:this.spawn(w),steps:E}}h[u]=!0;for(var _=s._private.edges,D=0;D<_.length;D++){var T=_[D];if(this.hasElementWithId(T.id())&&(!o||T.data("source")===u)){var z=T.source(),I=T.target(),N=z.id()!==u?z:I,M=N.id();if(this.hasElementWithId(M)&&!h[M]){var q=p[u]+l(T);m.has(M)?q<p[M]&&(p[M]=q,f[M]=q+i(N),g[M]=s,y[M]=T):(p[M]=q,f[M]=q+i(N),b(N,M),g[M]=s,y[M]=T)}}}}return{found:!1,distance:void 0,path:void 0,steps:E}}},jl=Ct({weight:function(e){return 1},directed:!1}),Vl={floydWarshall:function(e){for(var t=this.cy(),n=jl(e),a=n.directed,i=n.weight,o=this.byGroup(),l=o.nodes,s=o.edges,u=l.length,c=u*u,d=function(L){return l.indexOf(L)},p=function(L){return l[L]},f=new Array(c),h=0;h<c;h++){var v=h%u;f[h]=(h-v)/u===v?0:1/0}for(var g=new Array(c),y=new Array(c),b=0;b<s.length;b++){var C=s[b],E=C.source()[0],w=C.target()[0];if(E!==w){var x=d(E),S=d(w),P=x*u+S,_=i(C);if(f[P]>_&&(f[P]=_,g[P]=S,y[P]=C),!a){var D=S*u+x;!a&&f[D]>_&&(f[D]=_,g[D]=x,y[D]=C)}}}for(var T=0;T<u;T++)for(var z=0;z<u;z++)for(var I=z*u+T,N=0;N<u;N++){var M=z*u+N,q=T*u+N;f[I]+f[q]<f[M]&&(f[M]=f[I]+f[q],g[M]=g[I])}var A=function(L){return d((ie(X=L)?t.filter(X):X)[0]);var X};return{distance:function(L,X){var F=A(L),V=A(X);return f[F*u+V]},path:function(L,X){var F=A(L),V=A(X),Y=p(F);if(F===V)return Y.collection();if(null==g[F*u+V])return t.collection();var re=t.collection();for(re.merge(Y);F!==V;)re.merge(y[F*u+(F=g[F*u+V])]),re.merge(p(F));return re}}}},ql=Ct({weight:function(e){return 1},directed:!1,root:null}),Xl={bellmanFord:function(e){var t=this,n=ql(e),a=n.directed,i=n.root,o=n.weight,l=this,s=this.cy(),u=this.byGroup(),c=u.edges,d=u.nodes,p=d.length,f=new en,h=!1,v=[];i=s.collection(i)[0],c.unmergeBy(function(k){return k.isLoop()});for(var m=c.length,g=function(k){var B=f.get(k.id());return B||(B={},f.set(k.id(),B)),B},y=function(k){return(ie(k)?s.$(k):k)[0]},b=0;b<p;b++){var C=d[b],E=g(C);E.dist=C.same(i)?0:1/0,E.pred=null,E.edge=null}for(var w=!1,x=function(k,B,R,j,O,ee){var K=j.dist+ee;K<O.dist&&!R.same(j.edge)&&(O.dist=K,O.pred=k,O.edge=R,w=!0)},S=1;S<p;S++){w=!1;for(var P=0;P<m;P++){var _=c[P],D=_.source(),T=_.target(),z=o(_),I=g(D),N=g(T);x(D,0,_,I,N,z),a||x(T,0,_,N,I,z)}if(!w)break}if(w)for(var M=[],q=0;q<m;q++){var A=c[q],L=A.source(),X=A.target(),F=o(A),V=g(L).dist,Y=g(X).dist;if(V+F<Y||!a&&Y+F<V){if(h||(Ue("Graph contains a negative weight cycle for Bellman-Ford"),h=!0),!1===e.findNegativeWeightCycles)break;var $=[];V+F<Y&&$.push(L),!a&&Y+F<V&&$.push(X);for(var re=$.length,te=0;te<re;te++){var de=$[te],oe=[de];oe.push(g(de).edge);for(var ye=g(de).pred;-1===oe.indexOf(ye);)oe.push(ye),oe.push(g(ye).edge),ye=g(ye).pred;for(var ke=(oe=oe.slice(oe.indexOf(ye)))[0].id(),Q=0,le=2;le<oe.length;le+=2)oe[le].id()<ke&&(ke=oe[le].id(),Q=le);(oe=oe.slice(Q).concat(oe.slice(0,Q))).push(oe[0]);var pe=oe.map(function(k){return k.id()}).join(",");-1===M.indexOf(pe)&&(v.push(l.spawn(oe)),M.push(pe))}}}return{distanceTo:function(k){return g(y(k)).dist},pathTo:function(k){for(var B=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,R=y(k),j=[],O=R;;){if(null==O)return t.spawn();var ee=g(O),K=ee.edge,he=ee.pred;if(j.unshift(O[0]),O.same(B)&&j.length>0)break;null!=K&&j.unshift(K),O=he}return l.spawn(j)},hasNegativeWeightCycle:h,negativeWeightCycles:v}}},Yl=Math.sqrt(2),Hl=function(e,t,n){0===n.length&&ot("Karger-Stein must be run on a connected (sub)graph");for(var r=n[e],o=t[r[1]],l=t[r[2]],s=n,u=s.length-1;u>=0;u--){var c=s[u],d=c[1],p=c[2];(t[d]===o&&t[p]===l||t[d]===l&&t[p]===o)&&s.splice(u,1)}for(var f=0;f<s.length;f++){var h=s[f];h[1]===l?(s[f]=h.slice(),s[f][1]=o):h[2]===l&&(s[f]=h.slice(),s[f][2]=o)}for(var v=0;v<t.length;v++)t[v]===l&&(t[v]=o);return s},Va=function(e,t,n,r){for(;n>r;){var a=Math.floor(Math.random()*t.length);t=Hl(a,e,t),n--}return t},Wl={kargerStein:function(){var e=this,t=this.byGroup(),n=t.nodes,r=t.edges;r.unmergeBy(function(M){return M.isLoop()});var a=n.length,i=r.length,o=Math.ceil(Math.pow(Math.log(a)/Math.LN2,2)),l=Math.floor(a/Yl);if(!(a<2)){for(var s=[],u=0;u<i;u++){var c=r[u];s.push([u,n.indexOf(c.source()),n.indexOf(c.target())])}for(var d=1/0,p=[],f=new Array(a),h=new Array(a),v=new Array(a),m=function(M,q){for(var A=0;A<a;A++)q[A]=M[A]},g=0;g<=o;g++){for(var y=0;y<a;y++)h[y]=y;var b=Va(h,s.slice(),a,l),C=b.slice();m(h,v);var E=Va(h,b,l,2),w=Va(v,C,l,2);E.length<=w.length&&E.length<d?(d=E.length,p=E,m(h,f)):w.length<=E.length&&w.length<d&&(d=w.length,p=w,m(v,f))}for(var x=this.spawn(p.map(function(M){return r[M[0]]})),S=this.spawn(),P=this.spawn(),_=f[0],D=0;D<f.length;D++){var z=n[D];f[D]===_?S.merge(z):P.merge(z)}var I=function(M){var q=e.spawn();return M.forEach(function(A){q.merge(A),A.connectedEdges().forEach(function(L){e.contains(L)&&!x.contains(L)&&q.merge(L)})}),q},N=[I(S),I(P)];return{cut:x,components:N,partition1:S,partition2:P}}ot("At least 2 nodes are required for Karger-Stein algorithm")}},Qr=function(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},Zi=function(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},nr=function(e){return{x:e[0],y:e[1]}},Jr=function(e,t){return Math.atan2(t,e)-Math.PI/2},qa=Math.log2||function(e){return Math.log(e)/Math.log(2)},Ui=function(e){return e>0?1:e<0?-1:0},On=function(e,t){return Math.sqrt(In(e,t))},In=function(e,t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r},Kl=function(e){for(var t=e.length,n=0,r=0;r<t;r++)n+=e[r];for(var a=0;a<t;a++)e[a]=e[a]/n;return e},kt=function(e,t,n,r){return(1-r)*(1-r)*e+2*(1-r)*r*t+r*r*n},rr=function(e,t,n,r){return{x:kt(e.x,t.x,n.x,r),y:kt(e.y,t.y,n.y,r)}},_r=function(e,t,n){return Math.max(e,Math.min(n,t))},At=function(e){if(null==e)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=e.x1&&null!=e.y1){if(null!=e.x2&&null!=e.y2&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(null!=e.w&&null!=e.h&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},Gl=function(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},ea=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Xa=function(e){var t,n,r,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===i.length)t=n=r=a=i[0];else if(2===i.length)t=r=i[0],a=n=i[1];else if(4===i.length){var o=G(i,4);t=o[0],n=o[1],r=o[2],a=o[3]}return e.x1-=a,e.x2+=n,e.y1-=t,e.y2+=r,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},$i=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},Ya=function(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.x2<t.x1||t.x2<e.x1||e.y2<t.y1||t.y2<e.y1||e.y1>t.y2||t.y1>e.y2)},ar=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},Qi=function(e,t){return ar(e,t.x1,t.y1)&&ar(e,t.x2,t.y2)},Ji=function(e,t,n,r,a,i,o){var l,s=Tr(a,i),u=a/2,c=i/2,d=r-c-o;if((l=gn(e,t,n,r,n-u+s-o,d,n+u-s+o,d,!1)).length>0)return l;var p=n+u+o;if((l=gn(e,t,n,r,p,r-c+s-o,p,r+c-s+o,!1)).length>0)return l;var f=r+c+o;if((l=gn(e,t,n,r,n-u+s-o,f,n+u-s+o,f,!1)).length>0)return l;var h,v=n-u-o;if((l=gn(e,t,n,r,v,r-c+s-o,v,r+c-s+o,!1)).length>0)return l;var m=n-u+s,g=r-c+s;if((h=Mr(e,t,n,r,m,g,s+o)).length>0&&h[0]<=m&&h[1]<=g)return[h[0],h[1]];var y=n+u-s,b=r-c+s;if((h=Mr(e,t,n,r,y,b,s+o)).length>0&&h[0]>=y&&h[1]<=b)return[h[0],h[1]];var C=n+u-s,E=r+c-s;if((h=Mr(e,t,n,r,C,E,s+o)).length>0&&h[0]>=C&&h[1]>=E)return[h[0],h[1]];var w=n-u+s,x=r+c-s;return(h=Mr(e,t,n,r,w,x,s+o)).length>0&&h[0]<=w&&h[1]>=x?[h[0],h[1]]:[]},Zl=function(e,t,n,r,a,i,o){var l=o,s=Math.min(n,a),u=Math.max(n,a),c=Math.min(r,i),d=Math.max(r,i);return s-l<=e&&e<=u+l&&c-l<=t&&t<=d+l},Ul=function(e,t,n,r,a,i,o,l,s){var u=Math.min(n,o,a)-s,c=Math.max(n,o,a)+s,d=Math.min(r,l,i)-s,p=Math.max(r,l,i)+s;return!(e<u||e>c||t<d||t>p)},$l=function(e,t,n,r,a,i,o,l){var m,g,y,b,C,E,w,x,S,P,_,D,T,s=[];g=9*n*a-3*n*n-3*n*o-6*a*a+3*a*o+9*r*i-3*r*r-3*r*l-6*i*i+3*i*l,y=3*n*n-6*n*a+n*o-n*e+2*a*a+2*a*e-o*e+3*r*r-6*r*i+r*l-r*t+2*i*i+2*i*t-l*t,b=1*n*a-n*n+n*e-a*e+r*i-r*r+r*t-i*t,0==(m=1*n*n-4*n*a+2*n*o+4*a*a-4*a*o+o*o+r*r-4*r*i+2*r*l+4*i*i-4*i*l+l*l)&&(m=1e-5),x=-27*(b/=m)+(g/=m)*(9*(y/=m)-g*g*2),E=(w=(3*y-g*g)/9)*w*w+(x/=54)*x,(C=s)[1]=0,D=g/3,E>0?(P=(P=x+Math.sqrt(E))<0?-Math.pow(-P,1/3):Math.pow(P,1/3),_=(_=x-Math.sqrt(E))<0?-Math.pow(-_,1/3):Math.pow(_,1/3),C[0]=-D+P+_,C[4]=C[2]=-(D+=(P+_)/2),D=Math.sqrt(3)*(-_+P)/2,C[3]=D,C[5]=-D):(C[5]=C[3]=0,0===E?(T=x<0?-Math.pow(-x,1/3):Math.pow(x,1/3),C[0]=2*T-D,C[4]=C[2]=-(T+D)):(S=(w=-w)*w*w,S=Math.acos(x/Math.sqrt(S)),T=2*Math.sqrt(w),C[0]=-D+T*Math.cos(S/3),C[2]=-D+T*Math.cos((S+2*Math.PI)/3),C[4]=-D+T*Math.cos((S+4*Math.PI)/3)));for(var u=[],c=0;c<6;c+=2)Math.abs(s[c+1])<1e-7&&s[c]>=0&&s[c]<=1&&u.push(s[c]);u.push(1),u.push(0);for(var d,p,f,h=-1,v=0;v<u.length;v++)d=Math.pow(1-u[v],2)*n+2*(1-u[v])*u[v]*a+u[v]*u[v]*o,p=Math.pow(1-u[v],2)*r+2*(1-u[v])*u[v]*i+u[v]*u[v]*l,f=Math.pow(d-e,2)+Math.pow(p-t,2),h>=0?f<h&&(h=f):h=f;return h},Ql=function(e,t,n,r,a,i){var o=[e-n,t-r],l=[a-n,i-r],s=l[0]*l[0]+l[1]*l[1],u=o[0]*o[0]+o[1]*o[1],c=o[0]*l[0]+o[1]*l[1],d=c*c/s;return c<0?u:d>s?(e-a)*(e-a)+(t-i)*(t-i):u-d},Ft=function(e,t,n){for(var r,a,i,o,l=0,s=0;s<n.length/2;s++)if(a=n[2*s+1],s+1<n.length/2?(i=n[2*(s+1)],o=n[2*(s+1)+1]):(i=n[2*(s+1-n.length/2)],o=n[2*(s+1-n.length/2)+1]),(r=n[2*s])!=e||i!=e){if(!(r>=e&&e>=i||r<=e&&e<=i))continue;(e-r)/(i-r)*(o-a)+a>t&&l++}return l%2!=0},sn=function(e,t,n,r,a,i,o,l,s){var u,c=new Array(n.length);null!=l[0]?(u=Math.atan(l[1]/l[0]),l[0]<0?u+=Math.PI/2:u=-u-Math.PI/2):u=l;for(var d,p=Math.cos(-u),f=Math.sin(-u),h=0;h<c.length/2;h++)c[2*h]=i/2*(n[2*h]*p-n[2*h+1]*f),c[2*h+1]=o/2*(n[2*h+1]*p+n[2*h]*f),c[2*h]+=r,c[2*h+1]+=a;if(s>0){var v=to(c,-s);d=eo(v)}else d=c;return Ft(e,t,d)},eo=function(e){for(var i,o,l,s,u=new Array(e.length/2),c=0;c<e.length/4;c++){c<e.length/4-1?(i=e[4*(c+1)],o=e[4*(c+1)+1],l=e[4*(c+1)+2],s=e[4*(c+1)+3]):(i=e[0],o=e[1],l=e[2],s=e[3]);var d=gn(e[4*c],e[4*c+1],e[4*c+2],e[4*c+3],i,o,l,s,!0);u[2*c]=d[0],u[2*c+1]=d[1]}return u},to=function(e,t){for(var n,r,a,i,o=new Array(2*e.length),l=0;l<e.length/2;l++){l<e.length/2-1?(a=e[2*(l+1)],i=e[2*(l+1)+1]):(a=e[0],i=e[1]);var s=i-(r=e[2*l+1]),u=-(a-(n=e[2*l])),c=Math.sqrt(s*s+u*u),d=s/c,p=u/c;o[4*l]=n+d*t,o[4*l+1]=r+p*t,o[4*l+2]=a+d*t,o[4*l+3]=i+p*t}return o},Rn=function(e,t,n,r,a,i,o){return e-=a,t-=i,(e/=n/2+o)*e+(t/=r/2+o)*t<=1},Mr=function(e,t,n,r,a,i,o){var l=[n-e,r-t],s=[e-a,t-i],u=l[0]*l[0]+l[1]*l[1],c=2*(s[0]*l[0]+s[1]*l[1]),d=c*c-4*u*(s[0]*s[0]+s[1]*s[1]-o*o);if(d<0)return[];var p=(-c+Math.sqrt(d))/(2*u),f=(-c-Math.sqrt(d))/(2*u),h=Math.min(p,f),v=Math.max(p,f),m=[];if(h>=0&&h<=1&&m.push(h),v>=0&&v<=1&&m.push(v),0===m.length)return[];var g=m[0]*l[0]+e,y=m[0]*l[1]+t;return m.length>1?m[0]==m[1]?[g,y]:[g,y,m[1]*l[0]+e,m[1]*l[1]+t]:[g,y]},Ha=function(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},gn=function(e,t,n,r,a,i,o,l,s){var u=e-a,c=n-e,d=o-a,p=t-i,f=r-t,h=l-i,v=d*p-h*u,m=c*p-f*u,g=h*c-d*f;if(0!==g){var y=v/g,b=m/g;return-.001<=y&&y<=1.001&&-.001<=b&&b<=1.001||s?[e+y*c,t+y*f]:[]}return 0===v||0===m?Ha(e,n,o)===o?[o,l]:Ha(e,n,a)===a?[a,i]:Ha(a,o,n)===n?[n,r]:[]:[]},Dr=function(e,t,n,r,a,i,o,l){var s,u,p,f,h=[],v=new Array(n.length),m=!0;if(null==i&&(m=!1),m){for(var g=0;g<v.length/2;g++)v[2*g]=n[2*g]*i+r,v[2*g+1]=n[2*g+1]*o+a;if(l>0){var y=to(v,-l);u=eo(y)}else u=v}else u=n;for(var b=0;b<u.length/2;b++)b<u.length/2-1?(p=u[2*(b+1)],f=u[2*(b+1)+1]):(p=u[0],f=u[1]),0!==(s=gn(e,t,r,a,u[2*b],u[2*b+1],p,f)).length&&h.push(s[0],s[1]);return h},ta=function(e,t,n){var r=[e[0]-t[0],e[1]-t[1]],a=Math.sqrt(r[0]*r[0]+r[1]*r[1]),i=(a-n)/a;return i<0&&(i=1e-5),[t[0]+i*r[0],t[1]+i*r[1]]},Rt=function(e,t){var n=Wa(e,t);return no(n)},no=function(e){for(var t,n,r=e.length/2,a=1/0,i=1/0,o=-1/0,l=-1/0,s=0;s<r;s++)t=e[2*s],n=e[2*s+1],a=Math.min(a,t),o=Math.max(o,t),i=Math.min(i,n),l=Math.max(l,n);for(var u=2/(o-a),c=2/(l-i),d=0;d<r;d++)t=e[2*d]=e[2*d]*u,n=e[2*d+1]=e[2*d+1]*c,a=Math.min(a,t),o=Math.max(o,t),i=Math.min(i,n),l=Math.max(l,n);if(i<-1)for(var p=0;p<r;p++)n=e[2*p+1]=e[2*p+1]+(-1-i);return e},Wa=function(e,t){var n=1/e*2*Math.PI,r=e%2==0?Math.PI/2+n/2:Math.PI/2;r+=t;for(var a,i=new Array(2*e),o=0;o<e;o++)a=o*n+r,i[2*o]=Math.cos(a),i[2*o+1]=Math.sin(-a);return i},Tr=function(e,t){return Math.min(e/4,t/4,8)},Ka=function(e,t){return Math.min(e/10,t/10,8)},Ga=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},Jl=Ct({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),eu={pageRank:function(e){for(var t=Jl(e),n=t.dampingFactor,r=t.precision,a=t.iterations,i=t.weight,o=this._private.cy,l=this.byGroup(),s=l.nodes,u=l.edges,c=s.length,p=u.length,f=new Array(c*c),h=new Array(c),v=(1-n)/c,m=0;m<c;m++){for(var g=0;g<c;g++)f[m*c+g]=0;h[m]=0}for(var y=0;y<p;y++){var b=u[y],C=b.data("source"),E=b.data("target");if(C!==E){var w=s.indexOfId(C),x=s.indexOfId(E),S=i(b);f[x*c+w]+=S,h[w]+=S}}for(var P=1/c+v,_=0;_<c;_++)if(0===h[_])for(var D=0;D<c;D++)f[D*c+_]=P;else for(var T=0;T<c;T++){var z=T*c+_;f[z]=f[z]/h[_]+v}for(var I,N=new Array(c),M=new Array(c),q=0;q<c;q++)N[q]=1;for(var A=0;A<a;A++){for(var L=0;L<c;L++)M[L]=0;for(var X=0;X<c;X++)for(var F=0;F<c;F++)M[X]+=f[X*c+F]*N[F];Kl(M),I=N,N=M,M=I;for(var Y=0,$=0;$<c;$++){var re=I[$]-N[$];Y+=re*re}if(Y<r)break}return{rank:function(te){return te=o.collection(te)[0],N[s.indexOf(te)]}}}},ro=Ct({root:null,weight:function(e){return 1},directed:!1,alpha:0}),ir={degreeCentralityNormalized:function(e){e=ro(e);var t=this.cy(),n=this.nodes(),r=n.length;if(e.directed){for(var a={},i={},o=0,l=0,s=0;s<r;s++){var u=n[s],c=u.id();e.root=u;var d=this.degreeCentrality(e);o<d.indegree&&(o=d.indegree),l<d.outdegree&&(l=d.outdegree),a[c]=d.indegree,i[c]=d.outdegree}return{indegree:function(g){return 0==o?0:(ie(g)&&(g=t.filter(g)),a[g.id()]/o)},outdegree:function(g){return 0===l?0:(ie(g)&&(g=t.filter(g)),i[g.id()]/l)}}}for(var p={},f=0,h=0;h<r;h++){var v=n[h];e.root=v;var m=this.degreeCentrality(e);f<m.degree&&(f=m.degree),p[v.id()]=m.degree}return{degree:function(g){return 0===f?0:(ie(g)&&(g=t.filter(g)),p[g.id()]/f)}}},degreeCentrality:function(e){e=ro(e);var t=this.cy(),n=this,a=e.root,i=e.weight,o=e.directed,l=e.alpha;if(a=t.collection(a)[0],o){for(var s=a.connectedEdges(),u=s.filter(function(E){return E.target().same(a)&&n.has(E)}),c=s.filter(function(E){return E.source().same(a)&&n.has(E)}),d=u.length,p=c.length,f=0,h=0,v=0;v<u.length;v++)f+=i(u[v]);for(var m=0;m<c.length;m++)h+=i(c[m]);return{indegree:Math.pow(d,1-l)*Math.pow(f,l),outdegree:Math.pow(p,1-l)*Math.pow(h,l)}}for(var g=a.connectedEdges().intersection(n),y=g.length,b=0,C=0;C<g.length;C++)b+=i(g[C]);return{degree:Math.pow(y,1-l)*Math.pow(b,l)}}};ir.dc=ir.degreeCentrality,ir.dcn=ir.degreeCentralityNormalised=ir.degreeCentralityNormalized;var ao=Ct({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),or={closenessCentralityNormalized:function(e){for(var t=ao(e),n=t.harmonic,r=t.weight,a=t.directed,i=this.cy(),o={},l=0,s=this.nodes(),u=this.floydWarshall({weight:r,directed:a}),c=0;c<s.length;c++){for(var d=0,p=s[c],f=0;f<s.length;f++)if(c!==f){var h=u.distance(p,s[f]);d+=n?1/h:h}n||(d=1/d),l<d&&(l=d),o[p.id()]=d}return{closeness:function(v){return 0==l?0:(v=ie(v)?i.filter(v)[0].id():v.id(),o[v]/l)}}},closenessCentrality:function(e){var t=ao(e),n=t.root,r=t.weight,a=t.directed,i=t.harmonic;n=this.filter(n)[0];for(var o=this.dijkstra({root:n,weight:r,directed:a}),l=0,s=this.nodes(),u=0;u<s.length;u++){var c=s[u];if(!c.same(n)){var d=o.distanceTo(c);l+=i?1/d:d}}return i?l:1/l}};or.cc=or.closenessCentrality,or.ccn=or.closenessCentralityNormalised=or.closenessCentralityNormalized;var tu=Ct({weight:null,directed:!1}),Za={betweennessCentrality:function(e){for(var t=tu(e),n=t.directed,r=t.weight,a=null!=r,i=this.cy(),o=this.nodes(),l={},s={},u=0,c=function(y,b){s[y]=b,b>u&&(u=b)},d=function(y){return s[y]},p=0;p<o.length;p++){var f=o[p],h=f.id();l[h]=n?f.outgoers().nodes():f.openNeighborhood().nodes(),c(h,0)}for(var v=function(y){for(var b=o[y].id(),C=[],E={},w={},x={},S=new Pr(function($,re){return x[$]-x[re]}),P=0;P<o.length;P++){var _=o[P].id();E[_]=[],w[_]=0,x[_]=1/0}for(w[b]=1,x[b]=0,S.push(b);!S.empty();){var D=S.pop();if(C.push(D),a)for(var T=0;T<l[D].length;T++){var N,z=l[D][T],I=i.getElementById(D);N=I.edgesTo(z).length>0?I.edgesTo(z)[0]:z.edgesTo(I)[0];var M=r(N);z=z.id(),x[z]>x[D]+M&&(x[z]=x[D]+M,S.nodes.indexOf(z)<0?S.push(z):S.updateItem(z),w[z]=0,E[z]=[]),x[z]==x[D]+M&&(w[z]=w[z]+w[D],E[z].push(D))}else for(var q=0;q<l[D].length;q++){var A=l[D][q].id();x[A]==1/0&&(S.push(A),x[A]=x[D]+1),x[A]==x[D]+1&&(w[A]=w[A]+w[D],E[A].push(D))}}for(var L={},X=0;X<o.length;X++)L[o[X].id()]=0;for(;C.length>0;){for(var F=C.pop(),V=0;V<E[F].length;V++){var Y=E[F][V];L[Y]=L[Y]+w[Y]/w[F]*(1+L[F])}F!=o[y].id()&&c(F,d(F)+L[F])}},m=0;m<o.length;m++)v(m);var g={betweenness:function(y){var b=i.collection(y).id();return d(b)},betweennessNormalized:function(y){if(0==u)return 0;var b=i.collection(y).id();return d(b)/u}};return g.betweennessNormalised=g.betweennessNormalized,g}};Za.bc=Za.betweennessCentrality;var nu=Ct({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(e){return 1}]}),ru=function(e,t){for(var n=0,r=0;r<t.length;r++)n+=t[r](e);return n},io=function(e,t){for(var n,r=0;r<t;r++){n=0;for(var a=0;a<t;a++)n+=e[a*t+r];for(var i=0;i<t;i++)e[i*t+r]=e[i*t+r]/n}},au=function(e,t,n){for(var r=new Array(n*n),a=0;a<n;a++){for(var i=0;i<n;i++)r[a*n+i]=0;for(var o=0;o<n;o++)for(var l=0;l<n;l++)r[a*n+l]+=e[a*n+o]*t[o*n+l]}return r},iu=function(e,t,n){for(var r=e.slice(0),a=1;a<n;a++)e=au(e,r,t);return e},ou=function(e,t,n){for(var r=new Array(t*t),a=0;a<t*t;a++)r[a]=Math.pow(e[a],n);return io(r,t),r},su=function(e,t,n,r){for(var a=0;a<n;a++)if(Math.round(e[a]*Math.pow(10,r))/Math.pow(10,r)!=Math.round(t[a]*Math.pow(10,r))/Math.pow(10,r))return!1;return!0},lu=function(e,t){for(var n=0;n<e.length;n++)if(!t[n]||e[n].id()!==t[n].id())return!1;return!0},oo=function(e){for(var t=this.nodes(),n=this.edges(),r=this.cy(),a=nu(e),i={},o=0;o<t.length;o++)i[t[o].id()]=o;for(var l,s=t.length,u=s*s,c=new Array(u),d=0;d<u;d++)c[d]=0;for(var p=0;p<n.length;p++){var f=n[p],h=i[f.source().id()],v=i[f.target().id()],m=ru(f,a.attributes);c[h*s+v]+=m,c[v*s+h]+=m}(function(C,E,w){for(var x=0;x<E;x++)C[x*E+x]=w})(c,s,a.multFactor),io(c,s);for(var g=!0,y=0;g&&y<a.maxIterations;)g=!1,l=iu(c,s,a.expandFactor),c=ou(l,s,a.inflateFactor),su(c,l,u,4)||(g=!0),y++;return function(C){for(var E=0;E<C.length;E++)for(var w=0;w<C.length;w++)E!=w&&lu(C[E],C[w])&&C.splice(w,1);return C}(function(C,E,w,x){for(var S=[],P=0;P<E;P++){for(var _=[],D=0;D<E;D++)Math.round(1e3*C[P*E+D])/1e3>0&&_.push(w[D]);0!==_.length&&S.push(x.collection(_))}return S}(c,s,t,r))},uu={markovClustering:oo,mcl:oo},cu=function(e){return e},so=function(e,t){return Math.abs(t-e)},lo=function(e,t,n){return e+so(t,n)},uo=function(e,t,n){return e+Math.pow(n-t,2)},du=function(e){return Math.sqrt(e)},hu=function(e,t,n){return Math.max(e,so(t,n))},zr=function(e,t,n,r,a){for(var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:cu,o=r,l=0;l<e;l++)o=a(o,t(l),n(l));return i(o)},sr={euclidean:function(e,t,n){return e>=2?zr(e,t,n,0,uo,du):zr(e,t,n,0,lo)},squaredEuclidean:function(e,t,n){return zr(e,t,n,0,uo)},manhattan:function(e,t,n){return zr(e,t,n,0,lo)},max:function(e,t,n){return zr(e,t,n,-1/0,hu)}};function na(e,t,n,r,a,i){var o;return o=H(e)?e:sr[e]||sr.euclidean,0===t&&H(e)?o(a,i):o(t,n,r,a,i)}sr["squared-euclidean"]=sr.squaredEuclidean,sr.squaredeuclidean=sr.squaredEuclidean;var pu=Ct({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),Ua=function(e){return pu(e)},ra=function(e,t,n,r,a){var i="kMedoids"!==a?function(s){return n[s]}:function(s){return r[s](n)};return na(e,r.length,i,function(s){return r[s](t)},n,t)},$a=function(e,t,n){for(var r=n.length,a=new Array(r),i=new Array(r),o=new Array(t),l=null,s=0;s<r;s++)a[s]=e.min(n[s]).value,i[s]=e.max(n[s]).value;for(var u=0;u<t;u++){l=[];for(var c=0;c<r;c++)l[c]=Math.random()*(i[c]-a[c])+a[c];o[u]=l}return o},co=function(e,t,n,r,a){for(var i=1/0,o=0,l=0;l<t.length;l++){var s=ra(n,e,t[l],r,a);s<i&&(i=s,o=l)}return o},ho=function(e,t,n){for(var r=[],a=null,i=0;i<t.length;i++)n[(a=t[i]).id()]===e&&r.push(a);return r},fu=function(e,t,n){for(var r=0;r<e.length;r++)for(var a=0;a<e[r].length;a++)if(Math.abs(e[r][a]-t[r][a])>n)return!1;return!0},gu=function(e,t,n){for(var r=0;r<n;r++)if(e===t[r])return!0;return!1},po=function(e,t){var n=new Array(t);if(e.length<50)for(var r=0;r<t;r++){for(var a=e[Math.floor(Math.random()*e.length)];gu(a,n,r);)a=e[Math.floor(Math.random()*e.length)];n[r]=a}else for(var i=0;i<t;i++)n[i]=e[Math.floor(Math.random()*e.length)];return n},fo=function(e,t,n){for(var r=0,a=0;a<t.length;a++)r+=ra("manhattan",t[a],e,n,"kMedoids");return r},vu=function(e,t,n,r,a){for(var i,o,l=0;l<t.length;l++)for(var s=0;s<e.length;s++)r[l][s]=Math.pow(n[l][s],a.m);for(var u=0;u<e.length;u++)for(var c=0;c<a.attributes.length;c++){i=0,o=0;for(var d=0;d<t.length;d++)i+=r[d][u]*a.attributes[c](t[d]),o+=r[d][u];e[u][c]=i/o}},yu=function(e,t,n,r,a){for(var i=0;i<e.length;i++)t[i]=e[i].slice();for(var o,l,s,u=2/(a.m-1),c=0;c<n.length;c++)for(var d=0;d<r.length;d++){o=0;for(var p=0;p<n.length;p++)l=ra(a.distance,r[d],n[c],a.attributes,"cmeans"),s=ra(a.distance,r[d],n[p],a.attributes,"cmeans"),o+=Math.pow(l/s,u);e[d][c]=1/o}},go=function(e){var t,n,r,a,i=this.cy(),o=this.nodes(),l=Ua(e);r=new Array(o.length);for(var s=0;s<o.length;s++)r[s]=new Array(l.k);n=new Array(o.length);for(var u=0;u<o.length;u++)n[u]=new Array(l.k);for(var c=0;c<o.length;c++){for(var d=0,p=0;p<l.k;p++)n[c][p]=Math.random(),d+=n[c][p];for(var f=0;f<l.k;f++)n[c][f]=n[c][f]/d}t=new Array(l.k);for(var h=0;h<l.k;h++)t[h]=new Array(l.attributes.length);a=new Array(o.length);for(var v=0;v<o.length;v++)a[v]=new Array(l.k);for(var m=!0,g=0;m&&g<l.maxIterations;)m=!1,vu(t,o,n,a,l),yu(n,r,t,o,l),fu(n,r,l.sensitivityThreshold)||(m=!0),g++;return{clusters:function(y,b,C,E){for(var w,x,S=new Array(C.k),P=0;P<S.length;P++)S[P]=[];for(var _=0;_<b.length;_++){w=-1/0,x=-1;for(var D=0;D<b[0].length;D++)b[_][D]>w&&(w=b[_][D],x=D);S[x].push(y[_])}for(var T=0;T<S.length;T++)S[T]=E.collection(S[T]);return S}(o,n,l,i),degreeOfMembership:n}},mu={kMeans:function(e){var t,n=this.cy(),r=this.nodes(),a=null,i=Ua(e),o=new Array(i.k),l={};t=i.testMode?"number"==typeof i.testCentroids?$a(r,i.k,i.attributes):"object"===Pe(i.testCentroids)?i.testCentroids:$a(r,i.k,i.attributes):$a(r,i.k,i.attributes);for(var c,d=!0,p=0;d&&p<i.maxIterations;){for(var f=0;f<r.length;f++)l[(a=r[f]).id()]=co(a,t,i.distance,i.attributes,"kMeans");d=!1;for(var h=0;h<i.k;h++){var v=ho(h,r,l);if(0!==v.length){for(var m=i.attributes.length,g=t[h],y=new Array(m),b=new Array(m),C=0;C<m;C++){b[C]=0;for(var E=0;E<v.length;E++)b[C]+=i.attributes[C](a=v[E]);y[C]=b[C]/v.length,c=i.sensitivityThreshold,Math.abs(g[C]-y[C])<=c||(d=!0)}t[h]=y,o[h]=n.collection(v)}}p++}return o},kMedoids:function(e){var t,n,r=this.cy(),a=this.nodes(),i=null,o=Ua(e),l=new Array(o.k),s={},u=new Array(o.k);o.testMode?"number"==typeof o.testCentroids||(t="object"===Pe(o.testCentroids)?o.testCentroids:po(a,o.k)):t=po(a,o.k);for(var c=!0,d=0;c&&d<o.maxIterations;){for(var p=0;p<a.length;p++)s[(i=a[p]).id()]=co(i,t,o.distance,o.attributes,"kMedoids");c=!1;for(var f=0;f<t.length;f++){var h=ho(f,a,s);if(0!==h.length){u[f]=fo(t[f],h,o.attributes);for(var v=0;v<h.length;v++)(n=fo(h[v],h,o.attributes))<u[f]&&(u[f]=n,t[f]=h[v],c=!0);l[f]=r.collection(h)}}d++}return l},fuzzyCMeans:go,fcm:go},bu=Ct({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),xu={single:"min",complete:"max"},vo=function(e,t,n,r,a){for(var i,o=0,l=1/0,s=a.attributes,u=function(x,S){return na(a.distance,s.length,function(P){return s[P](x)},function(P){return s[P](S)},x,S)},c=0;c<e.length;c++){var d=e[c].key,p=n[d][r[d]];p<l&&(o=d,l=p)}if("threshold"===a.mode&&l>=a.threshold||"dendrogram"===a.mode&&1===e.length)return!1;var f,h=t[o],v=t[r[o]];f="dendrogram"===a.mode?{left:h,right:v,key:h.key}:{value:h.value.concat(v.value),key:h.key},e[h.index]=f,e.splice(v.index,1),t[h.key]=f;for(var m=0;m<e.length;m++){var g=e[m];h.key===g.key?i=1/0:"min"===a.linkage?(i=n[h.key][g.key],n[h.key][g.key]>n[v.key][g.key]&&(i=n[v.key][g.key])):"max"===a.linkage?(i=n[h.key][g.key],n[h.key][g.key]<n[v.key][g.key]&&(i=n[v.key][g.key])):i="mean"===a.linkage?(n[h.key][g.key]*h.size+n[v.key][g.key]*v.size)/(h.size+v.size):"dendrogram"===a.mode?u(g.value,h.value):u(g.value[0],h.value[0]),n[h.key][g.key]=n[g.key][h.key]=i}for(var y=0;y<e.length;y++){var b=e[y].key;if(r[b]===h.key||r[b]===v.key){for(var C=b,E=0;E<e.length;E++){var w=e[E].key;n[b][w]<n[b][C]&&(C=w)}r[b]=C}e[y].index=y}return h.key=v.key=h.index=v.index=null,!0},aa=function e(t,n,r){t&&(t.value?n.push(t.value):(t.left&&e(t.left,n),t.right&&e(t.right,n)))},yo=function(e){for(var t=this.cy(),n=this.nodes(),r=(y=void 0,void 0,y=bu(e),null!=(b=xu[y.linkage])&&(y.linkage=b),y),a=r.attributes,i=function(g,y){return na(r.distance,a.length,function(b){return a[b](g)},function(b){return a[b](y)},g,y)},o=[],l=[],s=[],u=[],c=0;c<n.length;c++){var d={value:"dendrogram"===r.mode?n[c]:[n[c]],key:c,index:c};o[c]=d,u[c]=d,l[c]=[],s[c]=0}for(var y,b,p=0;p<o.length;p++)for(var f=0;f<=p;f++){var h;h="dendrogram"===r.mode?p===f?1/0:i(o[p].value,o[f].value):p===f?1/0:i(o[p].value[0],o[f].value[0]),l[p][f]=h,l[f][p]=h,h<l[p][s[p]]&&(s[p]=f)}for(var v,m=vo(o,u,l,s,r);m;)m=vo(o,u,l,s,r);return"dendrogram"===r.mode?(v=function g(y,b,C){if(!y)return[];var E=[],w=[],x=[];return 0===b?(y.left&&aa(y.left,E),y.right&&aa(y.right,w),x=E.concat(w),[C.collection(x)]):1===b?y.value?[C.collection(y.value)]:(y.left&&aa(y.left,E),y.right&&aa(y.right,w),[C.collection(E),C.collection(w)]):y.value?[C.collection(y.value)]:(y.left&&(E=g(y.left,b-1,C)),y.right&&(w=g(y.right,b-1,C)),E.concat(w))}(o[0],r.dendrogramDepth,t),r.addDendrogram&&function g(y,b){if(!y)return"";if(y.left&&y.right){var C=g(y.left,b),E=g(y.right,b),w=b.add({group:"nodes",data:{id:C+","+E}});return b.add({group:"edges",data:{source:C,target:w.id()}}),b.add({group:"edges",data:{source:E,target:w.id()}}),w.id()}return y.value?y.value.id():void 0}(o[0],t)):(v=new Array(o.length),o.forEach(function(g,y){g.key=g.index=null,v[y]=t.collection(g.value)})),v},wu={hierarchicalClustering:yo,hca:yo},Eu=Ct({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),ku=function(e,t,n,r){var a=function(i,o){return r[o](i)};return-na(e,r.length,function(i){return a(t,i)},function(i){return a(n,i)},t,n)},mo=function(e,t,n){for(var r=[],a=0;a<e;a++){for(var i=-1,o=-1/0,l=0;l<n.length;l++){var s=n[l];t[a*e+s]>o&&(i=s,o=t[a*e+s])}i>0&&r.push(i)}for(var u=0;u<n.length;u++)r[n[u]]=n[u];return r},bo=function(e){for(var t,n,r,a,i,o,l=this.cy(),s=this.nodes(),u=function(k){var B=k.damping,R=k.preference;.5<=B&&B<1||ot("Damping must range on [0.5, 1).  Got: ".concat(B));var j=["median","mean","min","max"];return j.some(function(O){return O===R})||Z(R)||ot("Preference must be one of [".concat(j.map(function(O){return"'".concat(O,"'")}).join(", "),"] or a number.  Got: ").concat(R)),Eu(k)}(e),c={},d=0;d<s.length;d++)c[s[d].id()]=d;n=(t=s.length)*t,r=new Array(n);for(var p=0;p<n;p++)r[p]=-1/0;for(var f=0;f<t;f++)for(var h=0;h<t;h++)f!==h&&(r[f*t+h]=ku(u.distance,s[f],s[h],u.attributes));a=function(e,t){return"median"===t?function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.length,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?(a<n.length&&n.splice(a,n.length-a),r>0&&n.splice(0,r)):n=n.slice(r,a);for(var s=0,u=n.length-1;u>=0;u--)l?isFinite(n[u])||(n[u]=-1/0,s++):n.splice(u,1);o&&n.sort(function(f,h){return f-h});var d=n.length,p=Math.floor(d/2);return d%2!=0?n[p+1+s]:(n[p-1+s]+n[p+s])/2}(e):"mean"===t?function(n){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.length,i=0,o=0,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;l<a;l++){var s=n[l];isFinite(s)&&(i+=s,o++)}return i/o}(e):"min"===t?function(n){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.length,i=1/0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;o<a;o++){var l=n[o];isFinite(l)&&(i=Math.min(l,i))}return i}(e):"max"===t?function(n){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.length,i=-1/0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;o<a;o++){var l=n[o];isFinite(l)&&(i=Math.max(l,i))}return i}(e):t}(r,u.preference);for(var v=0;v<t;v++)r[v*t+v]=a;i=new Array(n);for(var m=0;m<n;m++)i[m]=0;o=new Array(n);for(var g=0;g<n;g++)o[g]=0;for(var y=new Array(t),b=new Array(t),C=new Array(t),E=0;E<t;E++)y[E]=0,b[E]=0,C[E]=0;for(var w,x=new Array(t*u.minIterations),S=0;S<x.length;S++)x[S]=0;for(w=0;w<u.maxIterations;w++){for(var P=0;P<t;P++){for(var _=-1/0,D=-1/0,T=-1,z=0,I=0;I<t;I++)y[I]=i[P*t+I],(z=o[P*t+I]+r[P*t+I])>=_?(D=_,_=z,T=I):z>D&&(D=z);for(var N=0;N<t;N++)i[P*t+N]=(1-u.damping)*(r[P*t+N]-_)+u.damping*y[N];i[P*t+T]=(1-u.damping)*(r[P*t+T]-D)+u.damping*y[T]}for(var M=0;M<t;M++){for(var q=0,A=0;A<t;A++)y[A]=o[A*t+M],b[A]=Math.max(0,i[A*t+M]),q+=b[A];q-=b[M],b[M]=i[M*t+M],q+=b[M];for(var L=0;L<t;L++)o[L*t+M]=(1-u.damping)*Math.min(0,q-b[L])+u.damping*y[L];o[M*t+M]=(1-u.damping)*(q-b[M])+u.damping*y[M]}for(var X=0,F=0;F<t;F++){var V=o[F*t+F]+i[F*t+F]>0?1:0;x[w%u.minIterations*t+F]=V,X+=V}if(X>0&&(w>=u.minIterations-1||w==u.maxIterations-1)){for(var Y=0,$=0;$<t;$++){C[$]=0;for(var re=0;re<u.minIterations;re++)C[$]+=x[re*t+$];0!==C[$]&&C[$]!==u.minIterations||Y++}if(Y===t)break}}for(var te=function(k,B,R){for(var j=[],O=0;O<k;O++)B[O*k+O]+R[O*k+O]>0&&j.push(O);return j}(t,i,o),de=function(k,B,R){for(var j=mo(k,B,R),O=0;O<R.length;O++){for(var ee=[],K=0;K<j.length;K++)j[K]===R[O]&&ee.push(K);for(var he=-1,Me=-1/0,Te=0;Te<ee.length;Te++){for(var Ie=0,Ee=0;Ee<ee.length;Ee++)Ie+=B[ee[Ee]*k+ee[Te]];Ie>Me&&(he=Te,Me=Ie)}R[O]=ee[he]}return mo(k,B,R)}(t,r,te),oe={},ye=0;ye<te.length;ye++)oe[te[ye]]=[];for(var ke=0;ke<s.length;ke++){var Q=de[c[s[ke].id()]];null!=Q&&oe[Q].push(s[ke])}for(var le=new Array(te.length),pe=0;pe<te.length;pe++)le[pe]=l.collection(oe[te[pe]]);return le},Su={affinityPropagation:bo,ap:bo},Pu=Ct({root:void 0,directed:!1}),ia=function(){var e=this,t={},n=0,r=0,a=[],i=[],o={},l=function u(c,d,p){c===p&&(r+=1),t[d]={id:n,low:n++,cutVertex:!1};var f,h,v,m,g=e.getElementById(d).connectedEdges().intersection(e);0===g.size()?a.push(e.spawn(e.getElementById(d))):g.forEach(function(y){f=y.source().id(),h=y.target().id(),(v=f===d?h:f)!==p&&(m=y.id(),o[m]||(o[m]=!0,i.push({x:d,y:v,edge:y})),v in t?t[d].low=Math.min(t[d].low,t[v].id):(u(c,v,d),t[d].low=Math.min(t[d].low,t[v].low),t[d].id<=t[v].low&&(t[d].cutVertex=!0,function(b,C){for(var E=i.length-1,w=[],x=e.spawn();i[E].x!=b||i[E].y!=C;)w.push(i.pop().edge),E--;w.push(i.pop().edge),w.forEach(function(S){var P=S.connectedNodes().intersection(e);x.merge(S),P.forEach(function(_){var D=_.id(),T=_.connectedEdges().intersection(e);x.merge(_),x.merge(t[D].cutVertex?T.filter(function(z){return z.isLoop()}):T)})}),a.push(x)}(d,v))))})};e.forEach(function(u){if(u.isNode()){var c=u.id();c in t||(r=0,l(c,c),t[c].cutVertex=r>1)}});var s=Object.keys(t).filter(function(u){return t[u].cutVertex}).map(function(u){return e.getElementById(u)});return{cut:e.spawn(s),components:a}},oa=function(){var e=this,t={},n=0,r=[],a=[],i=e.spawn(e);return e.forEach(function(o){if(o.isNode()){var l=o.id();l in t||function s(u){if(a.push(u),t[u]={index:n,low:n++,explored:!1},e.getElementById(u).connectedEdges().intersection(e).forEach(function(h){var v=h.target().id();v!==u&&(v in t||s(v),t[v].explored||(t[u].low=Math.min(t[u].low,t[v].low)))}),t[u].index===t[u].low){for(var c=e.spawn();;){var d=a.pop();if(c.merge(e.getElementById(d)),t[d].low=t[u].index,t[d].explored=!0,d===u)break}var p=c.edgesWith(c),f=c.merge(p);r.push(f),i=i.difference(f)}}(l)}}),{cut:i,components:r}},xo={};[Sr,Rl,Ll,Fl,Vl,Xl,Wl,eu,ir,or,Za,uu,mu,wu,Su,{hierholzer:function(e){if(!ve(e)){var t=arguments;e={root:t[0],directed:t[1]}}var n,r,a,i=Pu(e),o=i.root,l=i.directed,s=this,u=!1;o&&(a=ie(o)?this.filter(o)[0].id():o[0].id());var c={},d={};s.forEach(l?function(g){var y=g.id();if(g.isNode()){var b=g.indegree(!0),C=g.outdegree(!0),E=b-C,w=C-b;1==E?n?u=!0:n=y:1==w?r?u=!0:r=y:(w>1||E>1)&&(u=!0),c[y]=[],g.outgoers().forEach(function(x){x.isEdge()&&c[y].push(x.id())})}else d[y]=[void 0,g.target().id()]}:function(g){var y=g.id();g.isNode()?(g.degree(!0)%2&&(n?r?u=!0:r=y:n=y),c[y]=[],g.connectedEdges().forEach(function(b){return c[y].push(b.id())})):d[y]=[g.source().id(),g.target().id()]});var p={found:!1,trail:void 0};if(u)return p;if(r&&n)if(l){if(a&&r!=a)return p;a=r}else{if(a&&r!=a&&n!=a)return p;a||(a=r)}else a||(a=s[0].id());var f=function(g){for(var y,b,C,E=g,w=[g];c[E].length;)y=c[E].shift(),b=d[y][0],E!=(C=d[y][1])?(c[C]=c[C].filter(function(x){return x!=y}),E=C):l||E==b||(c[b]=c[b].filter(function(x){return x!=y}),E=b),w.unshift(y),w.unshift(E);return w},h=[],v=[];for(v=f(a);1!=v.length;)0==c[v[0]].length?(h.unshift(s.getElementById(v.shift())),h.unshift(s.getElementById(v.shift()))):v=f(v.shift()).concat(v);for(var m in h.unshift(s.getElementById(v.shift())),c)if(c[m].length)return p;return p.found=!0,p.trail=this.spawn(h,!0),p}},{hopcroftTarjanBiconnected:ia,htbc:ia,htb:ia,hopcroftTarjanBiconnectedComponents:ia},{tarjanStronglyConnected:oa,tsc:oa,tscc:oa,tarjanStronglyConnectedComponents:oa}].forEach(function(e){me(xo,e)});var ln=function e(t){if(!(this instanceof e))return new e(t);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof t&&t.call(this,this.fulfill.bind(this),this.reject.bind(this))};ln.prototype={fulfill:function(e){return wo(this,1,"fulfillValue",e)},reject:function(e){return wo(this,2,"rejectReason",e)},then:function(e,t){var n=new ln;return this.onFulfilled.push(Co(e,n,"fulfill")),this.onRejected.push(Co(t,n,"reject")),Eo(this),n.proxy}};var wo=function(e,t,n,r){return 0===e.state&&(e.state=t,e[n]=r,Eo(e)),e},Eo=function(e){1===e.state?ko(e,"onFulfilled",e.fulfillValue):2===e.state&&ko(e,"onRejected",e.rejectReason)},ko=function(e,t,n){if(0!==e[t].length){var r=e[t];e[t]=[];var a=function(){for(var i=0;i<r.length;i++)r[i](n)};"function"==typeof setImmediate?setImmediate(a):setTimeout(a,0)}},Co=function(e,t,n){return function(r){if("function"!=typeof e)t[n].call(t,r);else{var a;try{a=e(r)}catch(i){return void t.reject(i)}_u(t,a)}}},_u=function e(t,n){if(t!==n&&t.proxy!==n){var r;if("object"===Pe(n)&&null!==n||"function"==typeof n)try{r=n.then}catch(i){return void t.reject(i)}if("function"!=typeof r)t.fulfill(n);else{var a=!1;try{r.call(n,function(i){a||(a=!0,i===n?t.reject(new TypeError("circular thenable chain")):e(t,i))},function(i){a||(a=!0,t.reject(i))})}catch(i){a||t.reject(i)}}}else t.reject(new TypeError("cannot resolve promise with itself"))};ln.all=function(e){return new ln(function(t,n){for(var r=new Array(e.length),a=0,i=function(l,s){r[l]=s,++a===e.length&&t(r)},o=0;o<e.length;o++)!function(l){var s=e[l];null!=s&&null!=s.then?s.then(function(u){i(l,u)},function(u){n(u)}):i(l,s)}(o)})},ln.resolve=function(e){return new ln(function(t,n){t(e)})},ln.reject=function(e){return new ln(function(t,n){n(e)})};var lr="undefined"!=typeof Promise?Promise:ln,Qa=function(e,t,n){var r=Ge(e),a=!r,i=this._private=me({duration:1e3},t,n);if(i.target=e,i.style=i.style||i.css,i.started=!1,i.playing=!1,i.hooked=!1,i.applying=!1,i.progress=0,i.completes=[],i.frames=[],i.complete&&H(i.complete)&&i.completes.push(i.complete),a){var o=e.position();i.startPosition=i.startPosition||{x:o.x,y:o.y},i.startStyle=i.startStyle||e.cy().style().getAnimationStartStyle(e,i.style)}if(r){var l=e.pan();i.startPan={x:l.x,y:l.y},i.startZoom=e.zoom()}this.length=1,this[0]=this},Ln=Qa.prototype;me(Ln,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t=e.target._private.animation;(e.queue?t.queue:t.current).push(this),Oe(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return 1===e.progress&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return void 0===e?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,n=t.playing;return void 0===e?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(l,s){var u=e[l];null!=u&&(e[l]=e[s],e[s]=u)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var r=0;r<e.style.length;r++){var a=e.style[r],i=a.name,o=e.startStyle[i];e.startStyle[i]=a,e.style[r]=o}return t&&this.play(),this},promise:function(e){var t,n=this._private;return t="frame"===e?n.frames:n.completes,new lr(function(r,a){t.push(function(){r()})})}}),Ln.complete=Ln.completed,Ln.run=Ln.play,Ln.running=Ln.playing;var So,Mu={animated:function(){return function(){var e=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return!1;var t=e[0];return t?t._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var e=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;for(var t=0;t<e.length;t++)e[t]._private.animation.queue=[];return this}},delay:function(){return function(e,t){return(this._private.cy||this).styleEnabled()?this.animate({delay:e,duration:e,complete:t}):this}},delayAnimation:function(){return function(e,t){return(this._private.cy||this).styleEnabled()?this.animation({delay:e,duration:e,complete:t}):this}},animation:function(){return function(e,t){var n=void 0!==this.length,r=n?this:[this],a=this._private.cy||this,i=!n,o=!i;if(!a.styleEnabled())return this;var l=a.style();if(e=me({},e,t),0===Object.keys(e).length)return new Qa(r[0],e);switch(void 0===e.duration&&(e.duration=400),e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200}if(o&&(e.style=l.getPropsList(e.style||e.css),e.css=void 0),o&&null!=e.renderedPosition){var s=e.renderedPosition,u=a.pan(),c=a.zoom();e.position=Zi(s,c,u)}if(i&&null!=e.panBy){var d=e.panBy,p=a.pan();e.pan={x:p.x+d.x,y:p.y+d.y}}var f=e.center||e.centre;if(i&&null!=f){var h=a.getCenterPan(f.eles,e.zoom);null!=h&&(e.pan=h)}if(i&&null!=e.fit){var v=e.fit,m=a.getFitViewport(v.eles||v.boundingBox,v.padding);null!=m&&(e.pan=m.pan,e.zoom=m.zoom)}if(i&&ve(e.zoom)){var g=a.getZoomedViewport(e.zoom);null!=g?(g.zoomed&&(e.zoom=g.zoom),g.panned&&(e.pan=g.pan)):e.zoom=null}return new Qa(r[0],e)}},animate:function(){return function(e,t){var n=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;t&&(e=me({},e,t));for(var r=0;r<n.length;r++){var a=n[r],i=a.animated()&&(void 0===e.queue||e.queue);a.animation(e,i?{queue:!0}:void 0).play()}return this}},stop:function(){return function(e,t){var n=void 0!==this.length?this:[this],r=this._private.cy||this;if(!r.styleEnabled())return this;for(var a=0;a<n.length;a++){for(var i=n[a]._private,o=i.animation.current,l=0;l<o.length;l++)t&&(o[l]._private.duration=0);e&&(i.animation.queue=[]),t||(i.animation.current=[])}return r.notify("draw"),this}}},Du=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Tu=/^\w*$/,zu=/^\./,Bu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Nu=/\\(\\)?/g,Ou=/^\[object .+?Constructor\]$/,Ru="object"==typeof self&&self&&self.Object===Object&&self,Ja="object"==typeof lt&&lt&&lt.Object===Object&&lt||Ru||Function("return this")(),Lu=Array.prototype,Au=Function.prototype,Po=Object.prototype,ei=Ja["__core-js_shared__"],_o=(So=/[^.]+$/.exec(ei&&ei.keys&&ei.keys.IE_PROTO||""))?"Symbol(src)_1."+So:"",Mo=Au.toString,ti=Po.hasOwnProperty,Do=Po.toString,Fu=RegExp("^"+Mo.call(ti).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),To=Ja.Symbol,ju=Lu.splice,Vu=No(Ja,"Map"),Br=No(Object,"create"),zo=To?To.prototype:void 0,Bo=zo?zo.toString:void 0;function An(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ur(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Fn(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function sa(e,t){for(var n,r,a=e.length;a--;)if((n=e[a][0])===(r=t)||n!=n&&r!=r)return a;return-1}function la(e,t){var n,r,a=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?a["string"==typeof t?"string":"hash"]:a.map}function No(e,t){var r,n=null==(r=e)?void 0:r[t];return function Xu(e){return!(!Io(e)||(t=e,_o&&_o in t))&&(n=e,r=Io(n)?Do.call(n):"","[object Function]"==r||"[object GeneratorFunction]"==r||function(n){var r=!1;if(null!=n&&"function"!=typeof n.toString)try{r=!!(n+"")}catch(a){}return r}(e)?Fu:Ou).test(function(n){if(null!=n){try{return Mo.call(n)}catch(r){}try{return n+""}catch(r){}}return""}(e));var n,r,t}(n)?n:void 0}An.prototype.clear=function(){this.__data__=Br?Br(null):{}},An.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},An.prototype.get=function(e){var t=this.__data__;if(Br){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return ti.call(t,e)?t[e]:void 0},An.prototype.has=function(e){var t=this.__data__;return Br?void 0!==t[e]:ti.call(t,e)},An.prototype.set=function(e,t){return this.__data__[e]=Br&&void 0===t?"__lodash_hash_undefined__":t,this},ur.prototype.clear=function(){this.__data__=[]},ur.prototype.delete=function(e){var t=this.__data__,n=sa(t,e);return!(n<0||(n==t.length-1?t.pop():ju.call(t,n,1),0))},ur.prototype.get=function(e){var t=this.__data__,n=sa(t,e);return n<0?void 0:t[n][1]},ur.prototype.has=function(e){return sa(this.__data__,e)>-1},ur.prototype.set=function(e,t){var n=this.__data__,r=sa(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},Fn.prototype.clear=function(){this.__data__={hash:new An,map:new(Vu||ur),string:new An}},Fn.prototype.delete=function(e){return la(this,e).delete(e)},Fn.prototype.get=function(e){return la(this,e).get(e)},Fn.prototype.has=function(e){return la(this,e).has(e)},Fn.prototype.set=function(e,t){return la(this,e).set(e,t),this};var Yu=ni(function(e){var t;e=null==(t=e)?"":function(r){if("string"==typeof r)return r;if(ri(r))return Bo?Bo.call(r):"";var a=r+"";return"0"==a&&1/r==-1/0?"-0":a}(t);var n=[];return zu.test(e)&&n.push(""),e.replace(Bu,function(r,a,i,o){n.push(i?o.replace(Nu,"$1"):a||r)}),n});function Hu(e){if("string"==typeof e||ri(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ni(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,r);return n.cache=i.set(a,o),o};return n.cache=new(ni.Cache||Fn),n}ni.Cache=Fn;var Oo=Array.isArray;function Io(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function ri(e){return"symbol"==typeof e||function(t){return!!t&&"object"==typeof t}(e)&&"[object Symbol]"==Do.call(e)}var Ku=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Gu=/^\w*$/,Zu=/^\./,Uu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$u=/\\(\\)?/g,Qu=/^\[object .+?Constructor\]$/,Ju=/^(?:0|[1-9]\d*)$/,tc="object"==typeof self&&self&&self.Object===Object&&self,ai="object"==typeof lt&&lt&&lt.Object===Object&&lt||tc||Function("return this")(),nc=Array.prototype,rc=Function.prototype,Ro=Object.prototype,ii=ai["__core-js_shared__"],Lo=function(){var e=/[^.]+$/.exec(ii&&ii.keys&&ii.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ao=rc.toString,ua=Ro.hasOwnProperty,Fo=Ro.toString,ac=RegExp("^"+Ao.call(ua).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),jo=ai.Symbol,ic=nc.splice,oc=Xo(ai,"Map"),Nr=Xo(Object,"create"),Vo=jo?jo.prototype:void 0,qo=Vo?Vo.toString:void 0;function jn(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function cr(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Vn(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function sc(e,t,n){var r=e[t];ua.call(e,t)&&Yo(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function ca(e,t){for(var n=e.length;n--;)if(Yo(e[n][0],t))return n;return-1}function da(e,t){var n,r,a=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?a["string"==typeof t?"string":"hash"]:a.map}function Xo(e,t){var r,n=null==(r=e)?void 0:r[t];return function lc(e){return!(!ha(e)||(t=e,Lo&&Lo in t))&&(n=e,r=ha(n)?Fo.call(n):"","[object Function]"==r||"[object GeneratorFunction]"==r||function(n){var r=!1;if(null!=n&&"function"!=typeof n.toString)try{r=!!(n+"")}catch(a){}return r}(e)?ac:Qu).test(function(n){if(null!=n){try{return Ao.call(n)}catch(r){}try{return n+""}catch(r){}}return""}(e));var n,r,t}(n)?n:void 0}function cc(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||Ju.test(e))&&e>-1&&e%1==0&&e<t}jn.prototype.clear=function(){this.__data__=Nr?Nr(null):{}},jn.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},jn.prototype.get=function(e){var t=this.__data__;if(Nr){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return ua.call(t,e)?t[e]:void 0},jn.prototype.has=function(e){var t=this.__data__;return Nr?void 0!==t[e]:ua.call(t,e)},jn.prototype.set=function(e,t){return this.__data__[e]=Nr&&void 0===t?"__lodash_hash_undefined__":t,this},cr.prototype.clear=function(){this.__data__=[]},cr.prototype.delete=function(e){var t=this.__data__,n=ca(t,e);return!(n<0||(n==t.length-1?t.pop():ic.call(t,n,1),0))},cr.prototype.get=function(e){var t=this.__data__,n=ca(t,e);return n<0?void 0:t[n][1]},cr.prototype.has=function(e){return ca(this.__data__,e)>-1},cr.prototype.set=function(e,t){var n=this.__data__,r=ca(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},Vn.prototype.clear=function(){this.__data__={hash:new jn,map:new(oc||cr),string:new jn}},Vn.prototype.delete=function(e){return da(this,e).delete(e)},Vn.prototype.get=function(e){return da(this,e).get(e)},Vn.prototype.has=function(e){return da(this,e).has(e)},Vn.prototype.set=function(e,t){return da(this,e).set(e,t),this};var dc=oi(function(e){var t;e=null==(t=e)?"":function(r){if("string"==typeof r)return r;if(si(r))return qo?qo.call(r):"";var a=r+"";return"0"==a&&1/r==-1/0?"-0":a}(t);var n=[];return Zu.test(e)&&n.push(""),e.replace(Uu,function(r,a,i,o){n.push(i?o.replace($u,"$1"):a||r)}),n});function hc(e){if("string"==typeof e||si(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function oi(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,r);return n.cache=i.set(a,o),o};return n.cache=new(oi.Cache||Vn),n}function Yo(e,t){return e===t||e!=e&&t!=t}oi.Cache=Vn;var Ho=Array.isArray;function ha(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function si(e){return"symbol"==typeof e||function(t){return!!t&&"object"==typeof t}(e)&&"[object Symbol]"==Fo.call(e)}var pc=function(e,t,n){return null==e?e:function uc(e,t,n,r){if(!ha(e))return e;for(var a=-1,i=(t=function(d,p){if(Ho(d))return!1;var f=typeof d;return!("number"!=f&&"symbol"!=f&&"boolean"!=f&&null!=d&&!si(d))||Gu.test(d)||!Ku.test(d)||null!=p&&d in Object(p)}(t,e)?[t]:(d=t,Ho(d)?d:dc(d))).length,o=i-1,l=e;null!=l&&++a<i;){var s=hc(t[a]),u=n;if(a!=o){var c=l[s];void 0===(u=r?r(c,s,l):void 0)&&(u=ha(c)?c:cc(t[a+1])?[]:{})}sc(l,s,u),l=l[s]}var d;return e}(e,t,n)},fc=/^\./,gc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,vc=/\\(\\)?/g,yc=/^\[object .+?Constructor\]$/,bc="object"==typeof self&&self&&self.Object===Object&&self,li="object"==typeof lt&&lt&&lt.Object===Object&&lt||bc||Function("return this")(),xc=Array.prototype,wc=Function.prototype,Wo=Object.prototype,ui=li["__core-js_shared__"],Ko=function(){var e=/[^.]+$/.exec(ui&&ui.keys&&ui.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Go=wc.toString,ci=Wo.hasOwnProperty,Zo=Wo.toString,Ec=RegExp("^"+Go.call(ci).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Uo=li.Symbol,kc=xc.splice,Cc=Jo(li,"Map"),Or=Jo(Object,"create"),$o=Uo?Uo.prototype:void 0,Qo=$o?$o.toString:void 0;function qn(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function dr(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Xn(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function pa(e,t){for(var n,r,a=e.length;a--;)if((n=e[a][0])===(r=t)||n!=n&&r!=r)return a;return-1}function fa(e,t){var n,r,a=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?a["string"==typeof t?"string":"hash"]:a.map}function Jo(e,t){var r,n=null==(r=e)?void 0:r[t];return function Sc(e){return!(!es(e)||(t=e,Ko&&Ko in t))&&(n=e,r=es(n)?Zo.call(n):"","[object Function]"==r||"[object GeneratorFunction]"==r||function(n){var r=!1;if(null!=n&&"function"!=typeof n.toString)try{r=!!(n+"")}catch(a){}return r}(e)?Ec:yc).test(function(n){if(null!=n){try{return Go.call(n)}catch(r){}try{return n+""}catch(r){}}return""}(e));var n,r,t}(n)?n:void 0}qn.prototype.clear=function(){this.__data__=Or?Or(null):{}},qn.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},qn.prototype.get=function(e){var t=this.__data__;if(Or){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return ci.call(t,e)?t[e]:void 0},qn.prototype.has=function(e){var t=this.__data__;return Or?void 0!==t[e]:ci.call(t,e)},qn.prototype.set=function(e,t){return this.__data__[e]=Or&&void 0===t?"__lodash_hash_undefined__":t,this},dr.prototype.clear=function(){this.__data__=[]},dr.prototype.delete=function(e){var t=this.__data__,n=pa(t,e);return!(n<0||(n==t.length-1?t.pop():kc.call(t,n,1),0))},dr.prototype.get=function(e){var t=this.__data__,n=pa(t,e);return n<0?void 0:t[n][1]},dr.prototype.has=function(e){return pa(this.__data__,e)>-1},dr.prototype.set=function(e,t){var n=this.__data__,r=pa(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},Xn.prototype.clear=function(){this.__data__={hash:new qn,map:new(Cc||dr),string:new qn}},Xn.prototype.delete=function(e){return fa(this,e).delete(e)},Xn.prototype.get=function(e){return fa(this,e).get(e)},Xn.prototype.has=function(e){return fa(this,e).has(e)},Xn.prototype.set=function(e,t){return fa(this,e).set(e,t),this};var Pc=di(function(e){var t;e=null==(t=e)?"":function(r){if("string"==typeof r)return r;if(hi(r))return Qo?Qo.call(r):"";var a=r+"";return"0"==a&&1/r==-1/0?"-0":a}(t);var n=[];return fc.test(e)&&n.push(""),e.replace(gc,function(r,a,i,o){n.push(i?o.replace(vc,"$1"):a||r)}),n});function _c(e){if("string"==typeof e||hi(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function di(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,r);return n.cache=i.set(a,o),o};return n.cache=new(di.Cache||Xn),n}di.Cache=Xn;var Mc=Array.isArray;function es(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function hi(e){return"symbol"==typeof e||function(t){return!!t&&"object"==typeof t}(e)&&"[object Symbol]"==Zo.call(e)}var Ke={};[Mu,{data:function(e){return e=me({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(t){},beforeSet:function(t,n){},onSet:function(t){},canSet:function(t){return!0}},e),function(t,n){var r=e,a=void 0!==this.length,i=a?this:[this],o=a?this[0]:this;if(ie(t)){var l,s=-1!==t.indexOf(".")&&function(e){return Mc(e)?function(t,n){for(var r=-1,a=t?t.length:0,i=Array(a);++r<a;)i[r]=n(t[r],r,t);return i}(e,_c):hi(e)?[e]:function(t,n){var r=-1,a=t.length;for(n||(n=Array(a));++r<a;)n[r]=t[r];return n}(Pc(e))}(t);if(r.allowGetting&&void 0===n)return o&&(r.beforeGet(o),l=s&&void 0===o._private[r.field][t]?function(e,t,n){var r=null==e?void 0:function qu(e,t){for(var n,r=0,a=(t=function(i,o){if(Oo(i))return!1;var l=typeof i;return!("number"!=l&&"symbol"!=l&&"boolean"!=l&&null!=i&&!ri(i))||Tu.test(i)||!Du.test(i)||null!=o&&i in Object(o)}(t,e)?[t]:Oo(n=t)?n:Yu(n)).length;null!=e&&r<a;)e=e[Hu(t[r++])];return r&&r==a?e:void 0}(e,t);return void 0===r?n:r}(o._private[r.field],s):o._private[r.field][t]),l;if(r.allowSetting&&void 0!==n&&!r.immutableKeys[t]){var u=W({},t,n);r.beforeSet(this,u);for(var c=0,d=i.length;c<d;c++){var p=i[c];r.canSet(p)&&(s&&void 0===o._private[r.field][t]?pc(p._private[r.field],s,n):p._private[r.field][t]=n)}r.updateStyle&&this.updateStyle(),r.onSet(this),r.settingTriggersEvent&&this[r.triggerFnName](r.settingEvent)}}else if(r.allowSetting&&ve(t)){var f,h,v=t,m=Object.keys(v);r.beforeSet(this,v);for(var g=0;g<m.length;g++)if(h=v[f=m[g]],!r.immutableKeys[f])for(var y=0;y<i.length;y++){var b=i[y];r.canSet(b)&&(b._private[r.field][f]=h)}r.updateStyle&&this.updateStyle(),r.onSet(this),r.settingTriggersEvent&&this[r.triggerFnName](r.settingEvent)}else if(r.allowBinding&&H(t))this.on(r.bindingEvent,t);else if(r.allowGetting&&void 0===t){var E;return o&&(r.beforeGet(o),E=o._private[r.field]),E}return this}},removeData:function(e){return e=me({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},e),function(t){var n=e,r=void 0!==this.length?this:[this];if(ie(t)){for(var a=t.split(/\s+/),i=a.length,o=0;o<i;o++){var l=a[o];if(!Ae(l)&&!n.immutableKeys[l])for(var s=0,u=r.length;s<u;s++)r[s]._private[n.field][l]=void 0}n.triggerEvent&&this[n.triggerFnName](n.event)}else if(void 0===t){for(var c=0,d=r.length;c<d;c++)for(var p=r[c]._private[n.field],f=Object.keys(p),h=0;h<f.length;h++){var v=f[h];!n.immutableKeys[v]&&(p[v]=void 0)}n.triggerEvent&&this[n.triggerFnName](n.event)}return this}}},{eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(n,r){var a=this,i=Array.prototype.slice.call(arguments,0);return new lr(function(o,l){var s=i.concat([function(c){a.off.apply(a,u),o(c)}]),u=s.concat([]);a.on.apply(a,s)})}}}].forEach(function(e){me(Ke,e)});var Tc={animate:Ke.animate(),animation:Ke.animation(),animated:Ke.animated(),clearQueue:Ke.clearQueue(),delay:Ke.delay(),delayAnimation:Ke.delayAnimation(),stop:Ke.stop()},ga={classes:function(e){if(void 0===e){var t=[];return this[0]._private.classes.forEach(function(d){return t.push(d)}),t}ne(e)||(e=(e||"").match(/\S+/g)||[]);for(var n=[],r=new tr(e),a=0;a<this.length;a++){for(var i=this[a],o=i._private,l=o.classes,s=!1,u=0;u<e.length;u++)if(!l.has(e[u])){s=!0;break}s||(s=l.size!==e.length),s&&(o.classes=r,n.push(i))}return n.length>0&&this.spawn(n).updateStyle().emit("class"),this},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return null!=t&&t._private.classes.has(e)},toggleClass:function(e,t){ne(e)||(e=e.match(/\S+/g)||[]);for(var n=void 0===t,r=[],a=0,i=this.length;a<i;a++)for(var o=this[a],l=o._private.classes,s=!1,u=0;u<e.length;u++){var c=e[u],d=l.has(c),p=!1;t||n&&!d?(l.add(c),p=!0):(!t||n&&d)&&(l.delete(c),p=!0),!s&&p&&(r.push(o),s=!0)}return r.length>0&&this.spawn(r).updateStyle().emit("class"),this},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(null==t)t=250;else if(0===t)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}};ga.className=ga.classNames=ga.classes;var je={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:an,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};je.variable="(?:[\\w-.]|(?:\\\\"+je.metaChar+"))+",je.className="(?:[\\w-]|(?:\\\\"+je.metaChar+"))+",je.value=je.string+"|"+je.number,je.id=je.variable,function(){var e,t,n;for(e=je.comparatorOp.split("|"),n=0;n<e.length;n++)je.comparatorOp+="|@"+(t=e[n]);for(e=je.comparatorOp.split("|"),n=0;n<e.length;n++)(t=e[n]).indexOf("!")>=0||"="!==t&&(je.comparatorOp+="|\\!"+t)}();var Si=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(e,t){return-1*Ve(e.selector,t.selector)}),zc=function(){for(var e,t={},n=0;n<Si.length;n++)t[(e=Si[n]).selector]=e.matches;return t}(),Bc="("+Si.map(function(e){return e.selector}).join("|")+")",pr=function(e){return e.replace(new RegExp("\\\\("+je.metaChar+")","g"),function(t,n){return n})},vn=function(e,t,n){e[e.length-1]=n},Pi=[{name:"group",query:!0,regex:"("+je.group+")",populate:function(e,t,n){var r=G(n,1)[0];t.checks.push({type:0,value:"*"===r?r:r+"s"})}},{name:"state",query:!0,regex:Bc,populate:function(e,t,n){var r=G(n,1)[0];t.checks.push({type:7,value:r})}},{name:"id",query:!0,regex:"\\#("+je.id+")",populate:function(e,t,n){var r=G(n,1)[0];t.checks.push({type:8,value:pr(r)})}},{name:"className",query:!0,regex:"\\.("+je.className+")",populate:function(e,t,n){var r=G(n,1)[0];t.checks.push({type:9,value:pr(r)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+je.variable+")\\s*\\]",populate:function(e,t,n){var r=G(n,1)[0];t.checks.push({type:4,field:pr(r)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+je.variable+")\\s*("+je.comparatorOp+")\\s*("+je.value+")\\s*\\]",populate:function(e,t,n){var r=G(n,3),a=r[0],i=r[1],o=r[2];o=null!=new RegExp("^"+je.string+"$").exec(o)?o.substring(1,o.length-1):parseFloat(o),t.checks.push({type:3,field:pr(a),operator:i,value:o})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+je.boolOp+")\\s*("+je.variable+")\\s*\\]",populate:function(e,t,n){var r=G(n,2),a=r[0];t.checks.push({type:5,field:pr(r[1]),operator:a})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+je.meta+")\\s*("+je.comparatorOp+")\\s*("+je.number+")\\s*\\]\\]",populate:function(e,t,n){var r=G(n,3),i=r[1],o=r[2];t.checks.push({type:6,field:pr(r[0]),operator:i,value:parseFloat(o)})}},{name:"nextQuery",separator:!0,regex:je.separator,populate:function(e,t){var n=e.currentSubject,r=e.edgeCount,a=e.compoundCount,i=e[e.length-1];return null!=n&&(i.subject=n,e.currentSubject=null),i.edgeCount=r,i.compoundCount=a,e.edgeCount=0,e.compoundCount=0,e[e.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:je.directedEdge,populate:function(e,t){if(null==e.currentSubject){var n={checks:[]},a={checks:[]};return n.checks.push({type:11,source:t,target:a}),vn(e,0,n),e.edgeCount++,a}var i={checks:[]},l={checks:[]};return i.checks.push({type:12,source:t,target:l}),vn(e,0,i),e.edgeCount++,l}},{name:"undirectedEdge",separator:!0,regex:je.undirectedEdge,populate:function(e,t){if(null==e.currentSubject){var n={checks:[]},a={checks:[]};return n.checks.push({type:10,nodes:[t,a]}),vn(e,0,n),e.edgeCount++,a}var i={checks:[]},l={checks:[]};return i.checks.push({type:14,node:t,neighbor:l}),vn(e,0,i),l}},{name:"child",separator:!0,regex:je.child,populate:function(e,t){if(null==e.currentSubject){var n={checks:[]},r={checks:[]};return n.checks.push({type:15,parent:e[e.length-1],child:r}),vn(e,0,n),e.compoundCount++,r}if(e.currentSubject===t){var i={checks:[]},l={checks:[]},s={checks:[]},u={checks:[]},c={checks:[]};return i.checks.push({type:19,left:e[e.length-1],right:l,subject:s}),s.checks=t.checks,t.checks=[{type:20}],c.checks.push({type:20}),l.checks.push({type:17,parent:c,child:u}),vn(e,0,i),e.currentSubject=s,e.compoundCount++,u}var d={checks:[]},p={checks:[]},f=[{type:17,parent:d,child:p}];return d.checks=t.checks,t.checks=f,e.compoundCount++,p}},{name:"descendant",separator:!0,regex:je.descendant,populate:function(e,t){if(null==e.currentSubject){var n={checks:[]},r={checks:[]};return n.checks.push({type:16,ancestor:e[e.length-1],descendant:r}),vn(e,0,n),e.compoundCount++,r}if(e.currentSubject===t){var i={checks:[]},l={checks:[]},s={checks:[]},u={checks:[]},c={checks:[]};return i.checks.push({type:19,left:e[e.length-1],right:l,subject:s}),s.checks=t.checks,t.checks=[{type:20}],c.checks.push({type:20}),l.checks.push({type:18,ancestor:c,descendant:u}),vn(e,0,i),e.currentSubject=s,e.compoundCount++,u}var d={checks:[]},p={checks:[]},f=[{type:18,ancestor:d,descendant:p}];return d.checks=t.checks,t.checks=f,e.compoundCount++,p}},{name:"subject",modifier:!0,regex:je.subject,populate:function(e,t){if(null!=e.currentSubject&&e.currentSubject!==t)return Ue("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var n=e[e.length-1].checks[0],r=null==n?null:n.type;11===r?n.type=13:10===r&&(n.type=14,n.node=n.nodes[1],n.neighbor=n.nodes[0],n.nodes=null)}}];Pi.forEach(function(e){return e.regexObj=new RegExp("^"+e.regex)});var Nc=function(e){for(var t,n,r,a=0;a<Pi.length;a++){var i=Pi[a],o=i.name,l=e.match(i.regexObj);if(null!=l){n=l,t=i,r=o,e=e.substring(l[0].length);break}}return{expr:t,match:n,name:r,remaining:e}},Oc={parse:function(e){var u,c,t=this.inputText=e,n=this[0]={checks:[]};for(this.length=1,c=void 0,(c=(u=t).match(/^\s+/))&&(u=u.substring(c[0].length)),t=u;;){var r=Nc(t);if(null==r.expr)return Ue("The selector `"+e+"`is invalid"),!1;var a=r.match.slice(1),i=r.expr.populate(this,n,a);if(!1===i)return!1;if(null!=i&&(n=i),(t=r.remaining).match(/^\s*$/))break}var o=this[this.length-1];null!=this.currentSubject&&(o.subject=this.currentSubject),o.edgeCount=this.edgeCount,o.compoundCount=this.compoundCount;for(var l=0;l<this.length;l++){var s=this[l];if(s.compoundCount>0&&s.edgeCount>0)return Ue("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(s.edgeCount>1)return Ue("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;1===s.edgeCount&&Ue("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var e=function(s){return null==s?"":s},t=function(s){return ie(s)?'"'+s+'"':e(s)},n=function(s){return" "+s+" "},a=function(s,u){return s.checks.reduce(function(c,d,p){return c+(u===s&&0===p?"$":"")+function(s,u){var d=s.value;switch(s.type){case 0:var p=e(d);return p.substring(0,p.length-1);case 3:return"["+s.field+n(e(s.operator))+t(d)+"]";case 5:var m=s.field;return"["+e(s.operator)+m+"]";case 4:return"["+s.field+"]";case 6:return"[["+s.field+n(e(s.operator))+t(d)+"]]";case 7:return d;case 8:return"#"+d;case 9:return"."+d;case 17:case 15:return a(s.parent,u)+n(">")+a(s.child,u);case 18:case 16:return a(s.ancestor,u)+" "+a(s.descendant,u);case 19:var y=a(s.left,u),b=a(s.subject,u),C=a(s.right,u);return y+(y.length>0?" ":"")+b+C;case 20:return""}}(d,u)},"")},i="",o=0;o<this.length;o++){var l=this[o];i+=a(l,l.subject),this.length>1&&o<this.length-1&&(i+=", ")}return this.toStringCache=i,i}},is=function(e,t,n){var r,a,i,o=ie(e),l=Z(e),s=ie(n),u=!1,c=!1,d=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),c=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),u=!0),(o||s||u)&&(a=o||l?""+e:"",i=""+n),u&&(e=a=a.toLowerCase(),n=i=i.toLowerCase()),t){case"*=":r=a.indexOf(i)>=0;break;case"$=":r=a.indexOf(i,a.length-i.length)>=0;break;case"^=":r=0===a.indexOf(i);break;case"=":r=e===n;break;case">":d=!0,r=e>n;break;case">=":d=!0,r=e>=n;break;case"<":d=!0,r=e<n;break;case"<=":d=!0,r=e<=n;break;default:r=!1}return!c||null==e&&d||(r=!r),r},_i=function(e,t){return e.data(t)},ht=[],st=function(e,t){return e.checks.every(function(n){return ht[n.type](n,t)})};ht[0]=function(e,t){var n=e.value;return"*"===n||n===t.group()},ht[7]=function(e,t){return zc[e.value](t)},ht[8]=function(e,t){var n=e.value;return t.id()===n},ht[9]=function(e,t){return t.hasClass(e.value)},ht[6]=function(e,t){var r=e.operator,a=e.value;return is(t[e.field](),r,a)},ht[3]=function(e,t){var r=e.operator,a=e.value;return is(_i(t,e.field),r,a)},ht[5]=function(e,t){var r=e.operator;return function(a,i){switch(i){case"?":return!!a;case"!":return!a;case"^":return void 0===a}}(_i(t,e.field),r)},ht[4]=function(e,t){return void 0!==_i(t,e.field)},ht[10]=function(e,t){var n=e.nodes[0],r=e.nodes[1],a=t.source(),i=t.target();return st(n,a)&&st(r,i)||st(r,a)&&st(n,i)},ht[14]=function(e,t){return st(e.node,t)&&t.neighborhood().some(function(n){return n.isNode()&&st(e.neighbor,n)})},ht[11]=function(e,t){return st(e.source,t.source())&&st(e.target,t.target())},ht[12]=function(e,t){return st(e.source,t)&&t.outgoers().some(function(n){return n.isNode()&&st(e.target,n)})},ht[13]=function(e,t){return st(e.target,t)&&t.incomers().some(function(n){return n.isNode()&&st(e.source,n)})},ht[15]=function(e,t){return st(e.child,t)&&st(e.parent,t.parent())},ht[17]=function(e,t){return st(e.parent,t)&&t.children().some(function(n){return st(e.child,n)})},ht[16]=function(e,t){return st(e.descendant,t)&&t.ancestors().some(function(n){return st(e.ancestor,n)})},ht[18]=function(e,t){return st(e.ancestor,t)&&t.descendants().some(function(n){return st(e.descendant,n)})},ht[19]=function(e,t){return st(e.subject,t)&&st(e.left,t)&&st(e.right,t)},ht[20]=function(){return!0},ht[1]=function(e,t){return e.value.has(t)},ht[2]=function(e,t){return(0,e.value)(t)};var yn=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==e||ie(e)&&e.match(/^\s*$/)||(Oe(e)?this.addQuery({checks:[{type:1,value:e.collection()}]}):H(e)?this.addQuery({checks:[{type:2,value:e}]}):ie(e)?this.parse(e)||(this.invalid=!0):ot("A selector must be created from a string; found "))},mn=yn.prototype;[Oc,{matches:function(e){for(var t=0;t<this.length;t++)if(st(this[t],e))return!0;return!1},filter:function(e){var t=this;if(1===t.length&&1===t[0].checks.length&&8===t[0].checks[0].type)return e.getElementById(t[0].checks[0].value).collection();var n=function(r){for(var a=0;a<t.length;a++)if(st(t[a],r))return!0;return!1};return null==t.text()&&(n=function(){return!0}),e.filter(n)}}].forEach(function(e){return me(mn,e)}),mn.text=function(){return this.inputText},mn.size=function(){return this.length},mn.eq=function(e){return this[e]},mn.sameText=function(e){return!this.invalid&&!e.invalid&&this.text()===e.text()},mn.addQuery=function(e){this[this.length++]=e},mn.selector=mn.toString;var bn={allAre:function(e){var t=new yn(e);return this.every(function(n){return t.matches(n)})},is:function(e){var t=new yn(e);return this.some(function(n){return t.matches(n)})},some:function(e,t){for(var n=0;n<this.length;n++)if(t?e.apply(t,[this[n],n,this]):e(this[n],n,this))return!0;return!1},every:function(e,t){for(var n=0;n<this.length;n++)if(!(t?e.apply(t,[this[n],n,this]):e(this[n],n,this)))return!1;return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length;return t===e.length&&(1===t?this[0]===e[0]:this.every(function(n){return e.hasElementWithId(n.id())}))},anySame:function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(n){return t.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var t=this;return e.every(function(n){return t.hasElementWithId(n.id())})}};bn.allAreNeighbours=bn.allAreNeighbors,bn.has=bn.contains,bn.equal=bn.equals=bn.same;var xa,os,Yt=function(e,t){return function(n,r,a,i){var o,l=n;if(null==l?o="":Oe(l)&&1===l.length&&(o=l.id()),1===this.length&&o){var s=this[0]._private,u=s.traversalCache=s.traversalCache||{},c=u[t]=u[t]||[],d=Xe(o);return c[d]||(c[d]=e.call(this,n,r,a,i))}return e.call(this,n,r,a,i)}},fr={parent:function(e){var t=[];if(1===this.length){var n=this[0]._private.parent;if(n)return n}for(var r=0;r<this.length;r++){var a=this[r]._private.parent;a&&t.push(a)}return this.spawn(t,!0).filter(e)},parents:function(e){for(var t=[],n=this.parent();n.nonempty();){for(var r=0;r<n.length;r++)t.push(n[r]);n=n.parent()}return this.spawn(t,!0).filter(e)},commonAncestors:function(e){for(var t,n=0;n<this.length;n++){var r=this[n].parents();t=(t=t||r).intersect(r)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(t){return t.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(t){return t.isChild()}).filter(e)},children:Yt(function(e){for(var t=[],n=0;n<this.length;n++)for(var r=this[n]._private.children,a=0;a<r.length;a++)t.push(r[a]);return this.spawn(t,!0).filter(e)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&0!==e._private.children.length},isChildless:function(){var e=this[0];if(e)return e.isNode()&&0===e._private.children.length},isChild:function(){var e=this[0];if(e)return e.isNode()&&null!=e._private.parent},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&null==e._private.parent},descendants:function(e){var t=[];return function n(r){for(var a=0;a<r.length;a++){var i=r[a];t.push(i),i.children().nonempty()&&n(i.children())}}(this.children()),this.spawn(t,!0).filter(e)}};function Mi(e,t,n,r){for(var a=[],i=new tr,o=e.cy().hasCompoundNodes(),l=0;l<e.length;l++){var s=e[l];n?a.push(s):o&&r(a,i,s)}for(;a.length>0;){var u=a.shift();t(u),i.add(u.id()),o&&r(a,i,u)}return e}function ss(e,t,n){if(n.isParent())for(var r=n._private.children,a=0;a<r.length;a++){var i=r[a];t.has(i.id())||e.push(i)}}function ls(e,t,n){if(n.isChild()){var r=n._private.parent;t.has(r.id())||e.push(r)}}function Ic(e,t,n){ls(e,t,n),ss(e,t,n)}fr.forEachDown=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Mi(this,e,t,ss)},fr.forEachUp=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Mi(this,e,t,ls)},fr.forEachUpAndDown=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Mi(this,e,t,Ic)},fr.ancestors=fr.parents,(xa=os={data:Ke.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Ke.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Ke.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Ke.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Ke.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Ke.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}}).attr=xa.data,xa.removeAttr=xa.removeData;var tn,us,Rc=os,wa={};function Di(e){return function(t){if(void 0===t&&(t=!0),0!==this.length&&this.isNode()&&!this.removed()){for(var n=0,r=this[0],a=r._private.edges,i=0;i<a.length;i++){var o=a[i];!t&&o.isLoop()||(n+=e(r,o))}return n}}}function gr(e,t){return function(n){for(var r,a=this.nodes(),i=0;i<a.length;i++){var o=a[i][e](n);void 0===o||void 0!==r&&!t(o,r)||(r=o)}return r}}me(wa,{degree:Di(function(e,t){return t.source().same(t.target())?2:1}),indegree:Di(function(e,t){return t.target().same(e)?1:0}),outdegree:Di(function(e,t){return t.source().same(e)?1:0})}),me(wa,{minDegree:gr("degree",function(e,t){return e<t}),maxDegree:gr("degree",function(e,t){return e>t}),minIndegree:gr("indegree",function(e,t){return e<t}),maxIndegree:gr("indegree",function(e,t){return e>t}),minOutdegree:gr("outdegree",function(e,t){return e<t}),maxOutdegree:gr("outdegree",function(e,t){return e>t})}),me(wa,{totalDegree:function(e){for(var t=0,n=this.nodes(),r=0;r<n.length;r++)t+=n[r].degree(e);return t}});var cs=function(e,t,n){for(var r=0;r<e.length;r++){var a=e[r];if(!a.locked()){var i=a._private.position,o={x:null!=t.x?t.x-i.x:0,y:null!=t.y?t.y-i.y:0};!a.isParent()||0===o.x&&0===o.y||a.children().shift(o,n),a.dirtyBoundingBoxCache()}}},ds={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){cs(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};(tn=us={position:Ke.data(ds),silentPosition:Ke.data(me({},ds,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){cs(e,t,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,t){if(ve(e))t?this.silentPosition(e):this.position(e);else if(H(e)){var n=e,r=this.cy();r.startBatch();for(var a=0;a<this.length;a++){var i,o=this[a];(i=n(o,a))&&(t?o.silentPosition(i):o.position(i))}r.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,n){var r;if(ve(e)?(r={x:Z(e.x)?e.x:0,y:Z(e.y)?e.y:0},n=t):ie(e)&&Z(t)&&((r={x:0,y:0})[e]=t),null!=r){var a=this.cy();a.startBatch();for(var i=0;i<this.length;i++){var o=this[i];if(!(a.hasCompoundNodes()&&o.isChild()&&o.ancestors().anySame(this))){var l=o.position(),s={x:l.x+r.x,y:l.y+r.y};n?o.silentPosition(s):o.position(s)}}a.endBatch()}return this},silentShift:function(e,t){return ve(e)?this.shift(e,!0):ie(e)&&Z(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var n=this[0],r=this.cy(),a=r.zoom(),i=r.pan(),o=ve(e)?e:void 0,l=void 0!==o||void 0!==t&&ie(e);if(n&&n.isNode()){if(!l){var s=n.position();return o=Qr(s,a,i),void 0===e?o:o[e]}for(var u=0;u<this.length;u++){var c=this[u];void 0!==t?c.position(e,(t-i[e])/a):void 0!==o&&c.position(Zi(o,a,i))}}else if(!l)return;return this},relativePosition:function(e,t){var n=this[0],r=this.cy(),a=ve(e)?e:void 0,i=void 0!==a||void 0!==t&&ie(e),o=r.hasCompoundNodes();if(n&&n.isNode()){if(!i){var l=n.position(),s=o?n.parent():null,u=s&&s.length>0;u&&(s=s[0]);var d=u?s.position():{x:0,y:0};return a={x:l.x-d.x,y:l.y-d.y},void 0===e?a:a[e]}for(var p=0;p<this.length;p++){var f=this[p],h=o?f.parent():null,v=h&&h.length>0;v&&(h=h[0]);var g=v?h.position():{x:0,y:0};void 0!==t?f.position(e,t+g[e]):void 0!==a&&f.position({x:a.x+g.x,y:a.y+g.y})}}else if(!i)return;return this}}).modelPosition=tn.point=tn.position,tn.modelPositions=tn.points=tn.positions,tn.renderedPoint=tn.renderedPosition,tn.relativePoint=tn.relativePosition;var vr,xn,Lc=us;vr=xn={},xn.renderedBoundingBox=function(e){var t=this.boundingBox(e),n=this.cy(),r=n.zoom(),a=n.pan(),i=t.x1*r+a.x,o=t.x2*r+a.x,l=t.y1*r+a.y,s=t.y2*r+a.y;return{x1:i,x2:o,y1:l,y2:s,w:o-i,h:s-l}},xn.dirtyCompoundBoundsCache=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy();return t.styleEnabled()&&t.hasCompoundNodes()?(this.forEachUp(function(n){if(n.isParent()){var r=n._private;r.compoundBoundsClean=!1,r.bbCache=null,e||n.emitAndNotify("bounds")}}),this):this},xn.updateCompoundBounds=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes())return this;if(!e&&t.batching())return this;function n(o){if(o.isParent()){var l=o._private,s=o.children(),u="include"===o.pstyle("compound-sizing-wrt-labels").value,c={width:{val:o.pstyle("min-width").pfValue,left:o.pstyle("min-width-bias-left"),right:o.pstyle("min-width-bias-right")},height:{val:o.pstyle("min-height").pfValue,top:o.pstyle("min-height-bias-top"),bottom:o.pstyle("min-height-bias-bottom")}},d=s.boundingBox({includeLabels:u,includeOverlays:!1,useCache:!1}),p=l.position;0!==d.w&&0!==d.h||((d={w:o.pstyle("width").pfValue,h:o.pstyle("height").pfValue}).x1=p.x-d.w/2,d.x2=p.x+d.w/2,d.y1=p.y-d.h/2,d.y2=p.y+d.h/2);var f=c.width.left.value;"px"===c.width.left.units&&c.width.val>0&&(f=100*f/c.width.val);var h=c.width.right.value;"px"===c.width.right.units&&c.width.val>0&&(h=100*h/c.width.val);var v=c.height.top.value;"px"===c.height.top.units&&c.height.val>0&&(v=100*v/c.height.val);var m=c.height.bottom.value;"px"===c.height.bottom.units&&c.height.val>0&&(m=100*m/c.height.val);var g=x(c.width.val-d.w,f,h),y=g.biasDiff,b=g.biasComplementDiff,C=x(c.height.val-d.h,v,m),E=C.biasDiff,w=C.biasComplementDiff;l.autoPadding=function(S,P,_,D){if("%"!==_.units)return"px"===_.units?_.pfValue:0;switch(D){case"width":return S>0?_.pfValue*S:0;case"height":return P>0?_.pfValue*P:0;case"average":return S>0&&P>0?_.pfValue*(S+P)/2:0;case"min":return S>0&&P>0?S>P?_.pfValue*P:_.pfValue*S:0;case"max":return S>0&&P>0?S>P?_.pfValue*S:_.pfValue*P:0;default:return 0}}(d.w,d.h,o.pstyle("padding"),o.pstyle("padding-relative-to").value),l.autoWidth=Math.max(d.w,c.width.val),p.x=(-y+d.x1+d.x2+b)/2,l.autoHeight=Math.max(d.h,c.height.val),p.y=(-E+d.y1+d.y2+w)/2}function x(S,P,_){var D=0,T=0,z=P+_;return S>0&&z>0&&(D=P/z*S,T=_/z*S),{biasDiff:D,biasComplementDiff:T}}}for(var r=0;r<this.length;r++){var a=this[r],i=a._private;i.compoundBoundsClean&&!e||(n(a),t.batching()||(i.compoundBoundsClean=!0))}return this};var Ht=function(e){return e===1/0||e===-1/0?0:e},Ut=function(e,t,n,r,a){r-t!=0&&a-n!=0&&null!=t&&null!=n&&null!=r&&null!=a&&(e.x1=t<e.x1?t:e.x1,e.x2=r>e.x2?r:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=a>e.y2?a:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},Yn=function(e,t){return null==t?e:Ut(e,t.x1,t.y1,t.x2,t.y2)},Ir=function(e,t,n){return Zt(e,t,n)},Ea=function(e,t,n){if(!t.cy().headless()){var r,a,i=t._private,o=i.rstyle,l=o.arrowWidth/2;if("none"!==t.pstyle(n+"-arrow-shape").value){"source"===n?(r=o.srcX,a=o.srcY):"target"===n?(r=o.tgtX,a=o.tgtY):(r=o.midX,a=o.midY);var s=i.arrowBounds=i.arrowBounds||{},u=s[n]=s[n]||{};u.x1=r-l,u.y1=a-l,u.x2=r+l,u.y2=a+l,u.w=u.x2-u.x1,u.h=u.y2-u.y1,ea(u,1),Ut(e,u.x1,u.y1,u.x2,u.y2)}}},Ti=function(e,t,n){if(!t.cy().headless()){var r,a=t._private,i=a.rstyle;if(t.pstyle((r=n?n+"-":"")+"label").strValue){var o,l,s,u,c=t.pstyle("text-halign"),d=t.pstyle("text-valign"),p=Ir(i,"labelWidth",n),f=Ir(i,"labelHeight",n),h=Ir(i,"labelX",n),v=Ir(i,"labelY",n),m=t.pstyle(r+"text-margin-x").pfValue,g=t.pstyle(r+"text-margin-y").pfValue,y=t.isEdge(),b=t.pstyle(r+"text-rotation"),C=t.pstyle("text-outline-width").pfValue,E=t.pstyle("text-border-width").pfValue/2,w=t.pstyle("text-background-padding").pfValue,x=f,S=p,P=S/2,_=x/2;if(y)o=h-P,l=h+P,s=v-_,u=v+_;else{switch(c.value){case"left":o=h-S,l=h;break;case"center":o=h-P,l=h+P;break;case"right":o=h,l=h+S}switch(d.value){case"top":s=v-x,u=v;break;case"center":s=v-_,u=v+_;break;case"bottom":s=v,u=v+x}}o+=m-Math.max(C,E)-w-2,l+=m+Math.max(C,E)+w+2,s+=g-Math.max(C,E)-w-2,u+=g+Math.max(C,E)+w+2;var D=n||"main",T=a.labelBounds,z=T[D]=T[D]||{};z.x1=o,z.y1=s,z.x2=l,z.y2=u,z.w=l-o,z.h=u-s;var I=y&&"autorotate"===b.strValue;if(I||null!=b.pfValue&&0!==b.pfValue){var M=I?Ir(a.rstyle,"labelAngle",n):b.pfValue,q=Math.cos(M),A=Math.sin(M),L=(o+l)/2,X=(s+u)/2;if(!y){switch(c.value){case"left":L=l;break;case"right":L=o}switch(d.value){case"top":X=u;break;case"bottom":X=s}}var F=function(oe,ye){return{x:(oe-=L)*q-(ye-=X)*A+L,y:oe*A+ye*q+X}},V=F(o,s),Y=F(o,u),$=F(l,s),re=F(l,u);o=Math.min(V.x,Y.x,$.x,re.x),l=Math.max(V.x,Y.x,$.x,re.x),s=Math.min(V.y,Y.y,$.y,re.y),u=Math.max(V.y,Y.y,$.y,re.y)}var te=D+"Rot",de=T[te]=T[te]||{};de.x1=o,de.y1=s,de.x2=l,de.y2=u,de.w=l-o,de.h=u-s,Ut(e,o,s,l,u),Ut(a.labelBounds.all,o,s,l,u)}return e}},hs=function(e){var t=0,n=function(a){return(a?1:0)<<t++},r=0;return r+=n(e.incudeNodes),r+=n(e.includeEdges),r+=n(e.includeLabels),r+=n(e.includeMainLabels),r+=n(e.includeSourceLabels),(r+=n(e.includeTargetLabels))+n(e.includeOverlays)},ps=function(e){if(e.isEdge()){var t=e.source().position(),n=e.target().position(),r=function(a){return Math.round(a)};return a=[r(t.x),r(t.y),r(n.x),r(n.y)],o={value:0,done:!1},l=0,s=a.length,ct({next:function(){return l<s?o.value=a[l++]:o.done=!0,o}},void 0)}var a,o,l,s;return 0},fs=function(e,t){var n,r=e._private,a=e.isEdge(),i=(null==t?gs:hs(t))===gs,o=ps(e),l=r.bbCachePosKey===o,s=t.useCache&&l,u=function(d){return null==d._private.bbCache||d._private.styleDirty};if(!s||u(e)||a&&u(e.source())||u(e.target())?(l||e.recalculateRenderedStyle(s),n=function(d,p){var f,h,v,m,g,y,b,C=d._private.cy,E=C.styleEnabled(),w=C.headless(),x=At(),S=d._private,P=d.isNode(),_=d.isEdge(),D=S.rstyle,T=P&&E?d.pstyle("bounds-expansion").pfValue:[0],z=function(O){return"none"!==O.pstyle("display").value},I=!E||z(d)&&(!_||z(d.source())&&z(d.target()));if(I){var N=0;E&&p.includeOverlays&&0!==d.pstyle("overlay-opacity").value&&(N=d.pstyle("overlay-padding").value);var M=0;E&&p.includeUnderlays&&0!==d.pstyle("underlay-opacity").value&&(M=d.pstyle("underlay-padding").value);var q=Math.max(N,M),A=0;if(E&&(A=d.pstyle("width").pfValue/2),P&&p.includeNodes){var L=d.position();g=L.x,y=L.y;var X=d.outerWidth()/2,F=d.outerHeight()/2;Ut(x,f=g-X,v=y-F,h=g+X,m=y+F)}else if(_&&p.includeEdges)if(E&&!w){var V=d.pstyle("curve-style").strValue;if(f=Math.min(D.srcX,D.midX,D.tgtX),h=Math.max(D.srcX,D.midX,D.tgtX),v=Math.min(D.srcY,D.midY,D.tgtY),m=Math.max(D.srcY,D.midY,D.tgtY),Ut(x,f-=A,v-=A,h+=A,m+=A),"haystack"===V){var Y=D.haystackPts;if(Y&&2===Y.length){if((f=Y[0].x)>(h=Y[1].x)){var $=f;f=h,h=$}if((v=Y[0].y)>(m=Y[1].y)){var re=v;v=m,m=re}Ut(x,f-A,v-A,h+A,m+A)}}else if("bezier"===V||"unbundled-bezier"===V||"segments"===V||"taxi"===V){var te;switch(V){case"bezier":case"unbundled-bezier":te=D.bezierPts;break;case"segments":case"taxi":te=D.linePts}if(null!=te)for(var de=0;de<te.length;de++){var oe=te[de];Ut(x,f=oe.x-A,v=oe.y-A,h=oe.x+A,m=oe.y+A)}}}else{var ye=d.source().position(),ke=d.target().position();if((f=ye.x)>(h=ke.x)){var Q=f;f=h,h=Q}if((v=ye.y)>(m=ke.y)){var le=v;v=m,m=le}Ut(x,f-=A,v-=A,h+=A,m+=A)}if(E&&p.includeEdges&&_&&(Ea(x,d,"mid-source"),Ea(x,d,"mid-target"),Ea(x,d,"source"),Ea(x,d,"target")),E&&"yes"===d.pstyle("ghost").value){var pe=d.pstyle("ghost-offset-x").pfValue,k=d.pstyle("ghost-offset-y").pfValue;Ut(x,x.x1+pe,x.y1+k,x.x2+pe,x.y2+k)}var B=S.bodyBounds=S.bodyBounds||{};$i(B,x),Xa(B,T),ea(B,1),E&&Ut(x,(f=x.x1)-q,(v=x.y1)-q,(h=x.x2)+q,(m=x.y2)+q);var R=S.overlayBounds=S.overlayBounds||{};$i(R,x),Xa(R,T),ea(R,1);var j=S.labelBounds=S.labelBounds||{};null!=j.all?((b=j.all).x1=1/0,b.y1=1/0,b.x2=-1/0,b.y2=-1/0,b.w=0,b.h=0):j.all=At(),E&&p.includeLabels&&(p.includeMainLabels&&Ti(x,d,null),_&&(p.includeSourceLabels&&Ti(x,d,"source"),p.includeTargetLabels&&Ti(x,d,"target")))}return x.x1=Ht(x.x1),x.y1=Ht(x.y1),x.x2=Ht(x.x2),x.y2=Ht(x.y2),x.w=Ht(x.x2-x.x1),x.h=Ht(x.y2-x.y1),x.w>0&&x.h>0&&I&&(Xa(x,T),ea(x,1)),x}(e,Rr),r.bbCache=n,r.bbCachePosKey=o):n=r.bbCache,!i){var c=e.isNode();n=At(),(t.includeNodes&&c||t.includeEdges&&!c)&&Yn(n,t.includeOverlays?r.overlayBounds:r.bodyBounds),t.includeLabels&&(t.includeMainLabels&&(!a||t.includeSourceLabels&&t.includeTargetLabels)?Yn(n,r.labelBounds.all):(t.includeMainLabels&&Yn(n,r.labelBounds.mainRot),t.includeSourceLabels&&Yn(n,r.labelBounds.sourceRot),t.includeTargetLabels&&Yn(n,r.labelBounds.targetRot))),n.w=n.x2-n.x1,n.h=n.y2-n.y1}return n},Rr={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,useCache:!0},gs=hs(Rr),vs=Ct(Rr);xn.boundingBox=function(e){var t;if(1!==this.length||null==this[0]._private.bbCache||this[0]._private.styleDirty||void 0!==e&&void 0!==e.useCache&&!0!==e.useCache){t=At();var n=vs(e=e||Rr);if(this.cy().styleEnabled())for(var r=0;r<this.length;r++){var a=this[r],i=a._private,o=ps(a);a.recalculateRenderedStyle(n.useCache&&i.bbCachePosKey===o&&!i.styleDirty)}this.updateCompoundBounds(!e.useCache);for(var u=0;u<this.length;u++)Yn(t,fs(this[u],n))}else e=void 0===e?Rr:vs(e),t=fs(this[0],e);return t.x1=Ht(t.x1),t.y1=Ht(t.y1),t.x2=Ht(t.x2),t.y2=Ht(t.y2),t.w=Ht(t.x2-t.x1),t.h=Ht(t.y2-t.y1),t},xn.dirtyBoundingBoxCache=function(){for(var e=0;e<this.length;e++){var t=this[e]._private;t.bbCache=null,t.bbCachePosKey=null,t.bodyBounds=null,t.overlayBounds=null,t.labelBounds.all=null,t.labelBounds.source=null,t.labelBounds.target=null,t.labelBounds.main=null,t.labelBounds.sourceRot=null,t.labelBounds.targetRot=null,t.labelBounds.mainRot=null,t.arrowBounds.source=null,t.arrowBounds.target=null,t.arrowBounds["mid-source"]=null,t.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},xn.boundingBoxAt=function(e){var t=this.nodes(),n=this.cy(),r=n.hasCompoundNodes(),a=n.collection();if(r&&(a=t.filter(function(l){return l.isParent()}),t=t.not(a)),ve(e)){var i=e;e=function(){return i}}n.startBatch(),t.forEach(function(l,s){return l._private.bbAtOldPos=e(l,s)}).silentPositions(e),r&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var l,o={x1:(l=this.boundingBox({useCache:!1})).x1,x2:l.x2,w:l.w,y1:l.y1,y2:l.y2,h:l.h};return t.silentPositions(function(l){return l._private.bbAtOldPos}),r&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),n.endBatch(),o},vr.boundingbox=vr.bb=vr.boundingBox,vr.renderedBoundingbox=vr.renderedBoundingBox;var Lr,Ar,Ac=xn;Lr=Ar={};var ys=function(e){e.uppercaseName=rn(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=rn(e.outerName),Lr[e.name]=function(){var t=this[0],n=t._private;if(t){if(!n.cy._private.styleEnabled)return 1;if(t.isParent())return t.updateCompoundBounds(),n[e.autoName]||0;var a=t.pstyle(e.name);return"label"===a.strValue?(t.recalculateRenderedStyle(),n.rstyle[e.labelName]||0):a.pfValue}},Lr["outer"+e.uppercaseName]=function(){var t=this[0];if(t)return t._private.cy._private.styleEnabled?t[e.name]()+t.pstyle("border-width").pfValue+2*t.padding():1},Lr["rendered"+e.uppercaseName]=function(){var t=this[0];if(t)return t[e.name]()*this.cy().zoom()},Lr["rendered"+e.uppercaseOuterName]=function(){var t=this[0];if(t)return t[e.outerName]()*this.cy().zoom()}};ys({name:"width"}),ys({name:"height"}),Ar.padding=function(){var e=this[0],t=e._private;return e.isParent()?(e.updateCompoundBounds(),void 0!==t.autoPadding?t.autoPadding:e.pstyle("padding").pfValue):e.pstyle("padding").pfValue},Ar.paddedHeight=function(){var e=this[0];return e.height()+2*e.padding()},Ar.paddedWidth=function(){var e=this[0];return e.width()+2*e.padding()};var Fc=Ar,ms={controlPoints:{get:function(e){return e.renderer().getControlPoints(e)},mult:!0},segmentPoints:{get:function(e){return e.renderer().getSegmentPoints(e)},mult:!0},sourceEndpoint:{get:function(e){return e.renderer().getSourceEndpoint(e)}},targetEndpoint:{get:function(e){return e.renderer().getTargetEndpoint(e)}},midpoint:{get:function(e){return e.renderer().getEdgeMidpoint(e)}}},jc=Object.keys(ms).reduce(function(e,t){var a,n=ms[t],r="rendered"+(a=t)[0].toUpperCase()+a.substr(1);return e[t]=function(){return function(a,i){if(a.isEdge())return i(a)}(this,n.get)},e[r]=n.mult?function(){return function(a,i){if(a.isEdge()){var o=a.cy(),l=o.pan(),s=o.zoom();return i(a).map(function(u){return Qr(u,s,l)})}}(this,n.get)}:function(){return function(a,i){if(a.isEdge()){var o=a.cy();return Qr(i(a),o.zoom(),o.pan())}}(this,n.get)},e},{}),Vc=me({},Lc,Ac,Fc,jc),bs=function(e,t){this.recycle(e,t)};function Fr(){return!1}function ka(){return!0}bs.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Fr,null!=e&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?ka:Fr):null!=e&&e.type?t=e:this.type=e,null!=t&&(this.originalEvent=t.originalEvent,this.type=null!=t.type?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var n=this.position,r=this.cy.zoom(),a=this.cy.pan();this.renderedPosition={x:n.x*r+a.x,y:n.y*r+a.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=ka;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=ka;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=ka,this.stopPropagation()},isDefaultPrevented:Fr,isPropagationStopped:Fr,isImmediatePropagationStopped:Fr};var xs=/^([^.]+)(\.(?:[^.]+))?$/,ws={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},Es=Object.keys(ws),qc={};function Ca(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qc,t=arguments.length>1?arguments[1]:void 0,n=0;n<Es.length;n++){var r=Es[n];this[r]=e[r]||ws[r]}this.context=t||this.context,this.listeners=[],this.emitting=0}var wn=Ca.prototype,ks=function(e,t,n,r,a,i,o){H(r)&&(a=r,r=null),o&&(i=null==i?o:me({},i,o));for(var l=ne(n)?n:n.split(/\s+/),s=0;s<l.length;s++){var u=l[s];if(!Ae(u)){var c=u.match(xs);if(c&&!1===t(e,u,c[1],c[2]?c[2]:null,r,a,i))break}}},Cs=function(e,t){return e.addEventFields(e.context,t),new bs(t.type,t)};wn.on=wn.addListener=function(e,t,n,r,a){return ks(this,function(i,o,l,s,u,c,d){H(c)&&i.listeners.push({event:o,callback:c,type:l,namespace:s,qualifier:u,conf:d})},e,t,n,r,a),this},wn.one=function(e,t,n,r){return this.on(e,t,n,r,{one:!0})},wn.removeListener=wn.off=function(e,t,n,r){var a=this;0!==this.emitting&&(this.listeners=this.listeners.slice());for(var i=this.listeners,o=function(s){var u=i[s];ks(a,function(c,d,p,f,h,v){if((u.type===p||"*"===e)&&(!f&&".*"!==u.namespace||u.namespace===f)&&(!h||c.qualifierCompare(u.qualifier,h))&&(!v||u.callback===v))return i.splice(s,1),!1},e,t,n,r)},l=i.length-1;l>=0;l--)o(l);return this},wn.removeAllListeners=function(){return this.removeListener("*")},wn.emit=wn.trigger=function(e,t,n){var r=this.listeners,a=r.length;return this.emitting++,ne(t)||(t=[t]),function(e,t,n){if("event"!==be(n))if(ve(n))t(e,Cs(e,n));else for(var r=ne(n)?n:n.split(/\s+/),a=0;a<r.length;a++){var i=r[a];if(!Ae(i)){var o=i.match(xs);o&&t(e,Cs(e,{type:o[1],namespace:o[2]?o[2]:null,target:e.context}))}}else t(e,n)}(this,function(i,o){null!=n&&(a=(r=[{event:o.event,type:o.type,namespace:o.namespace,callback:n}]).length);for(var l=function(u){var c=r[u];if(c.type===o.type&&(!c.namespace||c.namespace===o.namespace||".*"===c.namespace)&&i.eventMatches(i.context,c,o)){var d=[o];null!=t&&function(h,v){for(var m=0;m<v.length;m++)h.push(v[m])}(d,t),i.beforeEmit(i.context,c,o),c.conf&&c.conf.one&&(i.listeners=i.listeners.filter(function(h){return h!==c}));var p=i.callbackContext(i.context,c,o),f=c.callback.apply(p,d);i.afterEmit(i.context,c,o),!1===f&&(o.stopPropagation(),o.preventDefault())}},s=0;s<a;s++)l(s);i.bubble(i.context)&&!o.isPropagationStopped()&&i.parent(i.context).emit(o,t)},e),this.emitting--,this};var Yc={qualifierCompare:function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)},eventMatches:function(e,t,n){var r=t.qualifier;return null==r||e!==n.target&&at(n.target)&&r.matches(n.target)},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,n){return null!=t.qualifier?n.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},Sa=function(e){return ie(e)?new yn(e):e},Ss={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new Ca(Yc,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,n){for(var r=Sa(t),a=0;a<this.length;a++)this[a].emitter().on(e,r,n);return this},removeListener:function(e,t,n){for(var r=Sa(t),a=0;a<this.length;a++)this[a].emitter().removeListener(e,r,n);return this},removeAllListeners:function(){for(var e=0;e<this.length;e++)this[e].emitter().removeAllListeners();return this},one:function(e,t,n){for(var r=Sa(t),a=0;a<this.length;a++)this[a].emitter().one(e,r,n);return this},once:function(e,t,n){for(var r=Sa(t),a=0;a<this.length;a++)this[a].emitter().on(e,r,n,{once:!0,onceCollection:this})},emit:function(e,t){for(var n=0;n<this.length;n++)this[n].emitter().emit(e,t);return this},emitAndNotify:function(e,t){if(0!==this.length)return this.cy().notify(e,this),this.emit(e,t),this}};Ke.eventAliasesOn(Ss);var Ps={nodes:function(e){return this.filter(function(t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(t){return t.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),n=0;n<this.length;n++){var r=this[n];r.isNode()?e.push(r):t.push(r)}return{nodes:e,edges:t}},filter:function(e,t){if(void 0===e)return this;if(ie(e)||Oe(e))return new yn(e).filter(this);if(H(e)){for(var n=this.spawn(),r=0;r<this.length;r++){var a=this[r];(t?e.apply(t,[a,r,this]):e(a,r,this))&&n.push(a)}return n}return this.spawn()},not:function(e){if(e){ie(e)&&(e=this.filter(e));for(var t=this.spawn(),n=0;n<this.length;n++){var r=this[n];e.has(r)||t.push(r)}return t}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(e){if(ie(e))return this.filter(e);for(var n=this.spawn(),a=this.length<e.length,i=a?this:e,o=a?e:this,l=0;l<i.length;l++){var s=i[l];o.has(s)&&n.push(s)}return n},xor:function(e){var t=this._private.cy;ie(e)&&(e=t.$(e));var n=this.spawn(),r=e,a=function(i,o){for(var l=0;l<i.length;l++){var s=i[l];o.hasElementWithId(s._private.data.id)||n.push(s)}};return a(this,r),a(r,this),n},diff:function(e){var t=this._private.cy;ie(e)&&(e=t.$(e));var n=this.spawn(),r=this.spawn(),a=this.spawn(),i=e,o=function(l,s,u){for(var c=0;c<l.length;c++){var d=l[c];s.hasElementWithId(d._private.data.id)?a.merge(d):u.push(d)}};return o(this,i,n),o(i,this,r),{left:n,right:r,both:a}},add:function(e){var t=this._private.cy;if(!e)return this;if(ie(e)){var n=e;e=t.mutableElements().filter(n)}for(var r=this.spawnSelf(),a=0;a<e.length;a++){var i=e[a];!this.has(i)&&r.push(i)}return r},merge:function(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&ie(e)){var r=e;e=n.mutableElements().filter(r)}for(var a=t.map,i=0;i<e.length;i++){var o=e[i],l=o._private.data.id;if(!a.has(l)){var s=this.length++;this[s]=o,a.set(l,{ele:o,index:s})}}return this},unmergeAt:function(e){var t=this[e].id(),n=this._private.map;if(this[e]=void 0,n.delete(t),this.length>1&&e!==this.length-1){var a=this.length-1,i=this[a],o=i._private.data.id;this[a]=void 0,this[e]=i,n.set(o,{ele:i,index:e})}return this.length--,this},unmergeOne:function(e){var r=this._private.map.get((e=e[0])._private.data.id);return r?(this.unmergeAt(r.index),this):this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&ie(e)){var n=e;e=t.mutableElements().filter(n)}for(var r=0;r<e.length;r++)this.unmergeOne(e[r]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--)e(this[t])&&this.unmergeAt(t);return this},map:function(e,t){for(var n=[],r=0;r<this.length;r++){var a=this[r],i=t?e.apply(t,[a,r,this]):e(a,r,this);n.push(i)}return n},reduce:function(e,t){for(var n=t,r=0;r<this.length;r++)n=e(n,this[r],r,this);return n},max:function(e,t){for(var n,r=-1/0,a=0;a<this.length;a++){var i=this[a],o=t?e.apply(t,[i,a,this]):e(i,a,this);o>r&&(r=o,n=i)}return{value:r,ele:n}},min:function(e,t){for(var n,r=1/0,a=0;a<this.length;a++){var i=this[a],o=t?e.apply(t,[i,a,this]):e(i,a,this);o<r&&(r=o,n=i)}return{value:r,ele:n}}},Ye=Ps;Ye.u=Ye["|"]=Ye["+"]=Ye.union=Ye.or=Ye.add,Ye["\\"]=Ye["!"]=Ye["-"]=Ye.difference=Ye.relativeComplement=Ye.subtract=Ye.not,Ye.n=Ye["&"]=Ye["."]=Ye.and=Ye.intersection=Ye.intersect,Ye["^"]=Ye["(+)"]=Ye["(-)"]=Ye.symmetricDifference=Ye.symdiff=Ye.xor,Ye.fnFilter=Ye.filterFn=Ye.stdFilter=Ye.filter,Ye.complement=Ye.abscomp=Ye.absoluteComplement;var _s=function(e,t){var n=e.cy().hasCompoundNodes();function r(s){var u=s.pstyle("z-compound-depth");return"auto"===u.value?n?s.zDepth():0:"bottom"===u.value?-1:"top"===u.value?zn:0}var a=r(e)-r(t);if(0!==a)return a;function i(s){return"auto"===s.pstyle("z-index-compare").value&&s.isNode()?1:0}var o=i(e)-i(t);if(0!==o)return o;var l=e.pstyle("z-index").value-t.pstyle("z-index").value;return 0!==l?l:e.poolIndex()-t.poolIndex()},Pa={forEach:function(e,t){if(H(e))for(var n=this.length,r=0;r<n;r++){var a=this[r];if(!1===(t?e.apply(t,[a,r,this]):e(a,r,this)))break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var n=[],r=this.length;null==t&&(t=r),null==e&&(e=0),e<0&&(e=r+e),t<0&&(t=r+t);for(var a=e;a>=0&&a<t&&a<r;a++)n.push(this[a]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(e){if(!H(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(_s)},zDepth:function(){var e=this[0];if(e){var t=e._private;if("nodes"===t.group){var n=t.data.parent?e.parents().size():0;return e.isParent()?n:zn-1}var a=t.target,i=t.source.zDepth(),o=a.zDepth();return Math.max(i,o,0)}}};Pa.each=Pa.forEach,"undefined"!=("undefined"==typeof Symbol?"undefined":Pe(Symbol))&&"undefined"!=Pe(Symbol.iterator)&&(Pa[Symbol.iterator]=function(){var e=this,t={value:void 0,done:!1},n=0,r=this.length;return W({next:function(){return n<r?t.value=e[n++]:(t.value=void 0,t.done=!0),t}},Symbol.iterator,function(){return this})});var Hc=Ct({nodeDimensionsIncludeLabels:!1}),_a={layoutDimensions:function(e){var t;if(e=Hc(e),this.takesUpSpace())if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();t={w:n.w,h:n.h}}else t={w:this.outerWidth(),h:this.outerHeight()};else t={w:0,h:0};return 0!==t.w&&0!==t.h||(t.w=t.h=1),t},layoutPositions:function(e,t,n){var r=this.nodes().filter(function(g){return!g.isParent()}),a=this.cy(),i=t.eles,o=function(g){return g.id()},l=Ze(n,o);e.emit({type:"layoutstart",layout:e}),e.animations=[];var s=t.spacingFactor&&1!==t.spacingFactor,u=function(){if(!s)return null;for(var g=At(),y=0;y<r.length;y++){var C=l(r[y],y);Gl(g,C.x,C.y)}return g}(),c=Ze(function(g,y){var C,E,w,x,S,b=l(g,y);return s&&(C=Math.abs(t.spacingFactor),b={x:(x=(E=u).x1+E.w/2)+((w=b).x-x)*C,y:(S=E.y1+E.h/2)+(w.y-S)*C}),null!=t.transform&&(b=t.transform(g,b)),b},o);if(t.animate){for(var d=0;d<r.length;d++){var p=r[d],f=c(p,d);if(null==t.animateFilter||t.animateFilter(p,d)){var h=p.animation({position:f,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(h)}else p.position(f)}if(t.fit){var v=a.animation({fit:{boundingBox:i.boundingBoxAt(c),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(v)}else if(void 0!==t.zoom&&void 0!==t.pan){var m=a.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(m)}e.animations.forEach(function(g){return g.play()}),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),lr.all(e.animations.map(function(g){return g.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else r.positions(c),t.fit&&a.fit(t.eles,t.padding),null!=t.zoom&&a.zoom(t.zoom),t.pan&&a.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){return this.cy().makeLayout(me({},e,{eles:this}))}};function Ms(e,t,n){var r,a=n._private,i=a.styleCache=a.styleCache||[];return null!=(r=i[e])?r:r=i[e]=t(n)}function Ma(e,t){return e=Xe(e),function(n){return Ms(e,t,n)}}function Da(e,t){e=Xe(e);var n=function(r){return t.call(r)};return function(){var r=this[0];if(r)return Ms(e,n,r)}}_a.createLayout=_a.makeLayout=_a.layout;var St={recalculateRenderedStyle:function(e){var t=this.cy(),n=t.renderer(),r=t.styleEnabled();return n&&r&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e,t=this.cy(),n=function(r){return r._private.styleCache=null};return t.hasCompoundNodes()?((e=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(e.connectedEdges()),e.forEach(n)):this.forEach(function(r){n(r),r.connectedEdges().forEach(n)}),this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching())return t._private.batchStyleEles.merge(this),this;var n=this;e=!(!e&&void 0!==e),t.hasCompoundNodes()&&(n=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var r=n;return e?r.emitAndNotify("style"):r.emit("style"),n.forEach(function(a){return a._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var t=0;t<this.length;t++){var n=this[t];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this[0],r=n.cy();if(r.styleEnabled()&&n){this.cleanStyle();var a=n._private.style[e];return null!=a?a:t?r.style().getDefaultProperty(e):null}},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var n=t.pstyle(e);return void 0!==n.pfValue?n.pfValue:n.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled())return t?t.pstyle(e).units:void 0},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];return n?t.style().getRenderedStyle(n,e):void 0},style:function(e,t){var n=this.cy();if(!n.styleEnabled())return this;var r=n.style();if(ve(e))r.applyBypass(this,e,!1),this.emitAndNotify("style");else if(ie(e)){if(void 0===t){var i=this[0];return i?r.getStylePropertyValue(i,e):void 0}r.applyBypass(this,e,t,!1),this.emitAndNotify("style")}else if(void 0===e){var o=this[0];return o?r.getRawStyle(o):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=t.style();if(void 0===e)for(var r=0;r<this.length;r++)n.removeAllBypasses(this[r],!1);else{e=e.split(/\s+/);for(var i=0;i<this.length;i++)n.removeBypasses(this[i],e,!1)}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var r=n._private,a=n.pstyle("opacity").value;if(!t)return a;var i=r.data.parent?n.parents():null;if(i)for(var o=0;o<i.length;o++)a*=i[o].pstyle("opacity").value;return a}},transparent:function(){if(!this.cy().styleEnabled())return!1;var e=this[0],t=e.cy().hasCompoundNodes();return e?t?0===e.effectiveOpacity():0===e.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function zi(e,t){var n=e._private.data.parent?e.parents():null;if(n)for(var r=0;r<n.length;r++)if(!t(n[r]))return!1;return!0}function Bi(e){var t=e.ok,n=e.edgeOkViaNode||e.ok,r=e.parentOk||e.ok;return function(){var a=this.cy();if(!a.styleEnabled())return!0;var i=this[0],o=a.hasCompoundNodes();if(i){var l=i._private;if(!t(i))return!1;if(i.isNode())return!o||zi(i,r);var s=l.source,u=l.target;return n(s)&&(!o||zi(s,n))&&(s===u||n(u)&&(!o||zi(u,n)))}}}var yr=Ma("eleTakesUpSpace",function(e){return"element"===e.pstyle("display").value&&0!==e.width()&&(!e.isNode()||0!==e.height())});St.takesUpSpace=Da("takesUpSpace",Bi({ok:yr}));var Wc=Ma("eleInteractive",function(e){return"yes"===e.pstyle("events").value&&"visible"===e.pstyle("visibility").value&&yr(e)}),Kc=Ma("parentInteractive",function(e){return"visible"===e.pstyle("visibility").value&&yr(e)});St.interactive=Da("interactive",Bi({ok:Wc,parentOk:Kc,edgeOkViaNode:yr})),St.noninteractive=function(){var e=this[0];if(e)return!e.interactive()};var Gc=Ma("eleVisible",function(e){return"visible"===e.pstyle("visibility").value&&0!==e.pstyle("opacity").pfValue&&yr(e)});St.visible=Da("visible",Bi({ok:Gc,edgeOkViaNode:yr})),St.hidden=function(){var e=this[0];if(e)return!e.visible()},St.isBundledBezier=Da("isBundledBezier",function(){return!!this.cy().styleEnabled()&&!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace()}),St.bypass=St.css=St.style,St.renderedCss=St.renderedStyle,St.removeBypass=St.removeCss=St.removeStyle,St.pstyle=St.parsedStyle;var En={};function Ds(e){return function(){var t=arguments,n=[];if(2===t.length){var r=t[0],a=t[1];this.on(e.event,r,a)}else if(1===t.length&&H(t[0])){var i=t[0];this.on(e.event,i)}else if(0===t.length||1===t.length&&ne(t[0])){for(var o=1===t.length?t[0]:null,l=0;l<this.length;l++){var s=this[l],u=!e.ableField||s._private[e.ableField],c=s._private[e.field]!=e.value;if(e.overrideAble){var d=e.overrideAble(s);if(void 0!==d&&(u=d,!d))return this}u&&(s._private[e.field]=e.value,c&&n.push(s))}var p=this.spawn(n);p.updateStyle(),p.emit(e.event),o&&p.emit(o)}return this}}function mr(e){En[e.field]=function(){var t=this[0];if(t){if(e.overrideField){var n=e.overrideField(t);if(void 0!==n)return n}return t._private[e.field]}},En[e.on]=Ds({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!0}),En[e.off]=Ds({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!1})}mr({field:"locked",overrideField:function(e){return!!e.cy().autolock()||void 0},on:"lock",off:"unlock"}),mr({field:"grabbable",overrideField:function(e){return!e.cy().autoungrabify()&&!e.pannable()&&void 0},on:"grabify",off:"ungrabify"}),mr({field:"selected",ableField:"selectable",overrideAble:function(e){return!e.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),mr({field:"selectable",overrideField:function(e){return!e.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),En.deselect=En.unselect,En.grabbed=function(){var e=this[0];if(e)return e._private.grabbed},mr({field:"active",on:"activate",off:"unactivate"}),mr({field:"pannable",on:"panify",off:"unpanify"}),En.inactive=function(){var e=this[0];if(e)return!e._private.active};var Tt={},Ts=function(e){return function(t){for(var n=[],r=0;r<this.length;r++){var a=this[r];if(a.isNode()){for(var i=!1,o=a.connectedEdges(),l=0;l<o.length;l++){var s=o[l],u=s.source(),c=s.target();if(e.noIncomingEdges&&c===a&&u!==a||e.noOutgoingEdges&&u===a&&c!==a){i=!0;break}}i||n.push(a)}}return this.spawn(n,!0).filter(t)}},zs=function(e){return function(t){for(var n=[],r=0;r<this.length;r++){var a=this[r];if(a.isNode())for(var i=a.connectedEdges(),o=0;o<i.length;o++){var l=i[o],s=l.source(),u=l.target();e.outgoing&&s===a?(n.push(l),n.push(u)):e.incoming&&u===a&&(n.push(l),n.push(s))}}return this.spawn(n,!0).filter(t)}},Bs=function(e){return function(t){for(var n=this,r=[],a={};;){var i=e.outgoing?n.outgoers():n.incomers();if(0===i.length)break;for(var o=!1,l=0;l<i.length;l++){var s=i[l],u=s.id();a[u]||(a[u]=!0,r.push(s),o=!0)}if(!o)break;n=i}return this.spawn(r,!0).filter(t)}};function Ns(e){return function(t){for(var n=[],r=0;r<this.length;r++){var a=this[r]._private[e.attr];a&&n.push(a)}return this.spawn(n,!0).filter(t)}}function Os(e){return function(t){var n=[],r=this._private.cy,a=e||{};ie(t)&&(t=r.$(t));for(var i=0;i<t.length;i++)for(var o=t[i]._private.edges,l=0;l<o.length;l++){var s=o[l],u=s._private.data,c=this.hasElementWithId(u.source)&&t.hasElementWithId(u.target),d=t.hasElementWithId(u.source)&&this.hasElementWithId(u.target);if(c||d){if((a.thisIsSrc||a.thisIsTgt)&&(a.thisIsSrc&&!c||a.thisIsTgt&&!d))continue;n.push(s)}}return this.spawn(n,!0)}}function Is(e){return e=me({},{codirected:!1},e),function(t){for(var n=[],r=this.edges(),a=e,i=0;i<r.length;i++)for(var o=r[i]._private,l=o.source,s=l._private.data.id,u=o.data.target,c=l._private.edges,d=0;d<c.length;d++){var p=c[d],f=p._private.data,h=f.target,v=f.source,m=h===u&&v===s;(a.codirected&&m||!a.codirected&&(m||s===h&&u===v))&&n.push(p)}return this.spawn(n,!0).filter(t)}}Tt.clearTraversalCache=function(){for(var e=0;e<this.length;e++)this[e]._private.traversalCache=null},me(Tt,{roots:Ts({noIncomingEdges:!0}),leaves:Ts({noOutgoingEdges:!0}),outgoers:Yt(zs({outgoing:!0}),"outgoers"),successors:Bs({outgoing:!0}),incomers:Yt(zs({incoming:!0}),"incomers"),predecessors:Bs({incoming:!0})}),me(Tt,{neighborhood:Yt(function(e){for(var t=[],n=this.nodes(),r=0;r<n.length;r++)for(var a=n[r],i=a.connectedEdges(),o=0;o<i.length;o++){var l=i[o],s=l.source(),u=l.target(),c=a===s?u:s;c.length>0&&t.push(c[0]),t.push(l[0])}return this.spawn(t,!0).filter(e)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}}),Tt.neighbourhood=Tt.neighborhood,Tt.closedNeighbourhood=Tt.closedNeighborhood,Tt.openNeighbourhood=Tt.openNeighborhood,me(Tt,{source:Yt(function(e){var t,n=this[0];return n&&(t=n._private.source||n.cy().collection()),t&&e?t.filter(e):t},"source"),target:Yt(function(e){var t,n=this[0];return n&&(t=n._private.target||n.cy().collection()),t&&e?t.filter(e):t},"target"),sources:Ns({attr:"source"}),targets:Ns({attr:"target"})}),me(Tt,{edgesWith:Yt(Os(),"edgesWith"),edgesTo:Yt(Os({thisIsSrc:!0}),"edgesTo")}),me(Tt,{connectedEdges:Yt(function(e){for(var t=[],n=0;n<this.length;n++){var r=this[n];if(r.isNode())for(var a=r._private.edges,i=0;i<a.length;i++)t.push(a[i])}return this.spawn(t,!0).filter(e)},"connectedEdges"),connectedNodes:Yt(function(e){for(var t=[],n=0;n<this.length;n++){var r=this[n];r.isEdge()&&(t.push(r.source()[0]),t.push(r.target()[0]))}return this.spawn(t,!0).filter(e)},"connectedNodes"),parallelEdges:Yt(Is(),"parallelEdges"),codirectedEdges:Yt(Is({codirected:!0}),"codirectedEdges")}),me(Tt,{components:function(e){var t=this,n=t.cy(),r=n.collection(),a=null==e?t.nodes():e.nodes(),i=[];null!=e&&a.empty()&&(a=e.sources());var o=function(s,u){r.merge(s),a.unmerge(s),u.merge(s)};if(a.empty())return t.spawn();var l=function(){var s=n.collection();i.push(s);var u=a[0];o(u,s),t.bfs({directed:!1,roots:u,visit:function(c){return o(c,s)}}),s.forEach(function(c){c.connectedEdges().forEach(function(d){t.has(d)&&s.has(d.source())&&s.has(d.target())&&s.merge(d)})})};do{l()}while(a.length>0);return i},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}}),Tt.componentsOf=Tt.components;var Pt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0!==e){var r=new en,a=!1;if(t){if(t.length>0&&ve(t[0])&&!at(t[0])){a=!0;for(var i=[],o=new tr,l=0,s=t.length;l<s;l++){var u=t[l];null==u.data&&(u.data={});var c=u.data;if(null==c.id)c.id=Wi();else if(e.hasElementWithId(c.id)||o.has(c.id))continue;var d=new $r(e,u,!1);i.push(d),o.add(c.id)}t=i}}else t=[];this.length=0;for(var p=0,f=t.length;p<f;p++){var h=t[p][0];if(null!=h){var v=h._private.data.id;n&&r.has(v)||(n&&r.set(v,{index:this.length,ele:h}),this[this.length]=h,this.length++)}}this._private={eles:this,cy:e,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(m){this.lazyMap=m},rebuildMap:function(){for(var m=this.lazyMap=new en,g=this.eles,y=0;y<g.length;y++){var b=g[y];m.set(b.id(),{index:y,ele:b})}}},n&&(this._private.map=r),a&&this.restore()}else ot("A collection must have a reference to the core")},tt=$r.prototype=Pt.prototype=Object.create(Array.prototype);tt.instanceString=function(){return"collection"},tt.spawn=function(e,t){return new Pt(this.cy(),e,t)},tt.spawnSelf=function(){return this.spawn(this)},tt.cy=function(){return this._private.cy},tt.renderer=function(){return this._private.cy.renderer()},tt.element=function(){return this[0]},tt.collection=function(){return ft(this)?this:new Pt(this._private.cy,[this])},tt.unique=function(){return new Pt(this._private.cy,this,!0)},tt.hasElementWithId=function(e){return this._private.map.has(e=""+e)},tt.getElementById=function(e){var t=this._private.cy,n=this._private.map.get(e=""+e);return n?n.ele:new Pt(t)},tt.$id=tt.getElementById,tt.poolIndex=function(){return this._private.cy._private.elements._private.map.get(this[0]._private.data.id).index},tt.indexOf=function(e){return this._private.map.get(e[0]._private.data.id).index},tt.indexOfId=function(e){return this._private.map.get(e=""+e).index},tt.json=function(e){var t=this.element(),n=this.cy();if(null==t&&e)return this;if(null!=t){var r=t._private;if(ve(e)){if(n.startBatch(),e.data){t.data(e.data);var a=r.data;if(t.isEdge()){var i=!1,o={},l=e.data.source,s=e.data.target;null!=l&&l!=a.source&&(o.source=""+l,i=!0),null!=s&&s!=a.target&&(o.target=""+s,i=!0),i&&(t=t.move(o))}else{var c=e.data.parent;!("parent"in e.data)||null==c&&null==a.parent||c==a.parent||(void 0===c&&(c=null),null!=c&&(c=""+c),t=t.move({parent:c}))}}e.position&&t.position(e.position);var d=function(h,v,m){var g=e[h];null!=g&&g!==r[h]&&(g?t[v]():t[m]())};return d("removed","remove","restore"),d("selected","select","unselect"),d("selectable","selectify","unselectify"),d("locked","lock","unlock"),d("grabbable","grabify","ungrabify"),d("pannable","panify","unpanify"),null!=e.classes&&t.classes(e.classes),n.endBatch(),this}if(void 0===e){var p={data:Jt(r.data),position:Jt(r.position),group:r.group,removed:r.removed,selected:r.selected,selectable:r.selectable,locked:r.locked,grabbable:r.grabbable,pannable:r.pannable,classes:""},f=0;return r.classes.forEach(function(h){return p.classes+=0==f++?h:" "+h}),p}}},tt.jsons=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t].json();e.push(n)}return e},tt.clone=function(){for(var e=this.cy(),t=[],n=0;n<this.length;n++){var r=this[n].json(),a=new $r(e,r,!1);t.push(a)}return new Pt(e,t)},tt.copy=tt.clone,tt.restore=function(){for(var e,t,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this,i=a.cy(),o=i._private,l=[],s=[],u=0,c=a.length;u<c;u++){var d=a[u];r&&!d.removed()||(d.isNode()?l.push(d):s.push(d))}e=l.concat(s);var p=function(){e.splice(t,1),t--};for(t=0;t<e.length;t++){var f=e[t],h=f._private,v=h.data;if(f.clearTraversalCache(),r||h.removed)if(void 0===v.id)v.id=Wi();else if(Z(v.id))v.id=""+v.id;else{if(Ae(v.id)||!ie(v.id)){ot("Can not create element with invalid string ID `"+v.id+"`"),p();continue}if(i.hasElementWithId(v.id)){ot("Can not create second element with ID `"+v.id+"`"),p();continue}}var m=v.id;if(f.isNode()){var g=h.position;null==g.x&&(g.x=0),null==g.y&&(g.y=0)}if(f.isEdge()){for(var y=f,b=["source","target"],C=b.length,E=!1,w=0;w<C;w++){var x=b[w],S=v[x];Z(S)&&(S=v[x]=""+v[x]),null==S||""===S?(ot("Can not create edge `"+m+"` with unspecified "+x),E=!0):i.hasElementWithId(S)||(ot("Can not create edge `"+m+"` with nonexistant "+x+" `"+S+"`"),E=!0)}if(E){p();continue}var P=i.getElementById(v.source),_=i.getElementById(v.target);P.same(_)?P._private.edges.push(y):(P._private.edges.push(y),_._private.edges.push(y)),y._private.source=P,y._private.target=_}h.map=new en,h.map.set(m,{ele:f,index:0}),h.removed=!1,r&&i.addToPool(f)}for(var D=0;D<l.length;D++){var T=l[D],z=T._private.data;Z(z.parent)&&(z.parent=""+z.parent);var I=z.parent,N=null!=I;if(N){var M=i.getElementById(I);if(M.empty())z.parent=void 0;else{for(var q=!1,A=M;!A.empty();){if(T.same(A)){q=!0,z.parent=void 0;break}A=A.parent()}q||(M[0]._private.children.push(T),T._private.parent=M[0],o.hasCompoundNodes=!0)}}}if(e.length>0){for(var L=e.length===a.length?a:new Pt(i,e),X=0;X<L.length;X++){var F=L[X];F.isNode()||(F.parallelEdges().clearTraversalCache(),F.source().clearTraversalCache(),F.target().clearTraversalCache())}(o.hasCompoundNodes?i.collection().merge(L).merge(L.connectedNodes()).merge(L.parent()):L).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(n),n?L.emitAndNotify("add"):r&&L.emit("add")}return a},tt.removed=function(){var e=this[0];return e&&e._private.removed},tt.inside=function(){var e=this[0];return e&&!e._private.removed},tt.remove=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,r=[],a={},i=n._private.cy;function o(I){for(var N=I._private.edges,M=0;M<N.length;M++)s(N[M])}function l(I){for(var N=I._private.children,M=0;M<N.length;M++)s(N[M])}function s(I){var N=a[I.id()];t&&I.removed()||N||(a[I.id()]=!0,I.isNode()?(r.push(I),o(I),l(I)):r.unshift(I))}for(var u=0,c=n.length;u<c;u++){var d=n[u];s(d)}function p(I,N){pn(I._private.edges,N),I.clearTraversalCache()}function f(I){I.clearTraversalCache()}var h=[];function v(I,N){N=N[0];var M=(I=I[0])._private.children,q=I.id();pn(M,N),N._private.parent=null,h.ids[q]||(h.ids[q]=!0,h.push(I))}h.ids={},n.dirtyCompoundBoundsCache(),t&&i.removeFromPool(r);for(var m=0;m<r.length;m++){var g=r[m];if(g.isEdge()){var y=g.source()[0],b=g.target()[0];p(y,g),p(b,g);for(var C=g.parallelEdges(),E=0;E<C.length;E++){var w=C[E];f(w),w.isBundledBezier()&&w.dirtyBoundingBoxCache()}}else{var x=g.parent();0!==x.length&&v(x,g)}t&&(g._private.removed=!0)}var S=i._private.elements;i._private.hasCompoundNodes=!1;for(var P=0;P<S.length;P++){var _=S[P];if(_.isParent()){i._private.hasCompoundNodes=!0;break}}var D=new Pt(this.cy(),r);D.size()>0&&(e?D.emitAndNotify("remove"):t&&D.emit("remove"));for(var T=0;T<h.length;T++){var z=h[T];t&&z.removed()||z.updateStyle()}return D},tt.move=function(e){var t=this._private.cy,n=this,r=function(c){return null==c?c:""+c};if(void 0!==e.source||void 0!==e.target){var a=r(e.source),i=r(e.target),o=null!=a&&t.hasElementWithId(a),l=null!=i&&t.hasElementWithId(i);(o||l)&&(t.batch(function(){n.remove(!1,!1),n.emitAndNotify("moveout");for(var c=0;c<n.length;c++){var d=n[c],p=d._private.data;d.isEdge()&&(o&&(p.source=a),l&&(p.target=i))}n.restore(!1,!1)}),n.emitAndNotify("move"))}else if(void 0!==e.parent){var s=r(e.parent);if(null===s||t.hasElementWithId(s)){var u=null===s?void 0:s;t.batch(function(){var c=n.remove(!1,!1);c.emitAndNotify("moveout");for(var d=0;d<n.length;d++){var p=n[d],f=p._private.data;p.isNode()&&(f.parent=u)}c.restore(!1,!1)}),n.emitAndNotify("move")}}return this},[xo,Tc,ga,bn,fr,Rc,wa,Vc,Ss,Ps,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},Pa,_a,St,En,Tt].forEach(function(e){me(tt,e)});var Uc={add:function(e){var t,n=this;if(Oe(e)){var r=e;if(r._private.cy===n)t=r.restore();else{for(var a=[],i=0;i<r.length;i++)a.push(r[i].json());t=new Pt(n,a)}}else if(ne(e))t=new Pt(n,e);else if(ve(e)&&(ne(e.nodes)||ne(e.edges))){for(var l=e,s=[],u=["nodes","edges"],c=0,d=u.length;c<d;c++){var p=u[c],f=l[p];if(ne(f))for(var h=0,v=f.length;h<v;h++){var m=me({group:p},f[h]);s.push(m)}}t=new Pt(n,s)}else t=new $r(n,e).collection();return t},remove:function(e){return Oe(e)||ie(e)&&(e=this.$(e)),e.remove()}},$c=function(){function e(r){return-r.tension*r.x-r.friction*r.v}function t(r,a,i){var o={x:r.x+i.dx*a,v:r.v+i.dv*a,tension:r.tension,friction:r.friction};return{dx:o.v,dv:e(o)}}function n(r,a){var i={dx:r.v,dv:e(r)},o=t(r,.5*a,i),l=t(r,.5*a,o),s=t(r,a,l),c=1/6*(i.dv+2*(o.dv+l.dv)+s.dv);return r.x=r.x+1/6*(i.dx+2*(o.dx+l.dx)+s.dx)*a,r.v=r.v+c*a,r}return function r(a,i,o){var l,s,u,c={x:-1,v:0,tension:null,friction:null},d=[0],p=0;for(a=parseFloat(a)||500,i=parseFloat(i)||20,o=o||null,c.tension=a,c.friction=i,s=(l=null!==o)?(p=r(a,i))/o*.016:.016;u=n(u||c,s),d.push(1+u.x),p+=16,Math.abs(u.x)>1e-4&&Math.abs(u.v)>1e-4;);return l?function(f){return d[f*(d.length-1)|0]}:p}}(),nt=function(e,t,n,r){var a=function(i,o,l,s){var u=4,c=.001,d=1e-7,p=10,f=11,h=1/(f-1),v="undefined"!=typeof Float32Array;if(4!==arguments.length)return!1;for(var m=0;m<4;++m)if("number"!=typeof arguments[m]||isNaN(arguments[m])||!isFinite(arguments[m]))return!1;i=Math.min(i,1),l=Math.min(l,1),i=Math.max(i,0),l=Math.max(l,0);var g=v?new Float32Array(f):new Array(f);function y(N,M){return 1-3*M+3*N}function b(N,M){return 3*M-6*N}function C(N){return 3*N}function E(N,M,q){return((y(M,q)*N+b(M,q))*N+C(M))*N}function w(N,M,q){return 3*y(M,q)*N*N+2*b(M,q)*N+C(M)}function x(N,M){for(var q=0;q<u;++q){var A=w(M,i,l);if(0===A)return M;M-=(E(M,i,l)-N)/A}return M}function S(){for(var N=0;N<f;++N)g[N]=E(N*h,i,l)}function P(N,M,q){var A,L,X=0;do{(A=E(L=M+(q-M)/2,i,l)-N)>0?q=L:M=L}while(Math.abs(A)>d&&++X<p);return L}function _(N){for(var M=0,q=1,A=f-1;q!==A&&g[q]<=N;++q)M+=h;--q;var L=M+(N-g[q])/(g[q+1]-g[q])*h,X=w(L,i,l);return X>=c?x(N,L):0===X?L:P(N,M,M+h)}var D=!1;function T(){D=!0,i===o&&l===s||S()}var z=function(N){return D||T(),i===o&&l===s?N:0===N?0:1===N?1:E(_(N),o,s)};z.getControlPoints=function(){return[{x:i,y:o},{x:l,y:s}]};var I="generateBezier("+[i,o,l,s]+")";return z.toString=function(){return I},z}(e,t,n,r);return function(i,o,l){return i+(o-i)*a(l)}},Ta={linear:function(e,t,n){return e+(t-e)*n},ease:nt(.25,.1,.25,1),"ease-in":nt(.42,0,1,1),"ease-out":nt(0,0,.58,1),"ease-in-out":nt(.42,0,.58,1),"ease-in-sine":nt(.47,0,.745,.715),"ease-out-sine":nt(.39,.575,.565,1),"ease-in-out-sine":nt(.445,.05,.55,.95),"ease-in-quad":nt(.55,.085,.68,.53),"ease-out-quad":nt(.25,.46,.45,.94),"ease-in-out-quad":nt(.455,.03,.515,.955),"ease-in-cubic":nt(.55,.055,.675,.19),"ease-out-cubic":nt(.215,.61,.355,1),"ease-in-out-cubic":nt(.645,.045,.355,1),"ease-in-quart":nt(.895,.03,.685,.22),"ease-out-quart":nt(.165,.84,.44,1),"ease-in-out-quart":nt(.77,0,.175,1),"ease-in-quint":nt(.755,.05,.855,.06),"ease-out-quint":nt(.23,1,.32,1),"ease-in-out-quint":nt(.86,0,.07,1),"ease-in-expo":nt(.95,.05,.795,.035),"ease-out-expo":nt(.19,1,.22,1),"ease-in-out-expo":nt(1,0,0,1),"ease-in-circ":nt(.6,.04,.98,.335),"ease-out-circ":nt(.075,.82,.165,1),"ease-in-out-circ":nt(.785,.135,.15,.86),spring:function(e,t,n){if(0===n)return Ta.linear;var r=$c(e,t,n);return function(a,i,o){return a+(i-a)*r(o)}},"cubic-bezier":nt};function Rs(e,t,n,r,a){if(1===r||t===n)return n;var i=a(t,n,r);return null==e||((e.roundValue||e.color)&&(i=Math.round(i)),void 0!==e.min&&(i=Math.max(i,e.min)),void 0!==e.max&&(i=Math.min(i,e.max))),i}function Ls(e,t){return null!=e.pfValue||null!=e.value?null==e.pfValue||null!=t&&"%"===t.type.units?e.value:e.pfValue:e}function br(e,t,n,r,a){var i=null!=a?a.type:null;n<0?n=0:n>1&&(n=1);var o=Ls(e,a),l=Ls(t,a);if(Z(o)&&Z(l))return Rs(i,o,l,n,r);if(ne(o)&&ne(l)){for(var s=[],u=0;u<l.length;u++){var c=o[u],d=l[u];if(null!=c&&null!=d){var p=Rs(i,c,d,n,r);s.push(p)}else s.push(d)}return s}}function Qc(e,t,n,r){var a=!r,i=e._private,o=t._private,l=o.easing,s=o.startTime,u=(r?e:e.cy()).style();if(!o.easingImpl)if(null==l)o.easingImpl=Ta.linear;else{var c,d,p;c=ie(l)?u.parse("transition-timing-function",l).value:l,ie(c)?(d=c,p=[]):(d=c[1],p=c.slice(2).map(function(M){return+M})),p.length>0?("spring"===d&&p.push(o.duration),o.easingImpl=Ta[d].apply(null,p)):o.easingImpl=Ta[d]}var f,h=o.easingImpl;if(f=0===o.duration?1:(n-s)/o.duration,o.applying&&(f=o.progress),f<0?f=0:f>1&&(f=1),null==o.delay){var v=o.startPosition,m=o.position;if(m&&a&&!e.locked()){var g={};jr(v.x,m.x)&&(g.x=br(v.x,m.x,f,h)),jr(v.y,m.y)&&(g.y=br(v.y,m.y,f,h)),e.position(g)}var y=o.startPan,b=o.pan,C=i.pan,E=null!=b&&r;E&&(jr(y.x,b.x)&&(C.x=br(y.x,b.x,f,h)),jr(y.y,b.y)&&(C.y=br(y.y,b.y,f,h)),e.emit("pan"));var w=o.startZoom,x=o.zoom,S=null!=x&&r;S&&(jr(w,x)&&(i.zoom=_r(i.minZoom,br(w,x,f,h),i.maxZoom)),e.emit("zoom")),(E||S)&&e.emit("viewport");var P=o.style;if(P&&P.length>0&&a){for(var _=0;_<P.length;_++){var D=P[_],T=D.name,I=o.startStyle[T],N=br(I,D,f,h,u.properties[I.name]);u.overrideBypass(e,T,N)}e.emit("style")}}return o.progress=f,f}function jr(e,t){return!(null==e||null==t||!(Z(e)&&Z(t)||e&&t))}function Jc(e,t,n,r){var a=t._private;a.started=!0,a.startTime=n-a.progress*a.duration}function As(e,t){var n=t._private.aniEles,r=[];function a(u,c){var d=u._private,p=d.animation.current,f=d.animation.queue,h=!1;if(0===p.length){var v=f.shift();v&&p.push(v)}for(var m=function(C){for(var E=C.length-1;E>=0;E--)(0,C[E])();C.splice(0,C.length)},g=p.length-1;g>=0;g--){var y=p[g],b=y._private;b.stopped?(p.splice(g,1),b.hooked=!1,b.playing=!1,b.started=!1,m(b.frames)):(b.playing||b.applying)&&(b.playing&&b.applying&&(b.applying=!1),b.started||Jc(0,y,e),Qc(u,y,e,c),b.applying&&(b.applying=!1),m(b.frames),null!=b.step&&b.step(e),y.completed()&&(p.splice(g,1),b.hooked=!1,b.playing=!1,b.started=!1,m(b.completes)),h=!0)}return c||0!==p.length||0!==f.length||r.push(u),h}for(var i=!1,o=0;o<n.length;o++){var l=a(n[o]);i=i||l}var s=a(t,!0);(i||s)&&(n.length>0?t.notify("draw",n):t.notify("draw")),n.unmerge(r),t.emit("step")}var ed={animate:Ke.animate(),animation:Ke.animation(),animated:Ke.animated(),clearQueue:Ke.clearQueue(),delay:Ke.delay(),delayAnimation:Ke.delayAnimation(),stop:Ke.stop(),addToAnimationPool:function(e){this.styleEnabled()&&this._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,e.styleEnabled()){var t=e.renderer();t&&t.beforeRender?t.beforeRender(function(n,r){As(r,e)},t.beforeRenderPriorities.animations):function n(){e._private.animationsRunning&&Be(function(r){As(r,e),n()})}()}}},td={qualifierCompare:function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)},eventMatches:function(e,t,n){var r=t.qualifier;return null==r||e!==n.target&&at(n.target)&&r.matches(n.target)},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,n){return null!=t.qualifier?n.target:e}},za=function(e){return ie(e)?new yn(e):e},Fs={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new Ca(td,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,n){return this.emitter().on(e,za(t),n),this},removeListener:function(e,t,n){return this.emitter().removeListener(e,za(t),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,n){return this.emitter().one(e,za(t),n),this},once:function(e,t,n){return this.emitter().one(e,za(t),n),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};Ke.eventAliasesOn(Fs);var Ni={png:function(e){return this._private.renderer.png(e=e||{})},jpg:function(e){var t=this._private.renderer;return(e=e||{}).bg=e.bg||"#fff",t.jpg(e)}};Ni.jpeg=Ni.jpg;var Ba={layout:function(e){if(null!=e)if(null!=e.name){var r,t=e.name,n=this.extension("layout",t);if(null!=n)return r=ie(e.eles)?this.$(e.eles):null!=e.eles?e.eles:this.$(),new n(me({},e,{cy:this,eles:r}));ot("No such layout `"+t+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else ot("A `name` must be specified to make a layout");else ot("Layout options must be specified to make a layout")}};Ba.createLayout=Ba.makeLayout=Ba.layout;var nd={notify:function(e,t){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var r=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();null!=t&&r.merge(t)}else if(n.notificationsEnabled){var a=this.renderer();!this.destroyed()&&a&&a.notify(e,t)}},notifications:function(e){var t=this._private;return void 0===e?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return null==e.batchCount&&(e.batchCount=0),0===e.batchCount&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(0===e.batchCount)return this;if(e.batchCount--,0===e.batchCount){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var r=e.batchNotifications[n];r.empty()?t.notify(n):t.notify(n,r)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var n=Object.keys(e),r=0;r<n.length;r++){var a=n[r],i=e[a];t.getElementById(a).data(i)}})}},rd=Ct({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),Oi={renderTo:function(e,t,n,r){return this._private.renderer.renderTo(e,t,n,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this.extension("renderer",e.name);if(null!=t){void 0!==e.wheelSensitivity&&Ue("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var n=rd(e);n.cy=this,this._private.renderer=new t(n),this.notify("init")}else ot("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){this.notify("destroy");var e=this.container();if(e)for(e._cyreg=null;e.childNodes.length>0;)e.removeChild(e.childNodes[0]);this._private.renderer=null,this.mutableElements().forEach(function(t){var n=t._private;n.rscratch={},n.rstyle={},n.animation.current=[],n.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};Oi.invalidateDimensions=Oi.resize;var Na={collection:function(e,t){return ie(e)?this.$(e):Oe(e)?e.collection():ne(e)?new Pt(this,e,t):new Pt(this)},nodes:function(e){var t=this.$(function(n){return n.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(n){return n.isEdge()});return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};Na.elements=Na.filter=Na.$;var zt={apply:function(e){for(var t=this._private.cy.collection(),n=0;n<e.length;n++){var r=e[n],a=this.getContextMeta(r);if(!a.empty){var i=this.getContextStyle(a),o=this.applyContextStyle(a,i,r);r._private.appliedInitStyle?this.updateTransitions(r,o.diffProps):r._private.appliedInitStyle=!0,this.updateStyleHints(r)&&t.push(r)}}return t},getPropertiesDiff:function(e,t){var n=this._private.propDiffs=this._private.propDiffs||{},r=e+"-"+t,a=n[r];if(a)return a;for(var i=[],o={},l=0;l<this.length;l++){var s=this[l],c="t"===t[l],d="t"===e[l]!==c,p=s.mappedProperties.length>0;if(d||c&&p){var f=void 0;d&&p||d?f=s.properties:p&&(f=s.mappedProperties);for(var h=0;h<f.length;h++){for(var v=f[h],m=v.name,g=!1,y=l+1;y<this.length&&("t"!==t[y]||!(g=null!=this[y].properties[v.name]));y++);o[m]||g||(o[m]=!0,i.push(m))}}}return n[r]=i,i},getContextMeta:function(e){for(var t,n="",r=e._private.styleCxtKey||"",a=0;a<this.length;a++){var i=this[a];n+=i.selector&&i.selector.matches(e)?"t":"f"}return t=this.getPropertiesDiff(r,n),e._private.styleCxtKey=n,{key:n,diffPropNames:t,empty:0===t.length}},getContextStyle:function(e){var t=e.key,n=this._private.contextStyles=this._private.contextStyles||{};if(n[t])return n[t];for(var r={_private:{key:t}},a=0;a<this.length;a++){var i=this[a];if("t"===t[a])for(var o=0;o<i.properties.length;o++){var l=i.properties[o];r[l.name]=l}}return n[t]=r,r},applyContextStyle:function(e,t,n){for(var r=e.diffPropNames,a={},i=this.types,o=0;o<r.length;o++){var l=r[o],s=t[l],u=n.pstyle(l);if(!s){if(!u)continue;s=u.bypass?{name:l,deleteBypassed:!0}:{name:l,delete:!0}}if(u!==s){if(s.mapped===i.fn&&null!=u&&null!=u.mapping&&u.mapping.value===s.value){var c=u.mapping;if((c.fnValue=s.value(n))===c.prevFnValue)continue}var d=a[l]={prev:u};this.applyParsedProperty(n,s),d.next=n.pstyle(l),d.next&&d.next.bypass&&(d.next=d.next.bypassed)}}return{diffProps:a}},updateStyleHints:function(e){var r,t=e._private,n=this,a=n.propertyGroupKeys,i=function(oe,ye,ke){return n.getPropertiesHash(oe,ye,ke)},o=t.styleKey;if(e.removed())return!1;var oe,ye,l="nodes"===t.group,s=e._private.style;r=Object.keys(s);for(var u=0;u<a.length;u++)t.styleKeys[a[u]]=[9261,5381];for(var d,p=function(oe,ye){return t.styleKeys[ye][0]=qe(oe,t.styleKeys[ye][0])},f=function(oe,ye){return t.styleKeys[ye][1]=mt(oe,t.styleKeys[ye][1])},v=function(oe,ye){for(var ke=0;ke<oe.length;ke++){var Q=oe.charCodeAt(ke);p(Q,ye),f(Q,ye)}},m=0;m<r.length;m++){var g=r[m],y=s[g];if(null!=y){var b=this.properties[g],C=b.type,E=b.groupKey,w=void 0;null!=b.hashOverride?w=b.hashOverride(e,y):null!=y.pfValue&&(w=y.pfValue);var x=null==b.enums?y.value:null,S=null!=w,_=y.units;!C.number||!S&&null==x||C.multiple?v(y.strValue,E):(oe=-128<(d=S?w:x)&&d<128&&Math.floor(d)!==d?2e9-(1024*d|0):d,p(oe,ye=E),f(oe,ye),S||null==_||v(_,E))}}for(var z=[9261,5381],I=0;I<a.length;I++){var M=t.styleKeys[a[I]];z[0]=qe(M[0],z[0]),z[1]=mt(M[1],z[1])}t.styleKey=2097152*z[0]+z[1];var q=t.styleKeys;t.labelDimsKey=it(q.labelDimensions);var A=i(e,["label"],q.labelDimensions);if(t.labelKey=it(A),t.labelStyleKey=it(yt(q.commonLabel,A)),!l){var L=i(e,["source-label"],q.labelDimensions);t.sourceLabelKey=it(L),t.sourceLabelStyleKey=it(yt(q.commonLabel,L));var X=i(e,["target-label"],q.labelDimensions);t.targetLabelKey=it(X),t.targetLabelStyleKey=it(yt(q.commonLabel,X))}if(l){var F=t.styleKeys,te=F.pie,de=[F.nodeBody,F.nodeBorder,F.backgroundImage,F.compound,te].filter(function(oe){return null!=oe}).reduce(yt,[9261,5381]);t.nodeKey=it(de),t.hasPie=null!=te&&9261!==te[0]&&5381!==te[1]}return o!==t.styleKey},clearStyleHints:function(e){var t=e._private;t.styleCxtKey="",t.styleKeys={},t.styleKey=null,t.labelKey=null,t.labelStyleKey=null,t.sourceLabelKey=null,t.sourceLabelStyleKey=null,t.targetLabelKey=null,t.targetLabelStyleKey=null,t.nodeKey=null,t.hasPie=null},applyParsedProperty:function(e,t){var n,r=this,a=t,i=e._private.style,o=r.types,l=r.properties[a.name].type,s=a.bypass,u=i[a.name],c=u&&u.bypass,d=e._private,p=function(L){return null==L?null:null!=L.pfValue?L.pfValue:L.value},f=function(){var L=p(u),X=p(a);r.checkTriggers(e,a.name,L,X)};if(a&&"pie"===a.name.substr(0,3)&&Ue("The pie style properties are deprecated.  Create charts using background images instead."),"curve-style"===t.name&&e.isEdge()&&("bezier"!==t.value&&e.isLoop()||"haystack"===t.value&&(e.source().isParent()||e.target().isParent()))&&(a=t=this.parse(t.name,"bezier",s)),a.delete)return i[a.name]=void 0,f(),!0;if(a.deleteBypassed)return u?!!u.bypass&&(u.bypassed=void 0,f(),!0):(f(),!0);if(a.deleteBypass)return u?!!u.bypass&&(i[a.name]=u.bypassed,f(),!0):(f(),!0);var h=function(){Ue("Do not assign mappings to elements without corresponding data (i.e. ele `"+e.id()+"` has no mapping for property `"+a.name+"` with data field `"+a.field+"`); try a `["+a.field+"]` selector to limit scope to elements with `"+a.field+"` defined")};switch(a.mapped){case o.mapData:for(var v,m=a.field.split("."),g=d.data,y=0;y<m.length&&g;y++)g=g[m[y]];if(null==g)return h(),!1;if(!Z(g))return Ue("Do not use continuous mappers without specifying numeric data (i.e. `"+a.field+": "+g+"` for `"+e.id()+"` is non-numeric)"),!1;var b=a.fieldMax-a.fieldMin;if((v=0===b?0:(g-a.fieldMin)/b)<0?v=0:v>1&&(v=1),l.color){var C=a.valueMin[0],w=a.valueMin[1],x=a.valueMax[1],S=a.valueMin[2],P=a.valueMax[2],_=null==a.valueMin[3]?1:a.valueMin[3],D=null==a.valueMax[3]?1:a.valueMax[3],T=[Math.round(C+(a.valueMax[0]-C)*v),Math.round(w+(x-w)*v),Math.round(S+(P-S)*v),Math.round(_+(D-_)*v)];n={bypass:a.bypass,name:a.name,value:T,strValue:"rgb("+T[0]+", "+T[1]+", "+T[2]+")"}}else{if(!l.number)return!1;n=this.parse(a.name,a.valueMin+(a.valueMax-a.valueMin)*v,a.bypass,"mapping")}if(!n)return h(),!1;n.mapping=a,a=n;break;case o.data:for(var I=a.field.split("."),N=d.data,M=0;M<I.length&&N;M++)N=N[I[M]];if(null!=N&&(n=this.parse(a.name,N,a.bypass,"mapping")),!n)return h(),!1;n.mapping=a,a=n;break;case o.fn:var A=null!=a.fnValue?a.fnValue:(0,a.value)(e);if(a.prevFnValue=A,null==A)return Ue("Custom function mappers may not return null (i.e. `"+a.name+"` for ele `"+e.id()+"` is null)"),!1;if(!(n=this.parse(a.name,A,a.bypass,"mapping")))return Ue("Custom function mappers may not return invalid values for the property type (i.e. `"+a.name+"` for ele `"+e.id()+"` is invalid)"),!1;n.mapping=Jt(a),a=n;break;case void 0:break;default:return!1}return s?(a.bypassed=c?u.bypassed:u,i[a.name]=a):c?u.bypassed=a:i[a.name]=a,f(),!0},cleanElements:function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(this.clearStyleHints(r),r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),t)for(var a=r._private.style,i=Object.keys(a),o=0;o<i.length;o++){var l=i[o],s=a[l];null!=s&&(s.bypass?s.bypassed=null:a[l]=null)}else r._private.style={}}},update:function(){this._private.cy.mutableElements().updateStyle()},updateTransitions:function(e,t){var n=this,r=e._private,a=e.pstyle("transition-property").value,i=e.pstyle("transition-duration").pfValue,o=e.pstyle("transition-delay").pfValue;if(a.length>0&&i>0){for(var l={},s=!1,u=0;u<a.length;u++){var c=a[u],d=e.pstyle(c),p=t[c];if(p){var f=p.prev,h=null!=p.next?p.next:d,v=!1,m=void 0;f&&(Z(f.pfValue)&&Z(h.pfValue)?m=f.pfValue+1e-6*(v=h.pfValue-f.pfValue):Z(f.value)&&Z(h.value)?m=f.value+1e-6*(v=h.value-f.value):ne(f.value)&&ne(h.value)&&(v=f.value[0]!==h.value[0]||f.value[1]!==h.value[1]||f.value[2]!==h.value[2],m=f.strValue),v&&(l[c]=h.strValue,this.applyBypass(e,c,m),s=!0))}}if(!s)return;r.transitioning=!0,new lr(function(g){o>0?e.delayAnimation(o).play().promise().then(g):g()}).then(function(){return e.animation({style:l,duration:i,easing:e.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){n.removeBypasses(e,a),e.emitAndNotify("style"),r.transitioning=!1})}else r.transitioning&&(this.removeBypasses(e,a),e.emitAndNotify("style"),r.transitioning=!1)},checkTrigger:function(e,t,n,r,a,i){var o=this.properties[t],l=a(o);null!=l&&l(n,r)&&i(o)},checkZOrderTrigger:function(e,t,n,r){var a=this;this.checkTrigger(e,t,n,r,function(i){return i.triggersZOrder},function(){a._private.cy.notify("zorder",e)})},checkBoundsTrigger:function(e,t,n,r){this.checkTrigger(e,t,n,r,function(a){return a.triggersBounds},function(a){e.dirtyCompoundBoundsCache(),e.dirtyBoundingBoxCache(),!a.triggersBoundsOfParallelBeziers||("curve-style"!==t||"bezier"!==n&&"bezier"!==r)&&("display"!==t||"none"!==n&&"none"!==r)||e.parallelEdges().forEach(function(i){i.isBundledBezier()&&i.dirtyBoundingBoxCache()})})},checkTriggers:function(e,t,n,r){e.dirtyStyleCache(),this.checkZOrderTrigger(e,t,n,r),this.checkBoundsTrigger(e,t,n,r)}},ad={applyBypass:function(e,t,n,r){var a=[];if("*"===t||"**"===t){if(void 0!==n)for(var i=0;i<this.properties.length;i++){var l=this.parse(this.properties[i].name,n,!0);l&&a.push(l)}}else if(ie(t)){var s=this.parse(t,n,!0);s&&a.push(s)}else{if(!ve(t))return!1;var u=t;r=n;for(var c=Object.keys(u),d=0;d<c.length;d++){var p=c[d],f=u[p];if(void 0===f&&(f=u[Gt(p)]),void 0!==f){var h=this.parse(p,f,!0);h&&a.push(h)}}}if(0===a.length)return!1;for(var v=!1,m=0;m<e.length;m++){for(var g=e[m],y={},b=void 0,C=0;C<a.length;C++){var E=a[C];if(r){var w=g.pstyle(E.name);b=y[E.name]={prev:w}}v=this.applyParsedProperty(g,Jt(E))||v,r&&(b.next=g.pstyle(E.name))}v&&this.updateStyleHints(g),r&&this.updateTransitions(g,y,!0)}return v},overrideBypass:function(e,t,n){t=wt(t);for(var r=0;r<e.length;r++){var a=e[r],i=a._private.style[t],o=this.properties[t].type,l=o.color,s=o.mutiple,u=i?null!=i.pfValue?i.pfValue:i.value:null;i&&i.bypass?(i.value=n,null!=i.pfValue&&(i.pfValue=n),i.strValue=l?"rgb("+n.join(",")+")":s?n.join(" "):""+n,this.updateStyleHints(a)):this.applyBypass(a,t,n),this.checkTriggers(a,t,u,n)}},removeAllBypasses:function(e,t){return this.removeBypasses(e,this.propertyNames,t)},removeBypasses:function(e,t,n){for(var r=0;r<e.length;r++){for(var a=e[r],i={},o=0;o<t.length;o++){var l=t[o],s=this.properties[l],u=a.pstyle(s.name);if(u&&u.bypass){var c=this.parse(l,"",!0),d=i[s.name]={prev:u};this.applyParsedProperty(a,c),d.next=a.pstyle(s.name)}}this.updateStyleHints(a),n&&this.updateTransitions(a,i,!0)}}},id={getEmSizeInPixels:function(){var e=this.containerCss("font-size");return null!=e?parseFloat(e):1},containerCss:function(e){var t=this._private.cy.container();if(U&&t&&U.getComputedStyle)return U.getComputedStyle(t).getPropertyValue(e)}},Ii={getRenderedStyle:function(e,t){return t?this.getStylePropertyValue(e,t,!0):this.getRawStyle(e,!0)},getRawStyle:function(e,t){if(e=e[0]){for(var n={},r=0;r<this.properties.length;r++){var a=this.properties[r],i=this.getStylePropertyValue(e,a.name,t);null!=i&&(n[a.name]=i,n[Gt(a.name)]=i)}return n}},getIndexedStyle:function(e,t,n,r){var a=e.pstyle(t)[n][r];return null!=a?a:e.cy().style().getDefaultProperty(t)[n][0]},getStylePropertyValue:function(e,t,n){if(e=e[0]){var r=this.properties[t];r.alias&&(r=r.pointsTo);var a=r.type,i=e.pstyle(r.name);if(i){var o=i.value,l=i.units,s=i.strValue;if(n&&a.number&&null!=o&&Z(o)){var u=e.cy().zoom(),c=function(f){return f*u},d=function(f,h){return c(f)+h},p=ne(o);return(p?l.every(function(f){return null!=f}):null!=l)?p?o.map(function(f,h){return d(f,l[h])}).join(" "):d(o,l):p?o.map(function(f){return ie(f)?f:""+c(f)}).join(" "):""+c(o)}if(null!=s)return s}return null}},getAnimationStartStyle:function(e,t){for(var n={},r=0;r<t.length;r++){var a=t[r].name,i=e.pstyle(a);void 0!==i&&(i=ve(i)?this.parse(a,i.strValue):this.parse(a,i)),i&&(n[a]=i)}return n},getPropsList:function(e){var t=[],n=e,r=this.properties;if(n)for(var a=Object.keys(n),i=0;i<a.length;i++){var o=a[i],l=n[o],s=r[o]||r[wt(o)],u=this.parse(s.name,l);u&&t.push(u)}return t},getNonDefaultPropertiesHash:function(e,t,n){var a,i,o,l,s,u=n.slice();for(l=0;l<t.length;l++)if(null!=(a=e.pstyle(t[l],!1)))if(null!=a.pfValue)u[0]=qe(o,u[0]),u[1]=mt(o,u[1]);else for(i=a.strValue,s=0;s<i.length;s++)o=i.charCodeAt(s),u[0]=qe(o,u[0]),u[1]=mt(o,u[1]);return u}};Ii.getPropertiesHash=Ii.getNonDefaultPropertiesHash;var od={appendFromJson:function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.selector,a=n.style||n.css,i=Object.keys(a);this.selector(r);for(var o=0;o<i.length;o++){var l=i[o];this.css(l,a[l])}}return this},fromJson:function(e){return this.resetToDefault(),this.appendFromJson(e),this},json:function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var n=this[t],r=n.selector,a=n.properties,i={},o=0;o<a.length;o++){var l=a[o];i[l.name]=l.strValue}e.push({selector:r?r.toString():"core",style:i})}return e}},sd={appendFromString:function(e){var t,n,r,a=""+e;function i(){a=a.length>t.length?a.substr(t.length):""}function o(){n=n.length>r.length?n.substr(r.length):""}for(a=a.replace(/[/][*](\s|.)+?[*][/]/g,"");!a.match(/^\s*$/);){var l=a.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!l){Ue("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+a);break}t=l[0];var s=l[1];if("core"!==s&&new yn(s).invalid)Ue("Skipping parsing of block: Invalid selector found in string stylesheet: "+s),i();else{var u=l[2],c=!1;n=u;for(var d=[];!n.match(/^\s*$/);){var p=n.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!p){Ue("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+u),c=!0;break}r=p[0];var f=p[1],h=p[2];this.properties[f]?this.parse(f,h)?(d.push({name:f,val:h}),o()):(Ue("Skipping property: Invalid property definition in: "+r),o()):(Ue("Skipping property: Invalid property name in: "+r),o())}if(c){i();break}this.selector(s);for(var v=0;v<d.length;v++){var m=d[v];this.css(m.name,m.val)}i()}}return this},fromString:function(e){return this.resetToDefault(),this.appendFromString(e),this}},_t={};(function(){var e=an,t=function(V){return"^"+V+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},n=function(V){var Y=e+"|\\w+|rgb[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|hsl[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+V+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+Y+")\\s*\\,\\s*("+Y+")\\)$"},r=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];_t.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:t("data")},layoutData:{mapping:!0,regex:t("layoutData")},scratch:{mapping:!0,regex:t("scratch")},mapData:{mapping:!0,regex:n("mapData")},mapLayoutData:{mapping:!0,regex:n("mapLayoutData")},mapScratch:{mapping:!0,regex:n("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:r,singleRegexMatchValue:!0},urls:{regexes:r,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(V,Y){switch(V.length){case 2:return"deg"!==Y[0]&&"rad"!==Y[0]&&"deg"!==Y[1]&&"rad"!==Y[1];case 1:return ie(V[0])||"deg"===Y[0]||"rad"===Y[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(V){var Y=V.length;return 1===Y||2===Y||4===Y}}};var a={zeroNonZero:function(V,Y){return(null==V||null==Y)&&V!==Y||0==V&&0!=Y||0!=V&&0==Y},any:function(V,Y){return V!=Y},emptyNonEmpty:function(V,Y){var $=Ae(V),re=Ae(Y);return $&&!re||!$&&re}},i=_t.types,o=[{name:"label",type:i.text,triggersBounds:a.any,triggersZOrder:a.emptyNonEmpty},{name:"text-rotation",type:i.textRotation,triggersBounds:a.any},{name:"text-margin-x",type:i.bidirectionalSize,triggersBounds:a.any},{name:"text-margin-y",type:i.bidirectionalSize,triggersBounds:a.any}],l=[{name:"source-label",type:i.text,triggersBounds:a.any},{name:"source-text-rotation",type:i.textRotation,triggersBounds:a.any},{name:"source-text-margin-x",type:i.bidirectionalSize,triggersBounds:a.any},{name:"source-text-margin-y",type:i.bidirectionalSize,triggersBounds:a.any},{name:"source-text-offset",type:i.size,triggersBounds:a.any}],s=[{name:"target-label",type:i.text,triggersBounds:a.any},{name:"target-text-rotation",type:i.textRotation,triggersBounds:a.any},{name:"target-text-margin-x",type:i.bidirectionalSize,triggersBounds:a.any},{name:"target-text-margin-y",type:i.bidirectionalSize,triggersBounds:a.any},{name:"target-text-offset",type:i.size,triggersBounds:a.any}],u=[{name:"font-family",type:i.fontFamily,triggersBounds:a.any},{name:"font-style",type:i.fontStyle,triggersBounds:a.any},{name:"font-weight",type:i.fontWeight,triggersBounds:a.any},{name:"font-size",type:i.size,triggersBounds:a.any},{name:"text-transform",type:i.textTransform,triggersBounds:a.any},{name:"text-wrap",type:i.textWrap,triggersBounds:a.any},{name:"text-overflow-wrap",type:i.textOverflowWrap,triggersBounds:a.any},{name:"text-max-width",type:i.size,triggersBounds:a.any},{name:"text-outline-width",type:i.size,triggersBounds:a.any},{name:"line-height",type:i.positiveNumber,triggersBounds:a.any}],c=[{name:"text-valign",type:i.valign,triggersBounds:a.any},{name:"text-halign",type:i.halign,triggersBounds:a.any},{name:"color",type:i.color},{name:"text-outline-color",type:i.color},{name:"text-outline-opacity",type:i.zeroOneNumber},{name:"text-background-color",type:i.color},{name:"text-background-opacity",type:i.zeroOneNumber},{name:"text-background-padding",type:i.size,triggersBounds:a.any},{name:"text-border-opacity",type:i.zeroOneNumber},{name:"text-border-color",type:i.color},{name:"text-border-width",type:i.size,triggersBounds:a.any},{name:"text-border-style",type:i.borderStyle,triggersBounds:a.any},{name:"text-background-shape",type:i.textBackgroundShape,triggersBounds:a.any},{name:"text-justification",type:i.justification}],d=[{name:"events",type:i.bool},{name:"text-events",type:i.bool}],p=[{name:"display",type:i.display,triggersZOrder:a.any,triggersBounds:a.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:i.visibility,triggersZOrder:a.any},{name:"opacity",type:i.zeroOneNumber,triggersZOrder:a.zeroNonZero},{name:"text-opacity",type:i.zeroOneNumber},{name:"min-zoomed-font-size",type:i.size},{name:"z-compound-depth",type:i.zCompoundDepth,triggersZOrder:a.any},{name:"z-index-compare",type:i.zIndexCompare,triggersZOrder:a.any},{name:"z-index",type:i.nonNegativeInt,triggersZOrder:a.any}],f=[{name:"overlay-padding",type:i.size,triggersBounds:a.any},{name:"overlay-color",type:i.color},{name:"overlay-opacity",type:i.zeroOneNumber,triggersBounds:a.zeroNonZero},{name:"overlay-shape",type:i.overlayShape,triggersBounds:a.any}],h=[{name:"underlay-padding",type:i.size,triggersBounds:a.any},{name:"underlay-color",type:i.color},{name:"underlay-opacity",type:i.zeroOneNumber,triggersBounds:a.zeroNonZero},{name:"underlay-shape",type:i.overlayShape,triggersBounds:a.any}],v=[{name:"transition-property",type:i.propList},{name:"transition-duration",type:i.time},{name:"transition-delay",type:i.time},{name:"transition-timing-function",type:i.easing}],m=function(V,Y){return"label"===Y.value?-V.poolIndex():Y.pfValue},g=[{name:"height",type:i.nodeSize,triggersBounds:a.any,hashOverride:m},{name:"width",type:i.nodeSize,triggersBounds:a.any,hashOverride:m},{name:"shape",type:i.nodeShape,triggersBounds:a.any},{name:"shape-polygon-points",type:i.polygonPointList,triggersBounds:a.any},{name:"background-color",type:i.color},{name:"background-fill",type:i.fill},{name:"background-opacity",type:i.zeroOneNumber},{name:"background-blacken",type:i.nOneOneNumber},{name:"background-gradient-stop-colors",type:i.colors},{name:"background-gradient-stop-positions",type:i.percentages},{name:"background-gradient-direction",type:i.gradientDirection},{name:"padding",type:i.sizeMaybePercent,triggersBounds:a.any},{name:"padding-relative-to",type:i.paddingRelativeTo,triggersBounds:a.any},{name:"bounds-expansion",type:i.boundsExpansion,triggersBounds:a.any}],y=[{name:"border-color",type:i.color},{name:"border-opacity",type:i.zeroOneNumber},{name:"border-width",type:i.size,triggersBounds:a.any},{name:"border-style",type:i.borderStyle}],b=[{name:"background-image",type:i.urls},{name:"background-image-crossorigin",type:i.bgCrossOrigin},{name:"background-image-opacity",type:i.zeroOneNumbers},{name:"background-image-containment",type:i.bgContainment},{name:"background-image-smoothing",type:i.bools},{name:"background-position-x",type:i.bgPos},{name:"background-position-y",type:i.bgPos},{name:"background-width-relative-to",type:i.bgRelativeTo},{name:"background-height-relative-to",type:i.bgRelativeTo},{name:"background-repeat",type:i.bgRepeat},{name:"background-fit",type:i.bgFit},{name:"background-clip",type:i.bgClip},{name:"background-width",type:i.bgWH},{name:"background-height",type:i.bgWH},{name:"background-offset-x",type:i.bgPos},{name:"background-offset-y",type:i.bgPos}],C=[{name:"position",type:i.position,triggersBounds:a.any},{name:"compound-sizing-wrt-labels",type:i.compoundIncludeLabels,triggersBounds:a.any},{name:"min-width",type:i.size,triggersBounds:a.any},{name:"min-width-bias-left",type:i.sizeMaybePercent,triggersBounds:a.any},{name:"min-width-bias-right",type:i.sizeMaybePercent,triggersBounds:a.any},{name:"min-height",type:i.size,triggersBounds:a.any},{name:"min-height-bias-top",type:i.sizeMaybePercent,triggersBounds:a.any},{name:"min-height-bias-bottom",type:i.sizeMaybePercent,triggersBounds:a.any}],E=[{name:"line-style",type:i.lineStyle},{name:"line-color",type:i.color},{name:"line-fill",type:i.fill},{name:"line-cap",type:i.lineCap},{name:"line-opacity",type:i.zeroOneNumber},{name:"line-dash-pattern",type:i.numbers},{name:"line-dash-offset",type:i.number},{name:"line-gradient-stop-colors",type:i.colors},{name:"line-gradient-stop-positions",type:i.percentages},{name:"curve-style",type:i.curveStyle,triggersBounds:a.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:i.zeroOneNumber,triggersBounds:a.any},{name:"source-endpoint",type:i.edgeEndpoint,triggersBounds:a.any},{name:"target-endpoint",type:i.edgeEndpoint,triggersBounds:a.any},{name:"control-point-step-size",type:i.size,triggersBounds:a.any},{name:"control-point-distances",type:i.bidirectionalSizes,triggersBounds:a.any},{name:"control-point-weights",type:i.numbers,triggersBounds:a.any},{name:"segment-distances",type:i.bidirectionalSizes,triggersBounds:a.any},{name:"segment-weights",type:i.numbers,triggersBounds:a.any},{name:"taxi-turn",type:i.bidirectionalSizeMaybePercent,triggersBounds:a.any},{name:"taxi-turn-min-distance",type:i.size,triggersBounds:a.any},{name:"taxi-direction",type:i.axisDirection,triggersBounds:a.any},{name:"edge-distances",type:i.edgeDistances,triggersBounds:a.any},{name:"arrow-scale",type:i.positiveNumber,triggersBounds:a.any},{name:"loop-direction",type:i.angle,triggersBounds:a.any},{name:"loop-sweep",type:i.angle,triggersBounds:a.any},{name:"source-distance-from-node",type:i.size,triggersBounds:a.any},{name:"target-distance-from-node",type:i.size,triggersBounds:a.any}],w=[{name:"ghost",type:i.bool,triggersBounds:a.any},{name:"ghost-offset-x",type:i.bidirectionalSize,triggersBounds:a.any},{name:"ghost-offset-y",type:i.bidirectionalSize,triggersBounds:a.any},{name:"ghost-opacity",type:i.zeroOneNumber}],x=[{name:"selection-box-color",type:i.color},{name:"selection-box-opacity",type:i.zeroOneNumber},{name:"selection-box-border-color",type:i.color},{name:"selection-box-border-width",type:i.size},{name:"active-bg-color",type:i.color},{name:"active-bg-opacity",type:i.zeroOneNumber},{name:"active-bg-size",type:i.size},{name:"outside-texture-bg-color",type:i.color},{name:"outside-texture-bg-opacity",type:i.zeroOneNumber}],S=[];_t.pieBackgroundN=16,S.push({name:"pie-size",type:i.sizeMaybePercent});for(var P=1;P<=_t.pieBackgroundN;P++)S.push({name:"pie-"+P+"-background-color",type:i.color}),S.push({name:"pie-"+P+"-background-size",type:i.percent}),S.push({name:"pie-"+P+"-background-opacity",type:i.zeroOneNumber});var _=[],D=_t.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:i.arrowShape,triggersBounds:a.any},{name:"arrow-color",type:i.color},{name:"arrow-fill",type:i.arrowFill}].forEach(function(V){D.forEach(function(Y){_.push({name:Y+"-"+V.name,type:V.type,triggersBounds:V.triggersBounds})})},{});var T=_t.properties=[].concat(d,v,p,f,h,w,c,u,o,l,s,g,y,b,S,C,E,_,x),z=_t.propertyGroups={behavior:d,transition:v,visibility:p,overlay:f,underlay:h,ghost:w,commonLabel:c,labelDimensions:u,mainLabel:o,sourceLabel:l,targetLabel:s,nodeBody:g,nodeBorder:y,backgroundImage:b,pie:S,compound:C,edgeLine:E,edgeArrow:_,core:x},I=_t.propertyGroupNames={};(_t.propertyGroupKeys=Object.keys(z)).forEach(function(V){I[V]=z[V].map(function(Y){return Y.name}),z[V].forEach(function(Y){return Y.groupKey=V})});var N=_t.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];_t.propertyNames=T.map(function(V){return V.name});for(var M=0;M<T.length;M++){var q=T[M];T[q.name]=q}for(var A=0;A<N.length;A++){var L=N[A],F={name:L.name,alias:!0,pointsTo:T[L.pointsTo]};T.push(F),T[L.name]=F}})(),_t.getDefaultProperty=function(e){return this.getDefaultProperties()[e]},_t.getDefaultProperties=function(){var e=this._private;if(null!=e.defaultProperties)return e.defaultProperties;for(var t=me({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(s,u){for(var c=1;c<=_t.pieBackgroundN;c++)s[u.name.replace("{{i}}",c)]=u.value;return s},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(s,u){return _t.arrowPrefixes.forEach(function(c){s[c+"-"+u.name]=u.value}),s},{})),n={},r=0;r<this.properties.length;r++){var a=this.properties[r];if(!a.pointsTo){var i=a.name,l=this.parse(i,t[i]);n[i]=l}}return e.defaultProperties=n,e.defaultProperties},_t.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var js={parse:function(e,t,n,r){if(H(t))return this.parseImplWarn(e,t,n,r);var a,i=Ur(e,""+t,n?"t":"f","mapping"===r||!0===r||!1===r||null==r?"dontcare":r),o=this.propCache=this.propCache||[];return(a=o[i])||(a=o[i]=this.parseImplWarn(e,t,n,r)),(n||"mapping"===r)&&(a=Jt(a))&&(a.value=Jt(a.value)),a},parseImplWarn:function(e,t,n,r){var a=this.parseImpl(e,t,n,r);return a||null==t||Ue("The style property `".concat(e,": ").concat(t,"` is invalid")),!a||"width"!==a.name&&"height"!==a.name||"label"!==t||Ue("The style value of `label` is deprecated for `"+a.name+"`"),a},parseImpl:function(e,t,n,r){e=wt(e);var a=this.properties[e],i=t,o=this.types;if(!a||void 0===t)return null;a.alias&&(e=(a=a.pointsTo).name);var l=ie(t);l&&(t=t.trim());var s,u,c=a.type;if(!c)return null;if(n&&(""===t||null===t))return{name:e,value:t,bypass:!0,deleteBypass:!0};if(H(t))return{name:e,value:t,strValue:"fn",mapped:o.fn,bypass:n};if(!(!l||r||t.length<7||"a"!==t[1])){if(t.length>=7&&"d"===t[0]&&(s=new RegExp(o.data.regex).exec(t)))return!n&&{name:e,value:s,strValue:""+t,mapped:o.data,field:s[1],bypass:n};if(t.length>=10&&"m"===t[0]&&(u=new RegExp(o.mapData.regex).exec(t))){if(n||c.multiple)return!1;var p=o.mapData;if(!c.color&&!c.number)return!1;var f=this.parse(e,u[4]);if(!f||f.mapped)return!1;var h=this.parse(e,u[5]);if(!h||h.mapped)return!1;if(f.pfValue===h.pfValue||f.strValue===h.strValue)return Ue("`"+e+": "+t+"` is not a valid mapper because the output range is zero; converting to `"+e+": "+f.strValue+"`"),this.parse(e,f.strValue);if(c.color){var v=f.value,m=h.value;if(!(v[0]!==m[0]||v[1]!==m[1]||v[2]!==m[2]||v[3]!==m[3]&&(null!=v[3]&&1!==v[3]||null!=m[3]&&1!==m[3])))return!1}return{name:e,value:u,strValue:""+t,mapped:p,field:u[1],fieldMin:parseFloat(u[2]),fieldMax:parseFloat(u[3]),valueMin:f.value,valueMax:h.value,bypass:n}}}if(c.multiple&&"multiple"!==r){var g;if(g=l?t.split(/\s+/):ne(t)?t:[t],c.evenMultiple&&g.length%2!=0)return null;for(var y=[],b=[],C=[],E="",w=!1,x=0;x<g.length;x++){var S=this.parse(e,g[x],n,"multiple");w=w||ie(S.value),y.push(S.value),C.push(null!=S.pfValue?S.pfValue:S.value),b.push(S.units),E+=(x>0?" ":"")+S.strValue}return c.validate&&!c.validate(y,b)?null:c.singleEnum&&w?1===y.length&&ie(y[0])?{name:e,value:y[0],strValue:y[0],bypass:n}:null:{name:e,value:y,pfValue:C,strValue:E,bypass:n,units:b}}var _,D=function(){for(var de=0;de<c.enums.length;de++)if(c.enums[de]===t)return{name:e,value:t,strValue:""+t,bypass:n};return null};if(c.number){var T,z="px";if(c.units&&(T=c.units),c.implicitUnits&&(z=c.implicitUnits),!c.unitless)if(l){var I="px|em"+(c.allowPercent?"|\\%":"");T&&(I=T);var N=t.match("^("+an+")("+I+")?$");N&&(t=N[1],T=N[2]||z)}else T&&!c.implicitUnits||(T=z);if(t=parseFloat(t),isNaN(t)&&void 0===c.enums)return null;if(isNaN(t)&&void 0!==c.enums)return t=i,D();if(c.integer&&(!Z(_=t)||Math.floor(_)!==_)||void 0!==c.min&&(t<c.min||c.strictMin&&t===c.min)||void 0!==c.max&&(t>c.max||c.strictMax&&t===c.max))return null;var M={name:e,value:t,strValue:""+t+(T||""),units:T,bypass:n};return M.pfValue=c.unitless||"px"!==T&&"em"!==T?t:"px"!==T&&T?this.getEmSizeInPixels()*t:t,"ms"!==T&&"s"!==T||(M.pfValue="ms"===T?t:1e3*t),"deg"!==T&&"rad"!==T||(M.pfValue="rad"===T?t:Math.PI*t/180),"%"===T&&(M.pfValue=t/100),M}if(c.propList){var q=[],A=""+t;if("none"!==A){for(var L=A.split(/\s*,\s*|\s+/),X=0;X<L.length;X++){var F=L[X].trim();this.properties[F]?q.push(F):Ue("`"+F+"` is not a valid property name")}if(0===q.length)return null}return{name:e,value:q,strValue:0===q.length?"none":q.join(" "),bypass:n}}if(c.color){var V=function(e){return(ne(e)?e:null)||$e[e.toLowerCase()]||function(t){var n,r,a;if((4===t.length||7===t.length)&&"#"===t[0])return 4===t.length?(n=parseInt(t[1]+t[1],16),r=parseInt(t[2]+t[2],16),a=parseInt(t[3]+t[3],16)):(n=parseInt(t[1]+t[2],16),r=parseInt(t[3]+t[4],16),a=parseInt(t[5]+t[6],16)),[n,r,a]}(e)||function(t){var n,r=new RegExp("^rgb[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(t);if(r){n=[];for(var a=[],i=1;i<=3;i++){var o=r[i];if("%"===o[o.length-1]&&(a[i]=!0),o=parseFloat(o),a[i]&&(o=o/100*255),o<0||o>255)return;n.push(Math.floor(o))}if((a[1]||a[2]||a[3])&&!(a[1]&&a[2]&&a[3]))return;var u=r[4];if(void 0!==u){if((u=parseFloat(u))<0||u>1)return;n.push(u)}}return n}(e)||function(t){var n,r,a,i,o,l,s,u;function c(h,v,m){return m<0&&(m+=1),m>1&&(m-=1),m<1/6?h+6*(v-h)*m:m<.5?v:m<2/3?h+(v-h)*(2/3-m)*6:h}var d=new RegExp("^hsl[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(t);if(d){if((r=parseInt(d[1]))<0?r=(360- -1*r%360)%360:r>360&&(r%=360),r/=360,(a=parseFloat(d[2]))<0||a>100||(a/=100,(i=parseFloat(d[3]))<0||i>100)||(i/=100,void 0!==(o=d[4])&&((o=parseFloat(o))<0||o>1)))return;if(0===a)l=s=u=Math.round(255*i);else{var p=i<.5?i*(1+a):i+a-i*a,f=2*i-p;l=Math.round(255*c(f,p,r+1/3)),s=Math.round(255*c(f,p,r)),u=Math.round(255*c(f,p,r-1/3))}n=[l,s,u,o]}return n}(e)}(t);return V?{name:e,value:V,pfValue:V,strValue:"rgb("+V[0]+","+V[1]+","+V[2]+")",bypass:n}:null}if(c.regex||c.regexes){if(c.enums){var Y=D();if(Y)return Y}for(var $=c.regexes?c.regexes:[c.regex],re=0;re<$.length;re++){var te=new RegExp($[re]).exec(t);if(te)return{name:e,value:c.singleRegexMatchValue?te[1]:te,strValue:""+t,bypass:n}}return null}return c.string?{name:e,value:""+t,strValue:""+t,bypass:n}:c.enums?D():null}},Bt=function e(t){if(!(this instanceof e))return new e(t);Ge(t)?(this._private={cy:t,coreStyle:{}},this.length=0,this.resetToDefault()):ot("A style must have a core reference")},Nt=Bt.prototype;Nt.instanceString=function(){return"style"},Nt.clear=function(){for(var e=this._private,t=e.cy.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,e.contextStyles={},e.propDiffs={},this.cleanElements(t,!0),t.forEach(function(r){var a=r[0]._private;a.styleDirty=!0,a.appliedInitStyle=!1}),this},Nt.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},Nt.core=function(e){return this._private.coreStyle[e]||this.getDefaultProperty(e)},Nt.selector=function(e){var t="core"===e?null:new yn(e),n=this.length++;return this[n]={selector:t,properties:[],mappedProperties:[],index:n},this},Nt.css=function(){var e=this,t=arguments;if(1===t.length)for(var n=t[0],r=0;r<e.properties.length;r++){var a=e.properties[r],i=n[a.name];void 0===i&&(i=n[Gt(a.name)]),void 0!==i&&this.cssRule(a.name,i)}else 2===t.length&&this.cssRule(t[0],t[1]);return this},Nt.style=Nt.css,Nt.cssRule=function(e,t){var n=this.parse(e,t);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n),!this[r].selector&&(this._private.coreStyle[n.name]=n)}return this},Nt.append=function(e){return se(e)?e.appendToStyle(this):ne(e)?this.appendFromJson(e):ie(e)&&this.appendFromString(e),this},Bt.fromJson=function(e,t){var n=new Bt(e);return n.fromJson(t),n},Bt.fromString=function(e,t){return new Bt(e).fromString(t)},[zt,ad,id,Ii,od,sd,_t,js].forEach(function(e){me(Nt,e)}),Bt.types=Nt.types,Bt.properties=Nt.properties,Bt.propertyGroups=Nt.propertyGroups,Bt.propertyGroupNames=Nt.propertyGroupNames,Bt.propertyGroupKeys=Nt.propertyGroupKeys;var ld={style:function(e){return e&&this.setStyle(e).update(),this._private.style},setStyle:function(e){var t=this._private;return t.style=se(e)?e.generateStyle(this):ne(e)?Bt.fromJson(this,e):ie(e)?Bt.fromString(this,e):Bt(this),t.style},updateStyle:function(){this.mutableElements().updateStyle()}},Hn={autolock:function(e){return void 0===e?this._private.autolock:(this._private.autolock=!!e,this)},autoungrabify:function(e){return void 0===e?this._private.autoungrabify:(this._private.autoungrabify=!!e,this)},autounselectify:function(e){return void 0===e?this._private.autounselectify:(this._private.autounselectify=!!e,this)},selectionType:function(e){var t=this._private;return null==t.selectionType&&(t.selectionType="single"),void 0===e?t.selectionType:("additive"!==e&&"single"!==e||(t.selectionType=e),this)},panningEnabled:function(e){return void 0===e?this._private.panningEnabled:(this._private.panningEnabled=!!e,this)},userPanningEnabled:function(e){return void 0===e?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!e,this)},zoomingEnabled:function(e){return void 0===e?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!e,this)},userZoomingEnabled:function(e){return void 0===e?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!e,this)},boxSelectionEnabled:function(e){return void 0===e?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!e,this)},pan:function(){var e,t,n,r,a,i=arguments,o=this._private.pan;switch(i.length){case 0:return o;case 1:if(ie(i[0]))return o[e=i[0]];if(ve(i[0])){if(!this._private.panningEnabled)return this;r=(n=i[0]).x,a=n.y,Z(r)&&(o.x=r),Z(a)&&(o.y=a),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;t=i[1],"x"!==(e=i[0])&&"y"!==e||!Z(t)||(o[e]=t),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(e,t){var n,r,a,i,o,l=arguments,s=this._private.pan;if(!this._private.panningEnabled)return this;switch(l.length){case 1:ve(e)&&(i=(a=l[0]).x,o=a.y,Z(i)&&(s.x+=i),Z(o)&&(s.y+=o),this.emit("pan viewport"));break;case 2:r=t,"x"!==(n=e)&&"y"!==n||!Z(r)||(s[n]+=r),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){var n,r;if((Z(e)&&void 0===t&&(t=e,e=void 0),this._private.panningEnabled&&this._private.zoomingEnabled)&&(ie(e)?e=this.$(e):ve(r=e)&&Z(r.x1)&&Z(r.x2)&&Z(r.y1)&&Z(r.y2)?((n={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2}).w=n.x2-n.x1,n.h=n.y2-n.y1):Oe(e)||(e=this.mutableElements()),!Oe(e)||!e.empty())){n=n||e.boundingBox();var o,l=this.width(),s=this.height();if(t=Z(t)?t:0,!isNaN(l)&&!isNaN(s)&&l>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0)return{zoom:o=(o=(o=Math.min((l-2*t)/n.w,(s-2*t)/n.h))>this._private.maxZoom?this._private.maxZoom:o)<this._private.minZoom?this._private.minZoom:o,pan:{x:(l-o*(n.x1+n.x2))/2,y:(s-o*(n.y1+n.y2))/2}}}},zoomRange:function(e,t){var n=this._private;if(null==t){var r=e;e=r.min,t=r.max}return Z(e)&&Z(t)&&e<=t?(n.minZoom=e,n.maxZoom=t):Z(e)&&void 0===t&&e<=n.maxZoom?n.minZoom=e:Z(t)&&void 0===e&&t>=n.minZoom&&(n.maxZoom=t),this},minZoom:function(e){return void 0===e?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return void 0===e?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t,n,r=this._private,a=r.pan,i=r.zoom,o=!1;return r.zoomingEnabled||(o=!0),Z(e)?n=e:ve(e)&&(n=e.level,null!=e.position?t=Qr(e.position,i,a):null!=e.renderedPosition&&(t=e.renderedPosition),null==t||r.panningEnabled||(o=!0)),n=(n=n>r.maxZoom?r.maxZoom:n)<r.minZoom?r.minZoom:n,!o&&Z(n)&&n!==i&&(null==t||Z(t.x)&&Z(t.y))?null!=t?{zoomed:!0,panned:!0,zoom:n,pan:{x:-n/i*(t.x-a.x)+t.x,y:-n/i*(t.y-a.y)+t.y}}:{zoomed:!0,panned:!1,zoom:n,pan:a}:null},zoom:function(e){if(void 0===e)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return null!=t&&t.zoomed?(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(e){var t=this._private,n=!0,r=!0,a=[],i=!1,o=!1;if(!e)return this;if(Z(e.zoom)||(n=!1),ve(e.pan)||(r=!1),!n&&!r)return this;if(n){var l=e.zoom;l<t.minZoom||l>t.maxZoom||!t.zoomingEnabled?i=!0:(t.zoom=l,a.push("zoom"))}if(r&&(!i||!e.cancelOnFailedZoom)&&t.panningEnabled){var s=e.pan;Z(s.x)&&(t.pan.x=s.x,o=!1),Z(s.y)&&(t.pan.y=s.y,o=!1),o||a.push("pan")}return a.length>0&&(a.push("viewport"),this.emit(a.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(ie(e)){var n=e;e=this.mutableElements().filter(n)}else Oe(e)||(e=this.mutableElements());if(0!==e.length){var r=e.boundingBox(),a=this.width(),i=this.height();return{x:(a-(t=void 0===t?this._private.zoom:t)*(r.x1+r.x2))/2,y:(i-t*(r.y1+r.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e,t,n=this._private,r=n.container;return n.sizeCache=n.sizeCache||(r?(e=U.getComputedStyle(r),{width:r.clientWidth-(t=function(a){return parseFloat(e.getPropertyValue(a))})("padding-left")-t("padding-right"),height:r.clientHeight-t("padding-top")-t("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},multiClickDebounceTime:function(e){return e?(this._private.multiClickDebounceTime=e,this):this._private.multiClickDebounceTime}};Hn.centre=Hn.center,Hn.autolockNodes=Hn.autolock,Hn.autoungrabifyNodes=Hn.autoungrabify;var Vr={data:Ke.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Ke.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Ke.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Ke.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Vr.attr=Vr.data,Vr.removeAttr=Vr.removeData;var qr=function(e){var t=this,n=(e=me({},e)).container;n&&!rt(n)&&rt(n[0])&&(n=n[0]);var r=n?n._cyreg:null;(r=r||{})&&r.cy&&(r.cy.destroy(),r={});var a=r.readies=r.readies||[];n&&(n._cyreg=r),r.cy=t;var i=void 0!==U&&void 0!==n&&!e.headless,o=e;o.layout=me({name:i?"grid":"null"},o.layout),o.renderer=me({name:i?"canvas":"null"},o.renderer);var l=function(c,d,p){return void 0!==d?d:void 0!==p?p:c},s=this._private={container:n,ready:!1,options:o,elements:new Pt(this),listeners:[],aniEles:new Pt(this),data:o.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:l(!0,o.zoomingEnabled),userZoomingEnabled:l(!0,o.userZoomingEnabled),panningEnabled:l(!0,o.panningEnabled),userPanningEnabled:l(!0,o.userPanningEnabled),boxSelectionEnabled:l(!0,o.boxSelectionEnabled),autolock:l(!1,o.autolock,o.autolockNodes),autoungrabify:l(!1,o.autoungrabify,o.autoungrabifyNodes),autounselectify:l(!1,o.autounselectify),styleEnabled:void 0===o.styleEnabled?i:o.styleEnabled,zoom:Z(o.zoom)?o.zoom:1,pan:{x:ve(o.pan)&&Z(o.pan.x)?o.pan.x:0,y:ve(o.pan)&&Z(o.pan.y)?o.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:l(250,o.multiClickDebounceTime)};this.createEmitter(),this.selectionType(o.selectionType),this.zoomRange({min:o.minZoom,max:o.maxZoom}),s.styleEnabled&&t.setStyle([]);var u=me({},o,o.renderer);t.initRenderer(u),function(c,d){if(c.some(gt))return lr.all(c).then(d);d(c)}([o.style,o.elements],function(c){var d=c[0],p=c[1];s.styleEnabled&&t.style().append(d),function(f,h,v){t.notifications(!1);var m=t.mutableElements();m.length>0&&m.remove(),null!=f&&(ve(f)||ne(f))&&t.add(f),t.one("layoutready",function(y){t.notifications(!0),t.emit(y),t.one("load",h),t.emitAndNotify("load")}).one("layoutstop",function(){t.one("done",v),t.emit("done")});var g=me({},t._private.options.layout);g.eles=t.elements(),t.layout(g).run()}(p,function(){t.startAnimationLoop(),s.ready=!0,H(o.ready)&&t.on("ready",o.ready);for(var f=0;f<a.length;f++)t.on("ready",a[f]);r&&(r.readies=[]),t.emit("ready")},o.done)})},Oa=qr.prototype;me(Oa,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},mount:function(e){if(null!=e){var t=this,n=t._private,r=n.options;return!rt(e)&&rt(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),n.container=e,n.styleEnabled=!0,t.invalidateSize(),t.initRenderer(me({},r,r.renderer,{name:"null"===r.renderer.name?"canvas":r.renderer.name})),t.startAnimationLoop(),t.style(r.style),t.emit("mount"),t}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Jt(this._private.options)},json:function(e){var t=this,n=t._private,r=t.mutableElements();if(ve(e)){if(t.startBatch(),e.elements){var a={},i=function(m,g){for(var y=[],b=[],C=0;C<m.length;C++){var E=m[C];if(E.data.id){var w=""+E.data.id,x=t.getElementById(w);a[w]=!0,0!==x.length?b.push({ele:x,json:E}):(g&&(E.group=g),y.push(E))}else Ue("cy.json() cannot handle elements without an ID attribute")}t.add(y);for(var S=0;S<b.length;S++){var P=b[S];P.ele.json(P.json)}};if(ne(e.elements))i(e.elements);else for(var o=["nodes","edges"],l=0;l<o.length;l++){var s=o[l],u=e.elements[s];ne(u)&&i(u,s)}var c=t.collection();r.filter(function(m){return!a[m.id()]}).forEach(function(m){m.isParent()?c.merge(m):m.remove()}),c.forEach(function(m){return m.children().move({parent:null})}),c.forEach(function(m){return(g=m,t.getElementById(g.id())).remove();var g})}e.style&&t.style(e.style),null!=e.zoom&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x===n.pan.x&&e.pan.y===n.pan.y||t.pan(e.pan)),e.data&&t.data(e.data);for(var d=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],p=0;p<d.length;p++){var f=d[p];null!=e[f]&&t[f](e[f])}return t.endBatch(),this}var h={};e?h.elements=this.elements().map(function(m){return m.json()}):(h.elements={},r.forEach(function(m){var g=m.group();h.elements[g]||(h.elements[g]=[]),h.elements[g].push(m.json())})),this._private.styleEnabled&&(h.style=t.style().json()),h.data=Jt(t.data());var v=n.options;return h.zoomingEnabled=n.zoomingEnabled,h.userZoomingEnabled=n.userZoomingEnabled,h.zoom=n.zoom,h.minZoom=n.minZoom,h.maxZoom=n.maxZoom,h.panningEnabled=n.panningEnabled,h.userPanningEnabled=n.userPanningEnabled,h.pan=Jt(n.pan),h.boxSelectionEnabled=n.boxSelectionEnabled,h.renderer=Jt(v.renderer),h.hideEdgesOnViewport=v.hideEdgesOnViewport,h.textureOnViewport=v.textureOnViewport,h.wheelSensitivity=v.wheelSensitivity,h.motionBlur=v.motionBlur,h.multiClickDebounceTime=v.multiClickDebounceTime,h}}),Oa.$id=Oa.getElementById,[Uc,ed,Fs,Ni,Ba,nd,Oi,Na,ld,Hn,Vr].forEach(function(e){me(Oa,e)});var ud={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},xr=function(e){return e.scratch("breadthfirst")},Vs=function(e,t){return e.scratch("breadthfirst",t)};function qs(e){this.options=me({},ud,e)}qs.prototype.run=function(){var e,t=this.options,n=t,r=t.cy,a=n.eles,i=a.nodes().filter(function(Q){return!Q.isParent()}),o=a,l=n.directed,s=n.maximal||n.maximalAdjustments>0,u=At(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(Oe(n.roots))e=n.roots;else if(ne(n.roots)){for(var c=[],d=0;d<n.roots.length;d++){var f=r.getElementById(n.roots[d]);c.push(f)}e=r.collection(c)}else if(ie(n.roots))e=r.$(n.roots);else if(l)e=i.roots();else{var h=a.components();e=r.collection();for(var v=function(Q){var le=h[Q],pe=le.maxDegree(!1),k=le.filter(function(B){return B.degree(!1)===pe});e=e.add(k)},m=0;m<h.length;m++)v(m)}var g=[],y={},b=function(Q,le){null==g[le]&&(g[le]=[]);var pe=g[le].length;g[le].push(Q),Vs(Q,{index:pe,depth:le})};o.bfs({roots:e,directed:n.directed,visit:function(Q,le,pe,k,B){var R=Q[0],j=R.id();b(R,B),y[j]=!0}});for(var C=[],E=0;E<i.length;E++){var w=i[E];y[w.id()]||C.push(w)}var x=function(Q){for(var le=g[Q],pe=0;pe<le.length;pe++){var k=le[pe];null!=k?Vs(k,{depth:Q,index:pe}):(le.splice(pe,1),pe--)}},S=function(){for(var Q=0;Q<g.length;Q++)x(Q)},P=function(Q,le){for(var pe=xr(Q),k=Q.incomers().filter(function(K){return K.isNode()&&a.has(K)}),B=-1,R=Q.id(),j=0;j<k.length;j++){var ee=xr(k[j]);B=Math.max(B,ee.depth)}return pe.depth<=B&&(le[R]?null:(he=B+1,Me=xr(K=Q),g[Me.depth][Me.index]=null,b(K,he),le[R]=!0,!0));var K,he,Me};if(l&&s){var _=[],D={},T=function(Q){return _.push(Q)};for(i.forEach(function(Q){return _.push(Q)});_.length>0;){var z=_.shift(),I=P(z,D);if(I)z.outgoers().filter(function(Q){return Q.isNode()&&a.has(Q)}).forEach(T);else if(null===I){Ue("Detected double maximal shift for node `"+z.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}S();var N=0;if(n.avoidOverlap)for(var M=0;M<i.length;M++){var q=i[M].layoutDimensions(n);N=Math.max(N,q.w,q.h)}var X={},F=function(Q){if(X[Q.id()])return X[Q.id()];for(var le=xr(Q).depth,pe=Q.neighborhood(),k=0,B=0,R=0;R<pe.length;R++){var j=pe[R];if(!j.isEdge()&&!j.isParent()&&i.has(j)){var O=xr(j);if(null!=O){var ee=O.index,K=O.depth;null!=ee&&null!=K&&K<le&&(k+=ee/g[K].length,B++)}}}return k/=B=Math.max(1,B),0===B&&(k=0),X[Q.id()]=k,k},V=function(Q,le){var pe=F(Q)-F(le);return 0===pe?Ve(Q.id(),le.id()):pe};void 0!==n.depthSort&&(V=n.depthSort);for(var Y=0;Y<g.length;Y++)g[Y].sort(V),x(Y);for(var $=[],re=0;re<C.length;re++)$.push(C[re]);g.unshift($),S();for(var te=0,de=0;de<g.length;de++)te=Math.max(g[de].length,te);var oe=u.x1+u.w/2,ye=u.x1+u.h/2,ke=g.reduce(function(Q,le){return Math.max(Q,le.length)},0);return a.nodes().layoutPositions(this,n,function(Q){var le=xr(Q),pe=le.depth,k=le.index,B=g[pe].length,R=Math.max(u.w/((n.grid?ke:B)+1),N),j=Math.max(u.h/(g.length+1),N),O=Math.min(u.w/2/g.length,u.h/2/g.length);if(O=Math.max(O,N),n.circle){var ee=O*pe+O-(g.length>0&&g[0].length<=3?O/2:0),K=2*Math.PI/g[pe].length*k;return 0===pe&&1===g[0].length&&(ee=1),{x:oe+ee*Math.cos(K),y:ye+ee*Math.sin(K)}}return{x:oe+(k+1-(B+1)/2)*R,y:(pe+1)*j}}),this};var cd={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function Xs(e){this.options=me({},cd,e)}Xs.prototype.run=function(){var e=this.options,t=e,n=e.cy,r=t.eles,a=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,i=r.nodes().not(":parent");t.sort&&(i=i.sort(t.sort));for(var o,l=At(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s=l.x1+l.w/2,u=l.y1+l.h/2,c=(void 0===t.sweep?2*Math.PI-2*Math.PI/i.length:t.sweep)/Math.max(1,i.length-1),d=0,p=0;p<i.length;p++){var f=i[p].layoutDimensions(t);d=Math.max(d,f.w,f.h)}if(o=Z(t.radius)?t.radius:i.length<=1?0:Math.min(l.h,l.w)/2-d,i.length>1&&t.avoidOverlap){d*=1.75;var m=Math.cos(c)-Math.cos(0),g=Math.sin(c)-Math.sin(0),y=Math.sqrt(d*d/(m*m+g*g));o=Math.max(y,o)}return r.nodes().layoutPositions(this,t,function(b,C){var E=t.startAngle+C*c*(a?1:-1),w=o*Math.cos(E),x=o*Math.sin(E);return{x:s+w,y:u+x}}),this};var Ys,dd={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function Hs(e){this.options=me({},dd,e)}Hs.prototype.run=function(){for(var e=this.options,t=e,n=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,r=e.cy,a=t.eles,i=a.nodes().not(":parent"),o=At(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),l=o.x1+o.w/2,s=o.y1+o.h/2,u=[],c=0,d=0;d<i.length;d++){var p,f=i[d];p=t.concentric(f),u.push({value:p,node:f}),f._private.scratch.concentric=p}i.updateStyle();for(var h=0;h<i.length;h++){var v=i[h].layoutDimensions(t);c=Math.max(c,v.w,v.h)}u.sort(function(Q,le){return le.value-Q.value});for(var m=t.levelWidth(i),g=[[]],y=g[0],b=0;b<u.length;b++){var C=u[b];y.length>0&&Math.abs(y[0].value-C.value)>=m&&g.push(y=[]),y.push(C)}var E=c+t.minNodeSpacing;if(!t.avoidOverlap){var w=g.length>0&&g[0].length>1,x=(Math.min(o.w,o.h)/2-E)/(g.length+w?1:0);E=Math.min(E,x)}for(var S=0,P=0;P<g.length;P++){var _=g[P],D=void 0===t.sweep?2*Math.PI-2*Math.PI/_.length:t.sweep,T=_.dTheta=D/Math.max(1,_.length-1);if(_.length>1&&t.avoidOverlap){var z=Math.cos(T)-Math.cos(0),I=Math.sin(T)-Math.sin(0),N=Math.sqrt(E*E/(z*z+I*I));S=Math.max(N,S)}_.r=S,S+=E}if(t.equidistant){for(var M=0,q=0,A=0;A<g.length;A++)M=Math.max(M,g[A].r-q);q=0;for(var X=0;X<g.length;X++){var F=g[X];0===X&&(q=F.r),F.r=q,q+=M}}for(var V={},Y=0;Y<g.length;Y++)for(var $=g[Y],re=$.dTheta,te=$.r,de=0;de<$.length;de++){var oe=$[de],ye=t.startAngle+(n?1:-1)*re*de,ke={x:l+te*Math.cos(ye),y:s+te*Math.sin(ye)};V[oe.node.id()]=ke}return a.nodes().layoutPositions(this,t,function(Q){var le=Q.id();return V[le]}),this};var hd={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Ia(e){this.options=me({},hd,e),this.options.layout=this}Ia.prototype.run=function(){var e=this.options,t=e.cy,n=this;n.stopped=!1,!0!==e.animate&&!1!==e.animate||n.emit({type:"layoutstart",layout:n}),Ys=!0===e.debug;var r=pd(t,n,e);Ys&&(void 0)(r),e.randomize&&vd(r);var a=_e(),i=function(){yd(r,t,e),!0===e.fit&&t.fit(e.padding)},o=function(c){return!(n.stopped||c>=e.numIter||(md(r,e),r.temperature=r.temperature*e.coolingFactor,r.temperature<e.minTemp))},l=function(){if(!0===e.animate||!1===e.animate)i(),n.one("layoutstop",e.stop),n.emit({type:"layoutstop",layout:n});else{var c=e.eles.nodes(),d=Ws(r,e,c);c.layoutPositions(n,e,d)}},s=0,u=!0;if(!0===e.animate)!function c(){for(var d=0;u&&d<e.refresh;)u=o(s),s++,d++;u?(_e()-a>=e.animationThreshold&&i(),Be(c)):(Gs(r,e),l())}();else{for(;u;)u=o(s),s++;Gs(r,e),l()}return this},Ia.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},Ia.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var pd=function(e,t,n){for(var r=n.eles.edges(),a=n.eles.nodes(),i={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:a.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:r.size(),temperature:n.initialTemp,clientWidth:e.width(),clientHeight:e.width(),boundingBox:At(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()})},o=n.eles.components(),l={},s=0;s<o.length;s++)for(var u=o[s],c=0;c<u.length;c++)l[u[c].id()]=s;for(s=0;s<i.nodeSize;s++){var d=(m=a[s]).layoutDimensions(n);(M={}).isLocked=m.locked(),M.id=m.data("id"),M.parentId=m.data("parent"),M.cmptId=l[m.id()],M.children=[],M.positionX=m.position("x"),M.positionY=m.position("y"),M.offsetX=0,M.offsetY=0,M.height=d.w,M.width=d.h,M.maxX=M.positionX+M.width/2,M.minX=M.positionX-M.width/2,M.maxY=M.positionY+M.height/2,M.minY=M.positionY-M.height/2,M.padLeft=parseFloat(m.style("padding")),M.padRight=parseFloat(m.style("padding")),M.padTop=parseFloat(m.style("padding")),M.padBottom=parseFloat(m.style("padding")),M.nodeRepulsion=H(n.nodeRepulsion)?n.nodeRepulsion(m):n.nodeRepulsion,i.layoutNodes.push(M),i.idToIndex[M.id]=s}var p=[],f=0,h=-1,v=[];for(s=0;s<i.nodeSize;s++){var m,g=(m=i.layoutNodes[s]).parentId;null!=g?i.layoutNodes[i.idToIndex[g]].children.push(m.id):(p[++h]=m.id,v.push(m.id))}for(i.graphSet.push(v);f<=h;){var y=p[f++],C=i.layoutNodes[i.idToIndex[y]].children;if(C.length>0)for(i.graphSet.push(C),s=0;s<C.length;s++)p[++h]=C[s]}for(s=0;s<i.graphSet.length;s++){var E=i.graphSet[s];for(c=0;c<E.length;c++)i.indexToGraph[i.idToIndex[E[c]]]=s}for(s=0;s<i.edgeSize;s++){var x=r[s],S={};S.id=x.data("id"),S.sourceId=x.data("source"),S.targetId=x.data("target");var P=H(n.idealEdgeLength)?n.idealEdgeLength(x):n.idealEdgeLength,_=H(n.edgeElasticity)?n.edgeElasticity(x):n.edgeElasticity,D=i.idToIndex[S.sourceId],T=i.idToIndex[S.targetId];if(i.indexToGraph[D]!=i.indexToGraph[T]){for(var z=fd(S.sourceId,S.targetId,i),I=i.graphSet[z],N=0,M=i.layoutNodes[D];-1===I.indexOf(M.id);)M=i.layoutNodes[i.idToIndex[M.parentId]],N++;for(M=i.layoutNodes[T];-1===I.indexOf(M.id);)M=i.layoutNodes[i.idToIndex[M.parentId]],N++;P*=N*n.nestingFactor}S.idealLength=P,S.elasticity=_,i.layoutEdges.push(S)}return i},fd=function(e,t,n){var r=gd(e,t,0,n);return 2>r.count?0:r.graph},gd=function e(t,n,r,a){var i=a.graphSet[r];if(-1<i.indexOf(t)&&-1<i.indexOf(n))return{count:2,graph:r};for(var o=0,l=0;l<i.length;l++){var c=a.layoutNodes[a.idToIndex[i[l]]].children;if(0!==c.length){var d=e(t,n,a.indexToGraph[a.idToIndex[c[0]]],a);if(0!==d.count){if(1!==d.count)return d;if(2==++o)break}}}return{count:o,graph:r}},vd=function(e,t){for(var n=e.clientWidth,r=e.clientHeight,a=0;a<e.nodeSize;a++){var i=e.layoutNodes[a];0!==i.children.length||i.isLocked||(i.positionX=Math.random()*n,i.positionY=Math.random()*r)}},Ws=function(e,t,n){var r=e.boundingBox,a={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(n.forEach(function(i){var o=e.layoutNodes[e.idToIndex[i.data("id")]];a.x1=Math.min(a.x1,o.positionX),a.x2=Math.max(a.x2,o.positionX),a.y1=Math.min(a.y1,o.positionY),a.y2=Math.max(a.y2,o.positionY)}),a.w=a.x2-a.x1,a.h=a.y2-a.y1),function(i,o){var l=e.layoutNodes[e.idToIndex[i.data("id")]];return t.boundingBox?{x:r.x1+(l.positionX-a.x1)/a.w*r.w,y:r.y1+(l.positionY-a.y1)/a.h*r.h}:{x:l.positionX,y:l.positionY}}},yd=function(e,t,n){var r=n.layout,a=n.eles.nodes(),i=Ws(e,n,a);a.positions(i),!0!==e.ready&&(e.ready=!0,r.one("layoutready",n.ready),r.emit({type:"layoutready",layout:this}))},md=function(e,t,n){bd(e,t),Ed(e),kd(e,t),Cd(e),Sd(e)},bd=function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var r=e.graphSet[n],a=r.length,i=0;i<a;i++)for(var o=e.layoutNodes[e.idToIndex[r[i]]],l=i+1;l<a;l++)xd(o,e.layoutNodes[e.idToIndex[r[l]]],e,t)},Ks=function(e){return-e+2*e*Math.random()},xd=function(e,t,n,r){if(e.cmptId===t.cmptId||n.isCompound){var a=t.positionX-e.positionX,i=t.positionY-e.positionY;0===a&&0===i&&(a=Ks(1),i=Ks(1));var o=wd(e,t,a,i);if(o>0)var l=(u=r.nodeOverlap*o)*a/(v=Math.sqrt(a*a+i*i)),s=u*i/v;else{var u,c=Ra(e,a,i),d=Ra(t,-1*a,-1*i),p=d.x-c.x,f=d.y-c.y,h=p*p+f*f,v=Math.sqrt(h);l=(u=(e.nodeRepulsion+t.nodeRepulsion)/h)*p/v,s=u*f/v}e.isLocked||(e.offsetX-=l,e.offsetY-=s),t.isLocked||(t.offsetX+=l,t.offsetY+=s)}},wd=function(e,t,n,r){if(n>0)var a=e.maxX-t.minX;else a=t.maxX-e.minX;if(r>0)var i=e.maxY-t.minY;else i=t.maxY-e.minY;return a>=0&&i>=0?Math.sqrt(a*a+i*i):0},Ra=function(e,t,n){var r=e.positionX,a=e.positionY,i=e.height||1,o=e.width||1,l=n/t,s=i/o,u={};return 0===t&&0<n||0===t&&0>n?(u.x=r,u.y=a+i/2,u):0<t&&-1*s<=l&&l<=s?(u.x=r+o/2,u.y=a+o*n/2/t,u):0>t&&-1*s<=l&&l<=s?(u.x=r-o/2,u.y=a-o*n/2/t,u):0<n&&(l<=-1*s||l>=s)?(u.x=r+i*t/2/n,u.y=a+i/2,u):(0>n&&(l<=-1*s||l>=s)&&(u.x=r-i*t/2/n,u.y=a-i/2),u)},Ed=function(e,t){for(var n=0;n<e.edgeSize;n++){var r=e.layoutEdges[n],i=e.layoutNodes[e.idToIndex[r.sourceId]],l=e.layoutNodes[e.idToIndex[r.targetId]],s=l.positionX-i.positionX,u=l.positionY-i.positionY;if(0!==s||0!==u){var c=Ra(i,s,u),d=Ra(l,-1*s,-1*u),p=d.x-c.x,f=d.y-c.y,h=Math.sqrt(p*p+f*f),v=Math.pow(r.idealLength-h,2)/r.elasticity;if(0!==h)var m=v*p/h,g=v*f/h;else m=0,g=0;i.isLocked||(i.offsetX+=m,i.offsetY+=g),l.isLocked||(l.offsetX-=m,l.offsetY-=g)}}},kd=function(e,t){if(0!==t.gravity)for(var n=0;n<e.graphSet.length;n++){var r=e.graphSet[n],a=r.length;if(0===n)var i=e.clientHeight/2,o=e.clientWidth/2;else{var s=e.layoutNodes[e.idToIndex[e.layoutNodes[e.idToIndex[r[0]]].parentId]];i=s.positionX,o=s.positionY}for(var u=0;u<a;u++){var c=e.layoutNodes[e.idToIndex[r[u]]];if(!c.isLocked){var d=i-c.positionX,p=o-c.positionY,f=Math.sqrt(d*d+p*p);if(f>1){var v=t.gravity*p/f;c.offsetX+=t.gravity*d/f,c.offsetY+=v}}}}},Cd=function(e,t){var n=[],r=0,a=-1;for(n.push.apply(n,e.graphSet[0]),a+=e.graphSet[0].length;r<=a;){var i=n[r++],l=e.layoutNodes[e.idToIndex[i]],s=l.children;if(0<s.length&&!l.isLocked){for(var u=l.offsetX,c=l.offsetY,d=0;d<s.length;d++){var p=e.layoutNodes[e.idToIndex[s[d]]];p.offsetX+=u,p.offsetY+=c,n[++a]=s[d]}l.offsetX=0,l.offsetY=0}}},Sd=function(e,t){for(var n=0;n<e.nodeSize;n++)0<(a=e.layoutNodes[n]).children.length&&(a.maxX=void 0,a.minX=void 0,a.maxY=void 0,a.minY=void 0);for(n=0;n<e.nodeSize;n++)if(!(0<(a=e.layoutNodes[n]).children.length||a.isLocked)){var r=Pd(a.offsetX,a.offsetY,e.temperature);a.positionX+=r.x,a.positionY+=r.y,a.offsetX=0,a.offsetY=0,a.minX=a.positionX-a.width,a.maxX=a.positionX+a.width,a.minY=a.positionY-a.height,a.maxY=a.positionY+a.height,_d(a,e)}for(n=0;n<e.nodeSize;n++){var a;0<(a=e.layoutNodes[n]).children.length&&!a.isLocked&&(a.positionX=(a.maxX+a.minX)/2,a.positionY=(a.maxY+a.minY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY)}},Pd=function(e,t,n){var r=Math.sqrt(e*e+t*t);if(r>n)var a={x:n*e/r,y:n*t/r};else a={x:e,y:t};return a},_d=function e(t,n){var r=t.parentId;if(null!=r){var a=n.layoutNodes[n.idToIndex[r]],i=!1;return(null==a.maxX||t.maxX+a.padRight>a.maxX)&&(a.maxX=t.maxX+a.padRight,i=!0),(null==a.minX||t.minX-a.padLeft<a.minX)&&(a.minX=t.minX-a.padLeft,i=!0),(null==a.maxY||t.maxY+a.padBottom>a.maxY)&&(a.maxY=t.maxY+a.padBottom,i=!0),(null==a.minY||t.minY-a.padTop<a.minY)&&(a.minY=t.minY-a.padTop,i=!0),i?e(a,n):void 0}},Gs=function(e,t){for(var n=e.layoutNodes,r=[],a=0;a<n.length;a++){var i=n[a],o=i.cmptId;(r[o]=r[o]||[]).push(i)}var l=0;for(a=0;a<r.length;a++)if(v=r[a]){v.x1=1/0,v.x2=-1/0,v.y1=1/0,v.y2=-1/0;for(var s=0;s<v.length;s++){var u=v[s];v.x1=Math.min(v.x1,u.positionX-u.width/2),v.x2=Math.max(v.x2,u.positionX+u.width/2),v.y1=Math.min(v.y1,u.positionY-u.height/2),v.y2=Math.max(v.y2,u.positionY+u.height/2)}v.w=v.x2-v.x1,v.h=v.y2-v.y1,l+=v.w*v.h}r.sort(function(m,g){return g.w*g.h-m.w*m.h});var c=0,d=0,p=0,f=0,h=Math.sqrt(l)*e.clientWidth/e.clientHeight;for(a=0;a<r.length;a++){var v;if(v=r[a]){for(s=0;s<v.length;s++)(u=v[s]).isLocked||(u.positionX+=c-v.x1,u.positionY+=d-v.y1);c+=v.w+t.componentSpacing,p+=v.w+t.componentSpacing,f=Math.max(f,v.h),p>h&&(d+=f+t.componentSpacing,c=0,p=0,f=0)}}},Md={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function Zs(e){this.options=me({},Md,e)}Zs.prototype.run=function(){var e=this.options,t=e,n=e.cy,r=t.eles,a=r.nodes().not(":parent");t.sort&&(a=a.sort(t.sort));var i=At(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(0===i.h||0===i.w)r.nodes().layoutPositions(this,t,function(V){return{x:i.x1,y:i.y1}});else{var o=a.size(),l=Math.sqrt(o*i.h/i.w),s=Math.round(l),u=Math.round(i.w/i.h*l),c=function(V){if(null==V)return Math.min(s,u);Math.min(s,u)==s?s=V:u=V},d=function(V){if(null==V)return Math.max(s,u);Math.max(s,u)==s?s=V:u=V},p=t.rows,f=null!=t.cols?t.cols:t.columns;if(null!=p&&null!=f)s=p,u=f;else if(null!=p&&null==f)s=p,u=Math.ceil(o/s);else if(null==p&&null!=f)u=f,s=Math.ceil(o/u);else if(u*s>o){var h=c(),v=d();(h-1)*v>=o?c(h-1):(v-1)*h>=o&&d(v-1)}else for(;u*s<o;){var m=c(),g=d();(g+1)*m>=o?d(g+1):c(m+1)}var y=i.w/u,b=i.h/s;if(t.condense&&(y=0,b=0),t.avoidOverlap)for(var C=0;C<a.length;C++){var E=a[C],w=E._private.position;null!=w.x&&null!=w.y||(w.x=0,w.y=0);var x=E.layoutDimensions(t),S=t.avoidOverlapPadding,_=x.h+S;y=Math.max(y,x.w+S),b=Math.max(b,_)}for(var D={},T=function(V,Y){return!!D["c-"+V+"-"+Y]},z=function(V,Y){D["c-"+V+"-"+Y]=!0},I=0,N=0,M=function(){++N>=u&&(N=0,I++)},q={},A=0;A<a.length;A++){var L=a[A],X=t.position(L);if(X&&(void 0!==X.row||void 0!==X.col)){var F={row:X.row,col:X.col};if(void 0===F.col)for(F.col=0;T(F.row,F.col);)F.col++;else if(void 0===F.row)for(F.row=0;T(F.row,F.col);)F.row++;q[L.id()]=F,z(F.row,F.col)}}a.layoutPositions(this,t,function(V,Y){var $,re;if(V.locked()||V.isParent())return!1;var te=q[V.id()];if(te)$=te.col*y+y/2+i.x1,re=te.row*b+b/2+i.y1;else{for(;T(I,N);)M();$=N*y+y/2+i.x1,re=I*b+b/2+i.y1,z(I,N),M()}return{x:$,y:re}})}return this};var Dd={ready:function(){},stop:function(){}};function Ri(e){this.options=me({},Dd,e)}Ri.prototype.run=function(){var e=this.options,t=e.eles;return this.emit("layoutstart"),t.nodes().positions(function(){return{x:0,y:0}}),this.one("layoutready",e.ready),this.emit("layoutready"),this.one("layoutstop",e.stop),this.emit("layoutstop"),this},Ri.prototype.stop=function(){return this};var Td={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function Us(e){this.options=me({},Td,e)}Us.prototype.run=function(){var e=this.options,t=e.eles.nodes(),n=H(e.positions);return t.layoutPositions(this,e,function(r,a){var i=function(o){if(null==e.positions)return{x:(s=o.position()).x,y:s.y};var s;if(n)return e.positions(o);var l=e.positions[o._private.data.id];return null==l?null:l}(r);return!r.locked()&&null!=i&&i}),this};var zd={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function $s(e){this.options=me({},zd,e)}$s.prototype.run=function(){var e=this.options,t=e.cy,n=e.eles,r=At(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});return n.nodes().layoutPositions(this,e,function(a,i){return{x:r.x1+Math.round(Math.random()*r.w),y:r.y1+Math.round(Math.random()*r.h)}}),this};var Bd=[{name:"breadthfirst",impl:qs},{name:"circle",impl:Xs},{name:"concentric",impl:Hs},{name:"cose",impl:Ia},{name:"grid",impl:Zs},{name:"null",impl:Ri},{name:"preset",impl:Us},{name:"random",impl:$s}];function Qs(e){this.options=e,this.notifications=0}var Js=function(){},el=function(){throw new Error("A headless instance can not render images")};Qs.prototype={recalculateRenderedStyle:Js,notify:function(){this.notifications++},init:Js,isHeadless:function(){return!0},png:el,jpg:el};var Nd={arrowShapeWidth:.3,registerArrowShapes:function(){var e=this.arrowShapes={},t=this,n=function(s,u,c,d,p,f,h){return p.x-c/2-h<=s&&s<=p.x+c/2+h&&p.y-c/2-h<=u&&u<=p.y+c/2+h},r=function(s,u,c,d,p){var f=s*Math.cos(d)-u*Math.sin(d),h=(s*Math.sin(d)+u*Math.cos(d))*c;return{x:f*c+p.x,y:h+p.y}},a=function(s,u,c,d){for(var p=[],f=0;f<s.length;f+=2)p.push(r(s[f],s[f+1],u,c,d));return p},i=function(s){for(var u=[],c=0;c<s.length;c++){var d=s[c];u.push(d.x,d.y)}return u},o=function(s){return s.pstyle("width").pfValue*s.pstyle("arrow-scale").pfValue*2},l=function(s,u){ie(u)&&(u=e[u]),e[s]=me({name:s,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(c,d,p,f,h,v){var m=i(a(this.points,p+2*v,f,h));return Ft(c,d,m)},roughCollide:n,draw:function(c,d,p,f){var h=a(this.points,d,p,f);t.arrowShapeImpl("polygon")(c,h)},spacing:function(c){return 0},gap:o},u)};l("none",{collide:hn,roughCollide:hn,draw:er,spacing:Nn,gap:Nn}),l("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),l("arrow","triangle"),l("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(s,u,c,d,p){var f=a(this.points,u,c,d),h=this.controlPoint,v=r(h[0],h[1],u,c,d);t.arrowShapeImpl(this.name)(s,f,v)},gap:function(s){return.8*o(s)}}),l("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(s,u,c,d,p,f,h){var v=i(a(this.points,c+2*h,d,p)),m=i(a(this.pointsTee,c+2*h,d,p));return Ft(s,u,v)||Ft(s,u,m)},draw:function(s,u,c,d,p){var f=a(this.points,u,c,d),h=a(this.pointsTee,u,c,d);t.arrowShapeImpl(this.name)(s,f,h)}}),l("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(s,u,c,d,p,f,h){var v=p,m=Math.pow(v.x-s,2)+Math.pow(v.y-u,2)<=Math.pow((c+2*h)*this.radius,2),g=i(a(this.points,c+2*h,d,p));return Ft(s,u,g)||m},draw:function(s,u,c,d,p){var f=a(this.pointsTr,u,c,d);t.arrowShapeImpl(this.name)(s,f,d.x,d.y,this.radius*u)},spacing:function(s){return t.getArrowWidth(s.pstyle("width").pfValue,s.pstyle("arrow-scale").value)*this.radius}}),l("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(s,u){var c=this.baseCrossLinePts.slice(),d=u/s;return c[3]=c[3]-d,c[5]=c[5]-d,c},collide:function(s,u,c,d,p,f,h){var v=i(a(this.points,c+2*h,d,p)),m=i(a(this.crossLinePts(c,f),c+2*h,d,p));return Ft(s,u,v)||Ft(s,u,m)},draw:function(s,u,c,d,p){var f=a(this.points,u,c,d),h=a(this.crossLinePts(u,p),u,c,d);t.arrowShapeImpl(this.name)(s,f,h)}}),l("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(s){return.525*o(s)}}),l("circle",{radius:.15,collide:function(s,u,c,d,p,f,h){var v=p;return Math.pow(v.x-s,2)+Math.pow(v.y-u,2)<=Math.pow((c+2*h)*this.radius,2)},draw:function(s,u,c,d,p){t.arrowShapeImpl(this.name)(s,d.x,d.y,this.radius*u)},spacing:function(s){return t.getArrowWidth(s.pstyle("width").pfValue,s.pstyle("arrow-scale").value)*this.radius}}),l("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(s){return 1},gap:function(s){return 1}}),l("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),l("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(s){return s.pstyle("width").pfValue*s.pstyle("arrow-scale").value}}),l("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(s){return.95*s.pstyle("width").pfValue*s.pstyle("arrow-scale").value}})}},Od={projectIntoViewport:function(e,t){var n=this.cy,r=this.findContainerClientCoords(),a=r[0],i=r[1],o=r[4],l=n.pan(),s=n.zoom();return[((e-a)/o-l.x)/s,((t-i)/o-l.y)/s]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var e=this.container,t=e.getBoundingClientRect(),n=U.getComputedStyle(e),r=function(E){return parseFloat(n.getPropertyValue(E))},a=r("padding-left"),i=r("padding-right"),o=r("padding-top"),l=r("padding-bottom"),s=r("border-left-width"),u=r("border-right-width"),c=r("border-top-width"),d=(r("border-bottom-width"),e.clientWidth);return this.containerBB=[t.left+a+s,t.top+o+c,d-(a+i),e.clientHeight-(o+l),t.width/(d+(s+u))]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(e,t,n,r){return this.findNearestElements(e,t,n,r)[0]},findNearestElements:function(e,t,n,r){var a,i,o=this,l=this,s=l.getCachedZSortedEles(),u=[],c=l.cy.zoom(),d=l.cy.hasCompoundNodes(),p=(r?24:8)/c,f=(r?8:2)/c,h=(r?8:2)/c,v=1/0;function m(x,S){if(x.isNode()){if(i)return;i=x,u.push(x)}if(x.isEdge()&&(null==S||S<v))if(a){if(a.pstyle("z-compound-depth").value===x.pstyle("z-compound-depth").value&&a.pstyle("z-compound-depth").value===x.pstyle("z-compound-depth").value)for(var P=0;P<u.length;P++)if(u[P].isEdge()){u[P]=x,a=x,v=null!=S?S:v;break}}else u.push(x),a=x,v=null!=S?S:v}function g(x){var S=x.outerWidth()+2*f,P=x.outerHeight()+2*f,_=S/2,D=P/2,T=x.position();if(T.x-_<=e&&e<=T.x+_&&T.y-D<=t&&t<=T.y+D&&l.nodeShapes[o.getNodeShape(x)].checkPoint(e,t,0,S,P,T.x,T.y))return m(x,0),!0}function y(x){var S,P=x._private,_=P.rscratch,D=x.pstyle("width").pfValue,T=x.pstyle("arrow-scale").value,z=D/2+p,I=z*z,N=2*z,M=P.source,q=P.target;if("segments"===_.edgeType||"straight"===_.edgeType||"haystack"===_.edgeType){for(var A=_.allpts,L=0;L+3<A.length;L+=2)if(Zl(e,t,A[L],A[L+1],A[L+2],A[L+3],N)&&I>(S=Ql(e,t,A[L],A[L+1],A[L+2],A[L+3])))return m(x,S),!0}else if("bezier"===_.edgeType||"multibezier"===_.edgeType||"self"===_.edgeType||"compound"===_.edgeType)for(A=_.allpts,L=0;L+5<_.allpts.length;L+=4)if(Ul(e,t,A[L],A[L+1],A[L+2],A[L+3],A[L+4],A[L+5],N)&&I>(S=$l(e,t,A[L],A[L+1],A[L+2],A[L+3],A[L+4],A[L+5])))return m(x,S),!0;M=M||P.source,q=q||P.target;var X=o.getArrowWidth(D,T),F=[{name:"source",x:_.arrowStartX,y:_.arrowStartY,angle:_.srcArrowAngle},{name:"target",x:_.arrowEndX,y:_.arrowEndY,angle:_.tgtArrowAngle},{name:"mid-source",x:_.midX,y:_.midY,angle:_.midsrcArrowAngle},{name:"mid-target",x:_.midX,y:_.midY,angle:_.midtgtArrowAngle}];for(L=0;L<F.length;L++){var V=F[L],Y=l.arrowShapes[x.pstyle(V.name+"-arrow-shape").value],$=x.pstyle("width").pfValue;if(Y.roughCollide(e,t,X,V.angle,{x:V.x,y:V.y},$,p)&&Y.collide(e,t,X,V.angle,{x:V.x,y:V.y},$,p))return m(x),!0}d&&u.length>0&&(g(M),g(q))}function b(x,S,P){return Zt(x,S,P)}function C(x,S){var P,_=x._private,D=h;P=S?S+"-":"",x.boundingBox();var T=_.labelBounds[S||"main"],z=x.pstyle(P+"label").value;if("yes"===x.pstyle("text-events").strValue&&z){var I=b(_.rscratch,"labelX",S),N=b(_.rscratch,"labelY",S),M=b(_.rscratch,"labelAngle",S),q=x.pstyle(P+"text-margin-x").pfValue,A=x.pstyle(P+"text-margin-y").pfValue,L=T.x1-D-q,X=T.x2+D-q,F=T.y1-D-A,V=T.y2+D-A;if(M){var Y=Math.cos(M),$=Math.sin(M),re=function(Q,le){return{x:(Q-=I)*Y-(le-=N)*$+I,y:Q*$+le*Y+N}},te=re(L,F),de=re(L,V),oe=re(X,F),ye=re(X,V);if(Ft(e,t,[te.x+q,te.y+A,oe.x+q,oe.y+A,ye.x+q,ye.y+A,de.x+q,de.y+A]))return m(x),!0}else if(ar(T,e,t))return m(x),!0}}n&&(s=s.interactive);for(var E=s.length-1;E>=0;E--){var w=s[E];w.isNode()?g(w)||C(w):y(w)||C(w)||C(w,"source")||C(w,"target")}return u},getAllInBox:function(e,t,n,r){for(var i,o=this.getCachedZSortedEles().interactive,l=[],s=Math.min(e,n),u=Math.max(e,n),c=Math.min(t,r),d=Math.max(t,r),p=At({x1:e=s,y1:t=c,x2:n=u,y2:r=d}),f=0;f<o.length;f++){var h=o[f];if(h.isNode()){var v=h,m=v.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});Ya(p,m)&&!Qi(m,p)&&l.push(v)}else{var g=h,y=g._private,b=y.rscratch;if(null!=b.startX&&null!=b.startY&&!ar(p,b.startX,b.startY)||null!=b.endX&&null!=b.endY&&!ar(p,b.endX,b.endY))continue;if("bezier"===b.edgeType||"multibezier"===b.edgeType||"self"===b.edgeType||"compound"===b.edgeType||"segments"===b.edgeType||"haystack"===b.edgeType){for(var C=y.rstyle.bezierPts||y.rstyle.linePts||y.rstyle.haystackPts,E=!0,w=0;w<C.length;w++)if(!ar(p,(i=C[w]).x,i.y)){E=!1;break}E&&l.push(g)}else"haystack"!==b.edgeType&&"straight"!==b.edgeType||l.push(g)}}return l}},Li={calculateArrowAngles:function(e){var t,n,r,a,i,o,l=e._private.rscratch,s="haystack"===l.edgeType,u="bezier"===l.edgeType,c="multibezier"===l.edgeType,d="segments"===l.edgeType,p="compound"===l.edgeType,f="self"===l.edgeType;s?(r=l.haystackPts[0],a=l.haystackPts[1],i=l.haystackPts[2],o=l.haystackPts[3]):(r=l.arrowStartX,a=l.arrowStartY,i=l.arrowEndX,o=l.arrowEndY),v=l.midX,m=l.midY,d?(t=r-l.segpts[0],n=a-l.segpts[1]):c||p||f||u?(t=r-kt((h=l.allpts)[0],h[2],h[4],.1),n=a-kt(h[1],h[3],h[5],.1)):(t=r-v,n=a-m),l.srcArrowAngle=Jr(t,n);var v=l.midX,m=l.midY;if(s&&(v=(r+i)/2,m=(a+o)/2),t=i-r,n=o-a,d)if((h=l.allpts).length/2%2==0){var g=(y=h.length/2)-2;t=h[y]-h[g],n=h[y+1]-h[g+1]}else{g=(y=h.length/2-1)-2;var y,b=y+2;t=h[y]-h[g],n=h[y+1]-h[g+1]}else if(c||p||f){var C,E,w,x,h=l.allpts;if(l.ctrlpts.length/2%2==0){var S=2+(P=2+(_=h.length/2-1));C=kt(h[_],h[P],h[S],0),E=kt(h[_+1],h[P+1],h[S+1],0),w=kt(h[_],h[P],h[S],1e-4),x=kt(h[_+1],h[P+1],h[S+1],1e-4)}else{var P,_;S=2+(P=h.length/2-1),C=kt(h[_=P-2],h[P],h[S],.4999),E=kt(h[_+1],h[P+1],h[S+1],.4999),w=kt(h[_],h[P],h[S],.5),x=kt(h[_+1],h[P+1],h[S+1],.5)}t=w-C,n=x-E}if(l.midtgtArrowAngle=Jr(t,n),l.midDispX=t,l.midDispY=n,t*=-1,n*=-1,d&&((h=l.allpts).length/2%2==0||(t=-(h[b=2+(y=h.length/2-1)]-h[y]),n=-(h[b+1]-h[y+1]))),l.midsrcArrowAngle=Jr(t,n),d)t=i-l.segpts[l.segpts.length-2],n=o-l.segpts[l.segpts.length-1];else if(c||p||f||u){var D=(h=l.allpts).length;t=i-kt(h[D-6],h[D-4],h[D-2],.9),n=o-kt(h[D-5],h[D-3],h[D-1],.9)}else t=i-v,n=o-m;l.tgtArrowAngle=Jr(t,n)}};Li.getArrowWidth=Li.getArrowHeight=function(e,t){var n=this.arrowWidthCache=this.arrowWidthCache||{},r=n[e+", "+t];return r||(r=Math.max(Math.pow(13.37*e,.9),29)*t,n[e+", "+t]=r,r)};var Lt={};function tl(e){var t=[];if(null!=e){for(var n=0;n<e.length;n+=2)t.push({x:e[n],y:e[n+1]});return t}}Lt.findHaystackPoints=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n._private,a=r.rscratch;if(!a.haystack){var i=2*Math.random()*Math.PI;a.source={x:Math.cos(i),y:Math.sin(i)},i=2*Math.random()*Math.PI,a.target={x:Math.cos(i),y:Math.sin(i)}}var o=r.source,l=r.target,s=o.position(),u=l.position(),c=o.width(),d=l.width(),p=o.height(),f=l.height(),h=n.pstyle("haystack-radius").value/2;a.haystackPts=a.allpts=[a.source.x*c*h+s.x,a.source.y*p*h+s.y,a.target.x*d*h+u.x,a.target.y*f*h+u.y],a.midX=(a.allpts[0]+a.allpts[2])/2,a.midY=(a.allpts[1]+a.allpts[3])/2,a.edgeType="haystack",a.haystack=!0,this.storeEdgeProjections(n),this.calculateArrowAngles(n),this.recalculateEdgeLabelProjections(n),this.calculateLabelAngles(n)}},Lt.findSegmentsPoints=function(e,t){var n=e._private.rscratch,r=t.posPts,a=t.intersectionPts,i=t.vectorNormInverse,o=e.pstyle("edge-distances").value,l=e.pstyle("segment-weights"),s=e.pstyle("segment-distances"),u=Math.min(l.pfValue.length,s.pfValue.length);n.edgeType="segments",n.segpts=[];for(var c=0;c<u;c++){var d=l.pfValue[c],p=s.pfValue[c],f=1-d,v="node-position"===o?r:a,m={x:v.x1*f+v.x2*d,y:v.y1*f+v.y2*d};n.segpts.push(m.x+i.x*p,m.y+i.y*p)}},Lt.findLoopPoints=function(e,t,n,r){var a=e._private.rscratch,i=t.dirCounts,o=t.srcPos,l=e.pstyle("control-point-distances"),s=l?l.pfValue[0]:void 0,u=e.pstyle("loop-direction").pfValue,c=e.pstyle("loop-sweep").pfValue,d=e.pstyle("control-point-step-size").pfValue;a.edgeType="self";var p=n,f=d;r&&(p=0,f=s);var h=u-Math.PI/2,v=h-c/2,m=h+c/2,g=String(u+"_"+c);p=void 0===i[g]?i[g]=0:++i[g],a.ctrlpts=[o.x+1.4*Math.cos(v)*f*(p/3+1),o.y+1.4*Math.sin(v)*f*(p/3+1),o.x+1.4*Math.cos(m)*f*(p/3+1),o.y+1.4*Math.sin(m)*f*(p/3+1)]},Lt.findCompoundLoopPoints=function(e,t,n,r){var a=e._private.rscratch;a.edgeType="compound";var i=t.srcPos,o=t.tgtPos,l=t.srcW,s=t.srcH,u=t.tgtW,c=t.tgtH,d=e.pstyle("control-point-step-size").pfValue,p=e.pstyle("control-point-distances"),h=n,v=d;r&&(h=0,v=p?p.pfValue[0]:void 0);var m={x:i.x-l/2,y:i.y-s/2},g={x:o.x-u/2,y:o.y-c/2},y={x:Math.min(m.x,g.x),y:Math.min(m.y,g.y)},b=Math.max(.5,Math.log(.01*l)),C=Math.max(.5,Math.log(.01*u));a.ctrlpts=[y.x,y.y-(1+Math.pow(50,1.12)/100)*v*(h/3+1)*b,y.x-(1+Math.pow(50,1.12)/100)*v*(h/3+1)*C,y.y]},Lt.findStraightEdgePoints=function(e){e._private.rscratch.edgeType="straight"},Lt.findBezierPoints=function(e,t,n,r,a){var i=e._private.rscratch,o=t.vectorNormInverse,l=t.posPts,s=t.intersectionPts,u=e.pstyle("edge-distances").value,c=e.pstyle("control-point-step-size").pfValue,d=e.pstyle("control-point-distances"),p=e.pstyle("control-point-weights"),f=d&&p?Math.min(d.value.length,p.value.length):1,h=d?d.pfValue[0]:void 0,v=p.value[0],m=r;i.edgeType=m?"multibezier":"bezier",i.ctrlpts=[];for(var g=0;g<f;g++){var b,y=(.5-t.eles.length/2+n)*c*(a?-1:1),C=Ui(y);m&&(h=d?d.pfValue[g]:c,v=p.value[g]);var E=void 0!==(b=r?h:void 0!==h?C*h:void 0)?b:y,w=1-v,S="node-position"===u?l:s,P={x:S.x1*w+S.x2*v,y:S.y1*w+S.y2*v};i.ctrlpts.push(P.x+o.x*E,P.y+o.y*E)}},Lt.findTaxiPoints=function(e,t){var n=e._private.rscratch;n.edgeType="segments";var r=t.posPts,a=t.srcW,i=t.srcH,o=t.tgtW,l=t.tgtH,s="node-position"!==e.pstyle("edge-distances").value,u=e.pstyle("taxi-direction").value,c=u,d=e.pstyle("taxi-turn"),p="%"===d.units,f=d.pfValue,h=f<0,v=e.pstyle("taxi-turn-min-distance").pfValue,g=s?(i+l)/2:0,y=r.x2-r.x1,b=r.y2-r.y1,C=function(ee,K){return ee>0?Math.max(ee-K,0):Math.min(ee+K,0)},E=C(y,s?(a+o)/2:0),w=C(b,g),x=!1;"auto"===c?u=Math.abs(E)>Math.abs(w)?"horizontal":"vertical":"upward"===c||"downward"===c?(u="vertical",x=!0):"leftward"!==c&&"rightward"!==c||(u="horizontal",x=!0);var S,P="vertical"===u,_=P?w:E,D=P?b:y,T=Ui(D),z=!1;x&&(p||h)||!("downward"===c&&D<0||"upward"===c&&D>0||"leftward"===c&&D>0||"rightward"===c&&D<0)||(_=(T*=-1)*Math.abs(_),z=!0);var I=function(ee){return Math.abs(ee)<v||Math.abs(ee)>=Math.abs(_)},N=I(S=p?(f<0?1+f:f)*_:(f<0?_:0)+f*T),M=I(Math.abs(_)-Math.abs(S));if(!N&&!M||z)if(P){var pe=r.y1+S+(s?i/2*T:0);n.segpts=[r.x1,pe,r.x2,pe]}else{var R=r.x1+S+(s?a/2*T:0);n.segpts=[R,r.y1,R,r.y2]}else if(P){var q=Math.abs(D)<=i/2,A=Math.abs(y)<=o/2;if(q){var L=(r.x1+r.x2)/2;n.segpts=[L,r.y1,L,r.y2]}else if(A){var V=(r.y1+r.y2)/2;n.segpts=[r.x1,V,r.x2,V]}else n.segpts=[r.x1,r.y2]}else{var re=Math.abs(D)<=a/2,te=Math.abs(b)<=l/2;if(re){var de=(r.y1+r.y2)/2;n.segpts=[r.x1,de,r.x2,de]}else if(te){var ke=(r.x1+r.x2)/2;n.segpts=[ke,r.y1,ke,r.y2]}else n.segpts=[r.x2,r.y1]}},Lt.tryToCorrectInvalidPoints=function(e,t){var n=e._private.rscratch;if("bezier"===n.edgeType){var r=t.srcPos,a=t.tgtPos,i=t.srcW,o=t.srcH,l=t.tgtW,s=t.tgtH,u=t.srcShape,c=t.tgtShape,d=!Z(n.startX)||!Z(n.startY),p=!Z(n.arrowStartX)||!Z(n.arrowStartY),f=!Z(n.endX)||!Z(n.endY),h=!Z(n.arrowEndX)||!Z(n.arrowEndY),v=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth*3,m=On({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.startX,y:n.startY}),g=m<v,y=On({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.endX,y:n.endY}),b=y<v,C=!1;if(d||p||g){C=!0;var E={x:n.ctrlpts[0]-r.x,y:n.ctrlpts[1]-r.y},w=Math.sqrt(E.x*E.x+E.y*E.y),x={x:E.x/w,y:E.y/w},S=Math.max(i,o),P={x:n.ctrlpts[0]+2*x.x*S,y:n.ctrlpts[1]+2*x.y*S},_=u.intersectLine(r.x,r.y,i,o,P.x,P.y,0);g?(n.ctrlpts[0]=n.ctrlpts[0]+x.x*(v-m),n.ctrlpts[1]=n.ctrlpts[1]+x.y*(v-m)):(n.ctrlpts[0]=_[0]+x.x*v,n.ctrlpts[1]=_[1]+x.y*v)}if(f||h||b){C=!0;var D={x:n.ctrlpts[0]-a.x,y:n.ctrlpts[1]-a.y},T=Math.sqrt(D.x*D.x+D.y*D.y),z={x:D.x/T,y:D.y/T},I=Math.max(i,o),N={x:n.ctrlpts[0]+2*z.x*I,y:n.ctrlpts[1]+2*z.y*I},M=c.intersectLine(a.x,a.y,l,s,N.x,N.y,0);b?(n.ctrlpts[0]=n.ctrlpts[0]+z.x*(v-y),n.ctrlpts[1]=n.ctrlpts[1]+z.y*(v-y)):(n.ctrlpts[0]=M[0]+z.x*v,n.ctrlpts[1]=M[1]+z.y*v)}C&&this.findEndpoints(e)}},Lt.storeAllpts=function(e){var t=e._private.rscratch;if("multibezier"===t.edgeType||"bezier"===t.edgeType||"self"===t.edgeType||"compound"===t.edgeType){t.allpts=[],t.allpts.push(t.startX,t.startY);for(var n=0;n+1<t.ctrlpts.length;n+=2)t.allpts.push(t.ctrlpts[n],t.ctrlpts[n+1]),n+3<t.ctrlpts.length&&t.allpts.push((t.ctrlpts[n]+t.ctrlpts[n+2])/2,(t.ctrlpts[n+1]+t.ctrlpts[n+3])/2);var r;t.allpts.push(t.endX,t.endY),t.ctrlpts.length/2%2==0?(t.midX=t.allpts[r=t.allpts.length/2-1],t.midY=t.allpts[r+1]):(t.midX=kt(t.allpts[r=t.allpts.length/2-3],t.allpts[r+2],t.allpts[r+4],.5),t.midY=kt(t.allpts[r+1],t.allpts[r+3],t.allpts[r+5],.5))}else if("straight"===t.edgeType)t.allpts=[t.startX,t.startY,t.endX,t.endY],t.midX=(t.startX+t.endX+t.arrowStartX+t.arrowEndX)/4,t.midY=(t.startY+t.endY+t.arrowStartY+t.arrowEndY)/4;else if("segments"===t.edgeType)if(t.allpts=[],t.allpts.push(t.startX,t.startY),t.allpts.push.apply(t.allpts,t.segpts),t.allpts.push(t.endX,t.endY),t.segpts.length%4==0){var a=t.segpts.length/2,i=a-2;t.midX=(t.segpts[i]+t.segpts[a])/2,t.midY=(t.segpts[i+1]+t.segpts[a+1])/2}else{var o=t.segpts.length/2-1;t.midX=t.segpts[o],t.midY=t.segpts[o+1]}},Lt.checkForInvalidEdgeWarning=function(e){var t=e[0]._private.rscratch;t.nodesOverlap||Z(t.startX)&&Z(t.startY)&&Z(t.endX)&&Z(t.endY)?t.loggedErr=!1:t.loggedErr||(t.loggedErr=!0,Ue("Edge `"+e.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},Lt.findEdgeControlPoints=function(e){var t=this;if(e&&0!==e.length){for(var n=this,r=n.cy.hasCompoundNodes(),a={map:new en,get:function(b){var C=this.map.get(b[0]);return null!=C?C.get(b[1]):null},set:function(b,C){var E=this.map.get(b[0]);null==E&&(E=new en,this.map.set(b[0],E)),E.set(b[1],C)}},i=[],o=[],l=0;l<e.length;l++){var s=e[l],u=s._private,c=s.pstyle("curve-style").value;if(!s.removed()&&s.takesUpSpace())if("haystack"!==c){var d="unbundled-bezier"===c||"segments"===c||"straight"===c||"straight-triangle"===c||"taxi"===c,p="unbundled-bezier"===c||"bezier"===c,h=u.target,v=[u.source.poolIndex(),h.poolIndex()].sort(),m=a.get(v);null==m&&(a.set(v,m={eles:[]}),i.push(v)),m.eles.push(s),d&&(m.hasUnbundled=!0),p&&(m.hasBezier=!0)}else o.push(s)}for(var g=function(b){var E=a.get(i[b]),w=void 0;if(!E.hasUnbundled){var x=E.eles[0].parallelEdges().filter(function(ee){return ee.isBundledBezier()});ja(E.eles),x.forEach(function(ee){return E.eles.push(ee)}),E.eles.sort(function(ee,K){return ee.poolIndex()-K.poolIndex()})}var S=E.eles[0],P=S.source(),_=S.target();if(P.poolIndex()>_.poolIndex()){var D=P;P=_,_=D}var T=E.srcPos=P.position(),z=E.tgtPos=_.position(),I=E.srcW=P.outerWidth(),N=E.srcH=P.outerHeight(),M=E.tgtW=_.outerWidth(),q=E.tgtH=_.outerHeight(),A=E.srcShape=n.nodeShapes[t.getNodeShape(P)],L=E.tgtShape=n.nodeShapes[t.getNodeShape(_)];E.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var X=0;X<E.eles.length;X++){var F=E.eles[X],V=F[0]._private.rscratch,Y=F.pstyle("curve-style").value,$="unbundled-bezier"===Y||"segments"===Y||"taxi"===Y,re=!P.same(F.source());if(!E.calculatedIntersection&&P!==_&&(E.hasBezier||E.hasUnbundled)){E.calculatedIntersection=!0;var te=A.intersectLine(T.x,T.y,I,N,z.x,z.y,0),de=E.srcIntn=te,oe=L.intersectLine(z.x,z.y,M,q,T.x,T.y,0),ye=E.tgtIntn=oe,ke=E.intersectionPts={x1:te[0],x2:oe[0],y1:te[1],y2:oe[1]},Q=E.posPts={x1:T.x,x2:z.x,y1:T.y,y2:z.y},le=oe[1]-te[1],pe=oe[0]-te[0],k=Math.sqrt(pe*pe+le*le),B=E.vector={x:pe,y:le},R=E.vectorNorm={x:B.x/k,y:B.y/k},j={x:-R.y,y:R.x};E.nodesOverlap=!Z(k)||L.checkPoint(te[0],te[1],0,M,q,z.x,z.y)||A.checkPoint(oe[0],oe[1],0,I,N,T.x,T.y),E.vectorNormInverse=j,w={nodesOverlap:E.nodesOverlap,dirCounts:E.dirCounts,calculatedIntersection:!0,hasBezier:E.hasBezier,hasUnbundled:E.hasUnbundled,eles:E.eles,srcPos:z,tgtPos:T,srcW:M,srcH:q,tgtW:I,tgtH:N,srcIntn:ye,tgtIntn:de,srcShape:L,tgtShape:A,posPts:{x1:Q.x2,y1:Q.y2,x2:Q.x1,y2:Q.y1},intersectionPts:{x1:ke.x2,y1:ke.y2,x2:ke.x1,y2:ke.y1},vector:{x:-B.x,y:-B.y},vectorNorm:{x:-R.x,y:-R.y},vectorNormInverse:{x:-j.x,y:-j.y}}}var O=re?w:E;V.nodesOverlap=O.nodesOverlap,V.srcIntn=O.srcIntn,V.tgtIntn=O.tgtIntn,r&&(P.isParent()||P.isChild()||_.isParent()||_.isChild())&&(P.parents().anySame(_)||_.parents().anySame(P)||P.same(_)&&P.isParent())?t.findCompoundLoopPoints(F,O,X,$):P===_?t.findLoopPoints(F,O,X,$):"segments"===Y?t.findSegmentsPoints(F,O):"taxi"===Y?t.findTaxiPoints(F,O):"straight"===Y||!$&&E.eles.length%2==1&&X===Math.floor(E.eles.length/2)?t.findStraightEdgePoints(F):t.findBezierPoints(F,O,X,$,re),t.findEndpoints(F),t.tryToCorrectInvalidPoints(F,O),t.checkForInvalidEdgeWarning(F),t.storeAllpts(F),t.storeEdgeProjections(F),t.calculateArrowAngles(F),t.recalculateEdgeLabelProjections(F),t.calculateLabelAngles(F)}},y=0;y<i.length;y++)g(y);this.findHaystackPoints(o)}},Lt.getSegmentPoints=function(e){var t=e[0]._private.rscratch;if("segments"===t.edgeType)return this.recalculateRenderedStyle(e),tl(t.segpts)},Lt.getControlPoints=function(e){var t=e[0]._private.rscratch,n=t.edgeType;if("bezier"===n||"multibezier"===n||"self"===n||"compound"===n)return this.recalculateRenderedStyle(e),tl(t.ctrlpts)},Lt.getEdgeMidpoint=function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),{x:t.midX,y:t.midY}};var Id={manualEndptToPx:function(e,t){var n=e.position(),r=e.outerWidth(),a=e.outerHeight();if(2===t.value.length){var i=[t.pfValue[0],t.pfValue[1]];return"%"===t.units[0]&&(i[0]=i[0]*r),"%"===t.units[1]&&(i[1]=i[1]*a),i[0]+=n.x,i[1]+=n.y,i}var o=t.pfValue[0];o=-Math.PI/2+o;var l=2*Math.max(r,a),s=[n.x+Math.cos(o)*l,n.y+Math.sin(o)*l];return this.nodeShapes[this.getNodeShape(e)].intersectLine(n.x,n.y,r,a,s[0],s[1],0)},findEndpoints:function(e){var t,n,r,a,i,o=this,l=e.source()[0],s=e.target()[0],u=l.position(),c=s.position(),d=e.pstyle("target-arrow-shape").value,p=e.pstyle("source-arrow-shape").value,f=e.pstyle("target-distance-from-node").pfValue,h=e.pstyle("source-distance-from-node").pfValue,v=e.pstyle("curve-style").value,m=e._private.rscratch,g=m.edgeType,y="self"===g||"compound"===g,b="bezier"===g||"multibezier"===g||y,C="bezier"!==g,E="straight"===g||"segments"===g,w="segments"===g,x=b||C||E,S=y||"taxi"===v,P=e.pstyle("source-endpoint"),_=S?"outside-to-node":P.value,D=e.pstyle("target-endpoint"),T=S?"outside-to-node":D.value;if(m.srcManEndpt=P,m.tgtManEndpt=D,b){var z=[m.ctrlpts[0],m.ctrlpts[1]];n=C?[m.ctrlpts[m.ctrlpts.length-2],m.ctrlpts[m.ctrlpts.length-1]]:z,r=z}else if(E){var I=w?m.segpts.slice(0,2):[c.x,c.y];n=w?m.segpts.slice(m.segpts.length-2):[u.x,u.y],r=I}if("inside-to-node"===T)t=[c.x,c.y];else if(D.units)t=this.manualEndptToPx(s,D);else if("outside-to-line"===T)t=m.tgtIntn;else if("outside-to-node"===T||"outside-to-node-or-label"===T?a=n:"outside-to-line"!==T&&"outside-to-line-or-label"!==T||(a=[u.x,u.y]),t=o.nodeShapes[this.getNodeShape(s)].intersectLine(c.x,c.y,s.outerWidth(),s.outerHeight(),a[0],a[1],0),"outside-to-node-or-label"===T||"outside-to-line-or-label"===T){var N=s._private.rscratch,A=N.labelX,L=N.labelY,X=N.labelWidth/2,F=N.labelHeight/2,V=s.pstyle("text-valign").value;"top"===V?L-=F:"bottom"===V&&(L+=F);var Y=s.pstyle("text-halign").value;"left"===Y?A-=X:"right"===Y&&(A+=X);var $=Dr(a[0],a[1],[A-X,L-F,A+X,L-F,A+X,L+F,A-X,L+F],c.x,c.y);if($.length>0){var re=u,te=In(re,nr(t)),de=In(re,nr($)),oe=te;de<te&&(t=$,oe=de),$.length>2&&In(re,{x:$[2],y:$[3]})<oe&&(t=[$[2],$[3]])}}var ye=ta(t,n,o.arrowShapes[d].spacing(e)+f),ke=ta(t,n,o.arrowShapes[d].gap(e)+f);if(m.endX=ke[0],m.endY=ke[1],m.arrowEndX=ye[0],m.arrowEndY=ye[1],"inside-to-node"===_)t=[u.x,u.y];else if(P.units)t=this.manualEndptToPx(l,P);else if("outside-to-line"===_)t=m.srcIntn;else if("outside-to-node"===_||"outside-to-node-or-label"===_?i=r:"outside-to-line"!==_&&"outside-to-line-or-label"!==_||(i=[c.x,c.y]),t=o.nodeShapes[this.getNodeShape(l)].intersectLine(u.x,u.y,l.outerWidth(),l.outerHeight(),i[0],i[1],0),"outside-to-node-or-label"===_||"outside-to-line-or-label"===_){var Q=l._private.rscratch,k=Q.labelX,B=Q.labelY,R=Q.labelWidth/2,j=Q.labelHeight/2,O=l.pstyle("text-valign").value;"top"===O?B-=j:"bottom"===O&&(B+=j);var ee=l.pstyle("text-halign").value;"left"===ee?k-=R:"right"===ee&&(k+=R);var K=Dr(i[0],i[1],[k-R,B-j,k+R,B-j,k+R,B+j,k-R,B+j],u.x,u.y);if(K.length>0){var he=c,Me=In(he,nr(t)),Te=In(he,nr(K)),Ie=Me;Te<Me&&(t=[K[0],K[1]],Ie=Te),K.length>2&&In(he,{x:K[2],y:K[3]})<Ie&&(t=[K[2],K[3]])}}var Ee=ta(t,r,o.arrowShapes[p].spacing(e)+h),Le=ta(t,r,o.arrowShapes[p].gap(e)+h);m.startX=Le[0],m.startY=Le[1],m.arrowStartX=Ee[0],m.arrowStartY=Ee[1],x&&(m.badLine=!(Z(m.startX)&&Z(m.startY)&&Z(m.endX)&&Z(m.endY)))},getSourceEndpoint:function(e){var t=e[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(e),t.edgeType)?{x:t.haystackPts[0],y:t.haystackPts[1]}:{x:t.arrowStartX,y:t.arrowStartY}},getTargetEndpoint:function(e){var t=e[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(e),t.edgeType)?{x:t.haystackPts[2],y:t.haystackPts[3]}:{x:t.arrowEndX,y:t.arrowEndY}}},Ai={};function Rd(e,t,n){for(var r=function(l,s,u,c){return kt(l,s,u,c)},a=t._private.rstyle.bezierPts,i=0;i<e.bezierProjPcts.length;i++){var o=e.bezierProjPcts[i];a.push({x:r(n[0],n[2],n[4],o),y:r(n[1],n[3],n[5],o)})}}Ai.storeEdgeProjections=function(e){var t=e._private,n=t.rscratch,r=n.edgeType;if(t.rstyle.bezierPts=null,t.rstyle.linePts=null,t.rstyle.haystackPts=null,"multibezier"===r||"bezier"===r||"self"===r||"compound"===r){t.rstyle.bezierPts=[];for(var a=0;a+5<n.allpts.length;a+=4)Rd(this,e,n.allpts.slice(a,a+6))}else if("segments"===r){var i=t.rstyle.linePts=[];for(a=0;a+1<n.allpts.length;a+=2)i.push({x:n.allpts[a],y:n.allpts[a+1]})}else if("haystack"===r){var o=n.haystackPts;t.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}t.rstyle.arrowWidth=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth},Ai.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)};var un={recalculateNodeLabelProjection:function(e){var t=e.pstyle("label").strValue;if(!Ae(t)){var n,r,a=e._private,i=e.width(),o=e.height(),l=e.padding(),s=e.position(),u=e.pstyle("text-halign").strValue,c=e.pstyle("text-valign").strValue,d=a.rscratch,p=a.rstyle;switch(u){case"left":n=s.x-i/2-l;break;case"right":n=s.x+i/2+l;break;default:n=s.x}switch(c){case"top":r=s.y-o/2-l;break;case"bottom":r=s.y+o/2+l;break;default:r=s.y}d.labelX=n,d.labelY=r,p.labelX=n,p.labelY=r,this.calculateLabelAngles(e),this.applyLabelDimensions(e)}}},nl=function(e,t){var n=Math.atan(t/e);return 0===e&&n<0&&(n*=-1),n},rl=function(e,t){return nl(t.x-e.x,t.y-e.y)};un.recalculateEdgeLabelProjections=function(e){var t,n=e._private,r=n.rscratch,a=this,i={mid:e.pstyle("label").strValue,source:e.pstyle("source-label").strValue,target:e.pstyle("target-label").strValue};if(i.mid||i.source||i.target){var o=function(u,c,d){fn(n.rscratch,u,c,d),fn(n.rstyle,u,c,d)};o("labelX",null,(t={x:r.midX,y:r.midY}).x),o("labelY",null,t.y);var l=nl(r.midDispX,r.midDispY);o("labelAutoAngle",null,l);var s=function(u){var c,L,X,F,V,Y,$,re,te,d="source"===u;if(i[u]){var p=e.pstyle(u+"-text-offset").pfValue;switch(r.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var f,h=function L(){if(L.cache)return L.cache;for(var X=[],F=0;F+5<r.allpts.length;F+=4)X.push({p0:{x:r.allpts[F],y:r.allpts[F+1]},p1:{x:r.allpts[F+2],y:r.allpts[F+3]},p2:{x:r.allpts[F+4],y:r.allpts[F+5]},startDist:0,length:0,segments:[]});var re=n.rstyle.bezierPts,te=a.bezierProjPcts.length;function de(le,pe,k,B,R){var j=On(pe,k),O=le.segments[le.segments.length-1];le.segments.push({p0:pe,p1:k,t0:B,t1:R,startDist:O?O.startDist+O.length:0,length:j}),le.length+=j}for(var oe=0;oe<X.length;oe++){var ye=X[oe],ke=X[oe-1];ke&&(ye.startDist=ke.startDist+ke.length),de(ye,ye.p0,re[oe*te],0,a.bezierProjPcts[0]);for(var Q=0;Q<te-1;Q++)de(ye,re[oe*te+Q],re[oe*te+Q+1],a.bezierProjPcts[Q],a.bezierProjPcts[Q+1]);de(ye,re[oe*te+te-1],ye.p2,a.bezierProjPcts[te-1],1)}return L.cache=X}(),v=0,m=0,g=0;g<h.length;g++){for(var y=h[d?g:h.length-1-g],b=0;b<y.segments.length;b++){var C=y.segments[d?b:y.segments.length-1-b];if(v=m,(m+=C.length)>=p||g===h.length-1&&b===y.segments.length-1){f={cp:y,segment:C};break}}if(f)break}var w=f.cp,x=f.segment,S=(p-v)/x.length,P=x.t1-x.t0,_=d?x.t0+P*S:x.t1-P*S;_=_r(0,_,1),t=rr(w.p0,w.p1,w.p2,_),L=w.p0,X=w.p1,F=w.p2,Y=_r(0,(V=_)-.001,1),$=_r(0,V+.001,1),re=rr(L,X,F,Y),te=rr(L,X,F,$),c=rl(re,te);break;case"straight":case"segments":case"haystack":for(var D,T,z,I,N=0,M=r.allpts.length,q=0;q+3<M&&(d?(z={x:r.allpts[q],y:r.allpts[q+1]},I={x:r.allpts[q+2],y:r.allpts[q+3]}):(z={x:r.allpts[M-2-q],y:r.allpts[M-1-q]},I={x:r.allpts[M-4-q],y:r.allpts[M-3-q]}),T=N,!((N+=D=On(z,I))>=p));q+=2);var A=(p-T)/D;A=_r(0,A,1),t=function(L,X,F,V){var Y=X.x-L.x,$=X.y-L.y,re=On(L,X);return F=null==F?0:F,{x:L.x+Y/re*(V=null!=V?V:F*re),y:L.y+$/re*V}}(z,I,A),c=rl(z,I)}o("labelX",u,t.x),o("labelY",u,t.y),o("labelAutoAngle",u,c)}};s("source"),s("target"),this.applyLabelDimensions(e)}},un.applyLabelDimensions=function(e){this.applyPrefixedLabelDimensions(e),e.isEdge()&&(this.applyPrefixedLabelDimensions(e,"source"),this.applyPrefixedLabelDimensions(e,"target"))},un.applyPrefixedLabelDimensions=function(e,t){var n=e._private,r=this.getLabelText(e,t),a=this.calculateLabelDimensions(e,r),i=e.pstyle("line-height").pfValue,o=e.pstyle("text-wrap").strValue,l=Zt(n.rscratch,"labelWrapCachedLines",t)||[],s="wrap"!==o?1:Math.max(l.length,1),u=a.height/s,c=u*i,d=a.width,p=a.height+(s-1)*(i-1)*u;fn(n.rstyle,"labelWidth",t,d),fn(n.rscratch,"labelWidth",t,d),fn(n.rstyle,"labelHeight",t,p),fn(n.rscratch,"labelHeight",t,p),fn(n.rscratch,"labelLineHeight",t,c)},un.getLabelText=function(e,t){var n=e._private,a=e.pstyle((t?t+"-":"")+"label").strValue,i=e.pstyle("text-transform").value,o=function(T,z){return z?(fn(n.rscratch,T,t,z),z):Zt(n.rscratch,T,t)};if(!a)return"";"none"==i||("uppercase"==i?a=a.toUpperCase():"lowercase"==i&&(a=a.toLowerCase()));var l=e.pstyle("text-wrap").value;if("wrap"===l){var s=o("labelKey");if(null!=s&&o("labelWrapKey")===s)return o("labelWrapCachedText");for(var u=a.split("\n"),c=e.pstyle("text-max-width").pfValue,d="anywhere"===e.pstyle("text-overflow-wrap").value,p=[],f=/[\s\u200b]+/,h=d?"":" ",v=0;v<u.length;v++){var m=u[v],g=this.calculateLabelDimensions(e,m).width;if(d){var y=m.split("").join("\u200b");m=y}if(g>c){for(var b=m.split(f),C="",E=0;E<b.length;E++){var w=b[E];this.calculateLabelDimensions(e,0===C.length?w:C+h+w).width<=c?C+=w+h:(C&&p.push(C),C=w+h)}C.match(/^[\s\u200b]+$/)||p.push(C)}else p.push(m)}o("labelWrapCachedLines",p),a=o("labelWrapCachedText",p.join("\n")),o("labelWrapKey",s)}else if("ellipsis"===l){var S=e.pstyle("text-max-width").pfValue,P="",_=!1;if(this.calculateLabelDimensions(e,a).width<S)return a;for(var D=0;D<a.length&&!(this.calculateLabelDimensions(e,P+a[D]+"\u2026").width>S);D++)P+=a[D],D===a.length-1&&(_=!0);return _||(P+="\u2026"),P}return a},un.getLabelJustification=function(e){var t=e.pstyle("text-justification").strValue,n=e.pstyle("text-halign").strValue;if("auto"!==t)return t;if(!e.isNode())return"center";switch(n){case"left":return"right";case"right":return"left";default:return"center"}},un.calculateLabelDimensions=function(e,t){var n=Xe(t,e._private.labelDimsKey),r=this.labelDimCache||(this.labelDimCache=[]),a=r[n];if(null!=a)return a;var i=e.pstyle("font-style").strValue,o=e.pstyle("font-size").pfValue,l=e.pstyle("font-family").strValue,s=e.pstyle("font-weight").strValue,u=this.labelCalcCanvas,c=this.labelCalcCanvasContext;if(!u){u=this.labelCalcCanvas=document.createElement("canvas"),c=this.labelCalcCanvasContext=u.getContext("2d");var d=u.style;d.position="absolute",d.left="-9999px",d.top="-9999px",d.zIndex="-1",d.visibility="hidden",d.pointerEvents="none"}c.font="".concat(i," ").concat(s," ").concat(o,"px ").concat(l);for(var p=0,f=0,h=t.split("\n"),v=0;v<h.length;v++){var g=c.measureText(h[v]),y=Math.ceil(g.width),b=o;p=Math.max(y,p),f+=b}return r[n]={width:p+=0,height:f+=0}},un.calculateLabelAngle=function(e,t){var n=e._private.rscratch,r=e.isEdge(),i=e.pstyle((t?t+"-":"")+"text-rotation"),o=i.strValue;return"none"===o?0:r&&"autorotate"===o?n.labelAutoAngle:"autorotate"===o?0:i.pfValue},un.calculateLabelAngles=function(e){var t=this,n=e.isEdge(),r=e._private.rscratch;r.labelAngle=t.calculateLabelAngle(e),n&&(r.sourceLabelAngle=t.calculateLabelAngle(e,"source"),r.targetLabelAngle=t.calculateLabelAngle(e,"target"))};var al={},il=!1;al.getNodeShape=function(e){var t=e.pstyle("shape").value;if("cutrectangle"===t&&(e.width()<28||e.height()<28))return il||(Ue("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),il=!0),"rectangle";if(e.isParent())return"rectangle"===t||"roundrectangle"===t||"round-rectangle"===t||"cutrectangle"===t||"cut-rectangle"===t||"barrel"===t?t:"rectangle";if("polygon"===t){var n=e.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(n).name}return t};var Ad={updateCachedGrabbedEles:function(){var e=this.cachedZSortedEles;if(e){e.drag=[],e.nondrag=[];for(var t=[],n=0;n<e.length;n++){var r=(a=e[n])._private.rscratch;a.grabbed()&&!a.isParent()?t.push(a):r.inDragLayer?e.drag.push(a):e.nondrag.push(a)}for(n=0;n<t.length;n++){var a=t[n];e.drag.push(a)}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(e){if(e||!this.cachedZSortedEles){var t=this.cy.mutableElements().toArray();t.sort(_s),t.interactive=t.filter(function(n){return n.interactive()}),this.cachedZSortedEles=t,this.updateCachedGrabbedEles()}else t=this.cachedZSortedEles;return t}},ol={};[Od,Li,Lt,Id,Ai,un,al,{registerCalculationListeners:function(){var e=this.cy,t=e.collection(),n=this,r=function(i){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t.merge(i),o)for(var l=0;l<i.length;l++){var s=i[l],u=s._private,c=u.rstyle;c.clean=!1,c.cleanConnected=!1}};n.binder(e).on("bounds.* dirty.*",function(i){r(i.target)}).on("style.* background.*",function(i){r(i.target,!1)});var a=function(i){if(i){var o=n.onUpdateEleCalcsFns;t.cleanStyle();for(var l=0;l<t.length;l++){var s=t[l],u=s._private.rstyle;s.isNode()&&!u.cleanConnected&&(r(s.connectedEdges()),u.cleanConnected=!0)}if(o)for(var c=0;c<o.length;c++)(0,o[c])(i,t);n.recalculateRenderedStyle(t),t=e.collection()}};n.flushRenderedStyleQueue=function(){a(!0)},n.beforeRender(a,n.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(e){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(e)},recalculateRenderedStyle:function(e,t){var n=function(g){return g._private.rstyle.cleanConnected},r=[],a=[];if(!this.destroyed){void 0===t&&(t=!0);for(var i=0;i<e.length;i++){var o=e[i],l=o._private,s=l.rstyle;!o.isEdge()||n(o.source())&&n(o.target())||(s.clean=!1),t&&s.clean||o.removed()||"none"!==o.pstyle("display").value&&("nodes"===l.group?a.push(o):r.push(o),s.clean=!0)}for(var u=0;u<a.length;u++){var c=a[u],d=c._private.rstyle,p=c.position();this.recalculateNodeLabelProjection(c),d.nodeX=p.x,d.nodeY=p.y,d.nodeW=c.pstyle("width").pfValue,d.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(r);for(var f=0;f<r.length;f++){var h=r[f]._private,v=h.rstyle,m=h.rscratch;v.srcX=m.arrowStartX,v.srcY=m.arrowStartY,v.tgtX=m.arrowEndX,v.tgtY=m.arrowEndY,v.midX=m.midX,v.midY=m.midY,v.labelAngle=m.labelAngle,v.sourceLabelAngle=m.sourceLabelAngle,v.targetLabelAngle=m.targetLabelAngle}}}},Ad].forEach(function(e){me(ol,e)});var Fd={getCachedImage:function(e,t,n){var r=this.imageCache=this.imageCache||{},a=r[e];if(a)return a.image.complete||a.image.addEventListener("load",n),a.image;var i=(a=r[e]=r[e]||{}).image=new Image;return i.addEventListener("load",n),i.addEventListener("error",function(){i.error=!0}),"data:"===e.substring(0,"data:".length).toLowerCase()||(i.crossOrigin=t),i.src=e,i}},Xr={registerBinding:function(e,t,n,r){var a=Array.prototype.slice.apply(arguments,[1]),i=this.binder(e);return i.on.apply(i,a)},binder:function(e){var n=this,r=e===window||e===document||e===document.body||"undefined"!=typeof HTMLElement&&e instanceof HTMLElement;if(null==n.supportsPassiveEvents){var a=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return a=!0,!0}});window.addEventListener("test",null,i)}catch(l){}n.supportsPassiveEvents=a}var o=function(l,s,u){var c=Array.prototype.slice.call(arguments);return r&&n.supportsPassiveEvents&&(c[2]={capture:null!=u&&u,passive:!1,once:!1}),n.bindings.push({target:e,args:c}),(e.addEventListener||e.on).apply(e,c),this};return{on:o,addEventListener:o,addListener:o,bind:o}},nodeIsDraggable:function(e){return e&&e.isNode()&&!e.locked()&&e.grabbable()},nodeIsGrabbable:function(e){return this.nodeIsDraggable(e)&&e.interactive()},load:function(){var e=this,t=function(k){return k.selected()},n=function(k,B,R,j){null==k&&(k=e.cy);for(var O=0;O<B.length;O++)k.emit({originalEvent:R,type:B[O],position:j})},r=function(k){return k.shiftKey||k.metaKey||k.ctrlKey},a=function(k,B){var R=!0;if(e.cy.hasCompoundNodes()&&k&&k.pannable()){for(var j=0;B&&j<B.length;j++)if((k=B[j]).isNode()&&k.isParent()&&!k.pannable()){R=!1;break}}else R=!0;return R},i=function(k){k[0]._private.rscratch.inDragLayer=!0},o=function(k){k[0]._private.rscratch.isGrabTarget=!0},l=function(k,B){var R=B.addToList;R.has(k)||!k.grabbable()||k.locked()||(R.merge(k),k[0]._private.grabbed=!0)},s=function(k,B){B=B||{};var R=k.cy().hasCompoundNodes();B.inDragLayer&&(k.forEach(i),k.neighborhood().stdFilter(function(j){return!R||j.isEdge()}).forEach(i)),B.addToList&&k.forEach(function(j){l(j,B)}),function(j,O){if(j.cy().hasCompoundNodes()&&(null!=O.inDragLayer||null!=O.addToList)){var ee=j.descendants();O.inDragLayer&&(ee.forEach(i),ee.connectedEdges().forEach(i)),O.addToList&&l(ee,O)}}(k,B),d(k,{inDragLayer:B.inDragLayer}),e.updateCachedGrabbedEles()},u=s,c=function(k){k&&(e.getCachedZSortedEles().forEach(function(B){B[0]._private.grabbed=!1,B[0]._private.rscratch.inDragLayer=!1,function(R){R[0]._private.rscratch.isGrabTarget=!1}(B)}),e.updateCachedGrabbedEles())},d=function(k,B){if((null!=B.inDragLayer||null!=B.addToList)&&k.cy().hasCompoundNodes()){var R=k.ancestors().orphans();if(!R.same(k)){var j=R.descendants().spawnSelf().merge(R).unmerge(k).unmerge(k.descendants()),O=j.connectedEdges();B.inDragLayer&&(O.forEach(i),j.forEach(i)),B.addToList&&j.forEach(function(ee){l(ee,B)})}}},p=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},f="undefined"!=typeof MutationObserver,h="undefined"!=typeof ResizeObserver;f?(e.removeObserver=new MutationObserver(function(k){for(var B=0;B<k.length;B++){var R=k[B].removedNodes;if(R)for(var j=0;j<R.length;j++)if(R[j]===e.container){e.destroy();break}}}),e.container.parentNode&&e.removeObserver.observe(e.container.parentNode,{childList:!0})):e.registerBinding(e.container,"DOMNodeRemoved",function(k){e.destroy()});var v=we(function(){e.cy.resize()},100);f&&(e.styleObserver=new MutationObserver(v),e.styleObserver.observe(e.container,{attributes:!0})),e.registerBinding(window,"resize",v),h&&(e.resizeObserver=new ResizeObserver(v),e.resizeObserver.observe(e.container));var m=function(){e.invalidateContainerClientCoordsCache()};(function(k,B){for(;null!=k;)B(k),k=k.parentNode})(e.container,function(k){e.registerBinding(k,"transitionend",m),e.registerBinding(k,"animationend",m),e.registerBinding(k,"scroll",m)}),e.registerBinding(e.container,"contextmenu",function(k){k.preventDefault()});var g,y,b,C=function(k){for(var B=e.findContainerClientCoords(),R=B[0],j=B[1],O=B[2],ee=B[3],K=k.touches?k.touches:[k],he=!1,Me=0;Me<K.length;Me++){var Te=K[Me];if(R<=Te.clientX&&Te.clientX<=R+O&&j<=Te.clientY&&Te.clientY<=j+ee){he=!0;break}}if(!he)return!1;for(var Ie=e.container,Ee=k.target.parentNode,Le=!1;Ee;){if(Ee===Ie){Le=!0;break}Ee=Ee.parentNode}return!!Le};e.registerBinding(e.container,"mousedown",function(k){if(C(k)){k.preventDefault(),p(),e.hoverData.capture=!0,e.hoverData.which=k.which;var B=e.cy,R=[k.clientX,k.clientY],j=e.projectIntoViewport(R[0],R[1]),O=e.selection,ee=e.findNearestElements(j[0],j[1],!0,!1),K=ee[0],he=e.dragData.possibleDragElements;if(e.hoverData.mdownPos=j,e.hoverData.mdownGPos=R,3==k.which){e.hoverData.cxtStarted=!0;var Me={originalEvent:k,type:"cxttapstart",position:{x:j[0],y:j[1]}};K?(K.activate(),K.emit(Me),e.hoverData.down=K):B.emit(Me),e.hoverData.downTime=(new Date).getTime(),e.hoverData.cxtDragged=!1}else if(1==k.which){if(K&&K.activate(),null!=K&&e.nodeIsGrabbable(K)){var Te=function(Ee){return{originalEvent:k,type:Ee,position:{x:j[0],y:j[1]}}};if(o(K),K.selected()){he=e.dragData.possibleDragElements=B.collection();var Ie=B.$(function(Ee){return Ee.isNode()&&Ee.selected()&&e.nodeIsGrabbable(Ee)});s(Ie,{addToList:he}),K.emit(Te("grabon")),Ie.forEach(function(Ee){Ee.emit(Te("grab"))})}else he=e.dragData.possibleDragElements=B.collection(),u(K,{addToList:he}),K.emit(Te("grabon")).emit(Te("grab"));e.redrawHint("eles",!0),e.redrawHint("drag",!0)}e.hoverData.down=K,e.hoverData.downs=ee,e.hoverData.downTime=(new Date).getTime(),n(K,["mousedown","tapstart","vmousedown"],k,{x:j[0],y:j[1]}),null==K?(O[4]=1,e.data.bgActivePosistion={x:j[0],y:j[1]},e.redrawHint("select",!0),e.redraw()):K.pannable()&&(O[4]=1),e.hoverData.tapholdCancelled=!1,clearTimeout(e.hoverData.tapholdTimeout),e.hoverData.tapholdTimeout=setTimeout(function(){if(!e.hoverData.tapholdCancelled){var Ee=e.hoverData.down;Ee?Ee.emit({originalEvent:k,type:"taphold",position:{x:j[0],y:j[1]}}):B.emit({originalEvent:k,type:"taphold",position:{x:j[0],y:j[1]}})}},e.tapholdDuration)}O[0]=O[2]=j[0],O[1]=O[3]=j[1]}},!1),e.registerBinding(window,"mousemove",function(k){if(e.hoverData.capture||C(k)){var B=!1,R=e.cy,j=R.zoom(),O=[k.clientX,k.clientY],ee=e.projectIntoViewport(O[0],O[1]),K=e.hoverData.mdownPos,he=e.hoverData.mdownGPos,Me=e.selection,Te=null;e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.selecting||(Te=e.findNearestElement(ee[0],ee[1],!0,!1));var Ie,Ee=e.hoverData.last,Le=e.hoverData.down,pt=[ee[0]-Me[2],ee[1]-Me[3]],Ot=e.dragData.possibleDragElements;if(he){var Wt=O[0]-he[0],Vt=O[1]-he[1];e.hoverData.isOverThresholdDrag=Ie=Wt*Wt+Vt*Vt>=e.desktopTapThreshold2}var Sn=r(k);Ie&&(e.hoverData.tapholdCancelled=!0),B=!0,n(Te,["mousemove","vmousemove","tapdrag"],k,{x:ee[0],y:ee[1]});var Pn=function(){e.data.bgActivePosistion=void 0,e.hoverData.selecting||R.emit({originalEvent:k,type:"boxstart",position:{x:ee[0],y:ee[1]}}),Me[4]=1,e.hoverData.selecting=!0,e.redrawHint("select",!0),e.redraw()};if(3===e.hoverData.which){if(Ie){var qt={originalEvent:k,type:"cxtdrag",position:{x:ee[0],y:ee[1]}};Le?Le.emit(qt):R.emit(qt),e.hoverData.cxtDragged=!0,e.hoverData.cxtOver&&Te===e.hoverData.cxtOver||(e.hoverData.cxtOver&&e.hoverData.cxtOver.emit({originalEvent:k,type:"cxtdragout",position:{x:ee[0],y:ee[1]}}),e.hoverData.cxtOver=Te,Te&&Te.emit({originalEvent:k,type:"cxtdragover",position:{x:ee[0],y:ee[1]}}))}}else if(e.hoverData.dragging){if(B=!0,R.panningEnabled()&&R.userPanningEnabled()){var Kt;if(e.hoverData.justStartedPan){var Kr=e.hoverData.mdownPos;Kt={x:(ee[0]-Kr[0])*j,y:(ee[1]-Kr[1])*j},e.hoverData.justStartedPan=!1}else Kt={x:pt[0]*j,y:pt[1]*j};R.panBy(Kt),R.emit("dragpan"),e.hoverData.dragged=!0}ee=e.projectIntoViewport(k.clientX,k.clientY)}else if(1!=Me[4]||null!=Le&&!Le.pannable()){if(Le&&Le.pannable()&&Le.active()&&Le.unactivate(),Le&&Le.grabbed()||Te==Ee||(Ee&&n(Ee,["mouseout","tapdragout"],k,{x:ee[0],y:ee[1]}),Te&&n(Te,["mouseover","tapdragover"],k,{x:ee[0],y:ee[1]}),e.hoverData.last=Te),Le)if(Ie){if(R.boxSelectionEnabled()&&Sn)Le&&Le.grabbed()&&(c(Ot),Le.emit("freeon"),Ot.emit("free"),e.dragData.didDrag&&(Le.emit("dragfreeon"),Ot.emit("dragfree"))),Pn();else if(Le&&Le.grabbed()&&e.nodeIsDraggable(Le)){var Zn=!e.dragData.didDrag;Zn&&e.redrawHint("eles",!0),e.dragData.didDrag=!0,e.hoverData.draggingEles||s(Ot,{inDragLayer:!0});var _n={x:0,y:0};if(Z(pt[0])&&Z(pt[1])&&(_n.x+=pt[0],_n.y+=pt[1],Zn)){var Un=e.hoverData.dragDelta;Un&&Z(Un[0])&&Z(Un[1])&&(_n.x+=Un[0],_n.y+=Un[1])}e.hoverData.draggingEles=!0,Ot.silentShift(_n).emit("position drag"),e.redrawHint("drag",!0),e.redraw()}}else 0===($n=e.hoverData.dragDelta=e.hoverData.dragDelta||[]).length?($n.push(pt[0]),$n.push(pt[1])):($n[0]+=pt[0],$n[1]+=pt[1]);B=!0}else Ie&&(e.hoverData.dragging||!R.boxSelectionEnabled()||!Sn&&R.panningEnabled()&&R.userPanningEnabled()?!e.hoverData.selecting&&R.panningEnabled()&&R.userPanningEnabled()&&a(Le,e.hoverData.downs)&&(e.hoverData.dragging=!0,e.hoverData.justStartedPan=!0,Me[4]=0,e.data.bgActivePosistion=nr(K),e.redrawHint("select",!0),e.redraw()):Pn(),Le&&Le.pannable()&&Le.active()&&Le.unactivate());return Me[2]=ee[0],Me[3]=ee[1],B?(k.stopPropagation&&k.stopPropagation(),k.preventDefault&&k.preventDefault(),!1):void 0}var $n},!1),e.registerBinding(window,"mouseup",function(k){if(e.hoverData.capture){e.hoverData.capture=!1;var B=e.cy,R=e.projectIntoViewport(k.clientX,k.clientY),j=e.selection,O=e.findNearestElement(R[0],R[1],!0,!1),ee=e.dragData.possibleDragElements,K=e.hoverData.down,he=r(k);if(e.data.bgActivePosistion&&(e.redrawHint("select",!0),e.redraw()),e.hoverData.tapholdCancelled=!0,e.data.bgActivePosistion=void 0,K&&K.unactivate(),3===e.hoverData.which){var Me={originalEvent:k,type:"cxttapend",position:{x:R[0],y:R[1]}};if(K?K.emit(Me):B.emit(Me),!e.hoverData.cxtDragged){var Te={originalEvent:k,type:"cxttap",position:{x:R[0],y:R[1]}};K?K.emit(Te):B.emit(Te)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else if(1===e.hoverData.which){if(n(O,["mouseup","tapend","vmouseup"],k,{x:R[0],y:R[1]}),e.dragData.didDrag||e.hoverData.dragged||e.hoverData.selecting||e.hoverData.isOverThresholdDrag||(n(K,["click","tap","vclick"],k,{x:R[0],y:R[1]}),y=!1,k.timeStamp-b<=B.multiClickDebounceTime()?(g&&clearTimeout(g),y=!0,b=null,n(K,["dblclick","dbltap","vdblclick"],k,{x:R[0],y:R[1]})):(g=setTimeout(function(){y||n(K,["oneclick","onetap","voneclick"],k,{x:R[0],y:R[1]})},B.multiClickDebounceTime()),b=k.timeStamp)),null!=K||e.dragData.didDrag||e.hoverData.selecting||e.hoverData.dragged||r(k)||(B.$(t).unselect(["tapunselect"]),ee.length>0&&e.redrawHint("eles",!0),e.dragData.possibleDragElements=ee=B.collection()),O!=K||e.dragData.didDrag||e.hoverData.selecting||null!=O&&O._private.selectable&&(e.hoverData.dragging||("additive"===B.selectionType()||he?O.selected()?O.unselect(["tapunselect"]):O.select(["tapselect"]):he||(B.$(t).unmerge(O).unselect(["tapunselect"]),O.select(["tapselect"]))),e.redrawHint("eles",!0)),e.hoverData.selecting){var Ie=B.collection(e.getAllInBox(j[0],j[1],j[2],j[3]));e.redrawHint("select",!0),Ie.length>0&&e.redrawHint("eles",!0),B.emit({type:"boxend",originalEvent:k,position:{x:R[0],y:R[1]}}),"additive"===B.selectionType()||he||B.$(t).unmerge(Ie).unselect(),Ie.emit("box").stdFilter(function(pt){return pt.selectable()&&!pt.selected()}).select().emit("boxselect"),e.redraw()}if(e.hoverData.dragging&&(e.hoverData.dragging=!1,e.redrawHint("select",!0),e.redrawHint("eles",!0),e.redraw()),!j[4]){e.redrawHint("drag",!0),e.redrawHint("eles",!0);var Le=K&&K.grabbed();c(ee),Le&&(K.emit("freeon"),ee.emit("free"),e.dragData.didDrag&&(K.emit("dragfreeon"),ee.emit("dragfree")))}}j[4]=0,e.hoverData.down=null,e.hoverData.cxtStarted=!1,e.hoverData.draggingEles=!1,e.hoverData.selecting=!1,e.hoverData.isOverThresholdDrag=!1,e.dragData.didDrag=!1,e.hoverData.dragged=!1,e.hoverData.dragDelta=[],e.hoverData.mdownPos=null,e.hoverData.mdownGPos=null}},!1);var E,w,x,S,P,_,D,T,z,I,N,M,q,A=function(k){if(!e.scrollingPage){var B=e.cy,R=B.zoom(),j=B.pan(),O=e.projectIntoViewport(k.clientX,k.clientY),ee=[O[0]*R+j.x,O[1]*R+j.y];if(e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||0!==e.selection[4])k.preventDefault();else if(B.panningEnabled()&&B.userPanningEnabled()&&B.zoomingEnabled()&&B.userZoomingEnabled()){var K;k.preventDefault(),e.data.wheelZooming=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout(function(){e.data.wheelZooming=!1,e.redrawHint("eles",!0),e.redraw()},150),K=null!=k.deltaY?k.deltaY/-250:null!=k.wheelDeltaY?k.wheelDeltaY/1e3:k.wheelDelta/1e3,K*=e.wheelSensitivity,1===k.deltaMode&&(K*=33);var he=B.zoom()*Math.pow(10,K);"gesturechange"===k.type&&(he=e.gestureStartZoom*k.scale),B.zoom({level:he,renderedPosition:{x:ee[0],y:ee[1]}}),B.emit("gesturechange"===k.type?"pinchzoom":"scrollzoom")}}};e.registerBinding(e.container,"wheel",A,!0),e.registerBinding(window,"scroll",function(k){e.scrollingPage=!0,clearTimeout(e.scrollingPageTimeout),e.scrollingPageTimeout=setTimeout(function(){e.scrollingPage=!1},250)},!0),e.registerBinding(e.container,"gesturestart",function(k){e.gestureStartZoom=e.cy.zoom(),e.hasTouchStarted||k.preventDefault()},!0),e.registerBinding(e.container,"gesturechange",function(k){e.hasTouchStarted||A(k)},!0),e.registerBinding(e.container,"mouseout",function(k){var B=e.projectIntoViewport(k.clientX,k.clientY);e.cy.emit({originalEvent:k,type:"mouseout",position:{x:B[0],y:B[1]}})},!1),e.registerBinding(e.container,"mouseover",function(k){var B=e.projectIntoViewport(k.clientX,k.clientY);e.cy.emit({originalEvent:k,type:"mouseover",position:{x:B[0],y:B[1]}})},!1);var L,X,F,V,Y,$,re,te=function(k,B,R,j){return Math.sqrt((R-k)*(R-k)+(j-B)*(j-B))},de=function(k,B,R,j){return(R-k)*(R-k)+(j-B)*(j-B)};if(e.registerBinding(e.container,"touchstart",L=function(k){if(e.hasTouchStarted=!0,C(k)){p(),e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var B=e.cy,R=e.touchData.now,j=e.touchData.earlier;if(k.touches[0]){var O=e.projectIntoViewport(k.touches[0].clientX,k.touches[0].clientY);R[0]=O[0],R[1]=O[1]}if(k.touches[1]&&(O=e.projectIntoViewport(k.touches[1].clientX,k.touches[1].clientY),R[2]=O[0],R[3]=O[1]),k.touches[2]&&(O=e.projectIntoViewport(k.touches[2].clientX,k.touches[2].clientY),R[4]=O[0],R[5]=O[1]),k.touches[1]){e.touchData.singleTouchMoved=!0,c(e.dragData.touchDragEles);var ee=e.findContainerClientCoords();N=ee[2],M=ee[3],w=k.touches[0].clientY-(I=ee[1]),x=k.touches[1].clientX-(z=ee[0]),S=k.touches[1].clientY-I,q=0<=(E=k.touches[0].clientX-z)&&E<=N&&0<=x&&x<=N&&0<=w&&w<=M&&0<=S&&S<=M;var K=B.pan(),he=B.zoom();if(P=te(E,w,x,S),_=de(E,w,x,S),T=[((D=[(E+x)/2,(w+S)/2])[0]-K.x)/he,(D[1]-K.y)/he],_<4e4&&!k.touches[2]){var Me=e.findNearestElement(R[0],R[1],!0,!0),Te=e.findNearestElement(R[2],R[3],!0,!0);return Me&&Me.isNode()?(Me.activate().emit({originalEvent:k,type:"cxttapstart",position:{x:R[0],y:R[1]}}),e.touchData.start=Me):Te&&Te.isNode()?(Te.activate().emit({originalEvent:k,type:"cxttapstart",position:{x:R[0],y:R[1]}}),e.touchData.start=Te):B.emit({originalEvent:k,type:"cxttapstart",position:{x:R[0],y:R[1]}}),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,void e.redraw()}}if(k.touches[2])B.boxSelectionEnabled()&&k.preventDefault();else if(!k.touches[1]&&k.touches[0]){var Ie=e.findNearestElements(R[0],R[1],!0,!0),Ee=Ie[0];if(null!=Ee&&(Ee.activate(),e.touchData.start=Ee,e.touchData.starts=Ie,e.nodeIsGrabbable(Ee))){var Le=e.dragData.touchDragEles=B.collection(),pt=null;e.redrawHint("eles",!0),e.redrawHint("drag",!0),Ee.selected()?(pt=B.$(function(xt){return xt.selected()&&e.nodeIsGrabbable(xt)}),s(pt,{addToList:Le})):u(Ee,{addToList:Le}),o(Ee);var Ot=function(xt){return{originalEvent:k,type:xt,position:{x:R[0],y:R[1]}}};Ee.emit(Ot("grabon")),pt?pt.forEach(function(xt){xt.emit(Ot("grab"))}):Ee.emit(Ot("grab"))}n(Ee,["touchstart","tapstart","vmousedown"],k,{x:R[0],y:R[1]}),null==Ee&&(e.data.bgActivePosistion={x:O[0],y:O[1]},e.redrawHint("select",!0),e.redraw()),e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=+new Date,clearTimeout(e.touchData.tapholdTimeout),e.touchData.tapholdTimeout=setTimeout(function(){!1!==e.touchData.singleTouchMoved||e.pinching||e.touchData.selecting||n(e.touchData.start,["taphold"],k,{x:R[0],y:R[1]})},e.tapholdDuration)}if(k.touches.length>=1){for(var Wt=e.touchData.startPosition=[],It=0;It<R.length;It++)Wt[It]=j[It]=R[It];var Vt=k.touches[0];e.touchData.startGPosition=[Vt.clientX,Vt.clientY]}}},!1),e.registerBinding(window,"touchmove",X=function(k){var B=e.touchData.capture;if(B||C(k)){var R=e.selection,j=e.cy,O=e.touchData.now,ee=e.touchData.earlier,K=j.zoom();if(k.touches[0]){var he=e.projectIntoViewport(k.touches[0].clientX,k.touches[0].clientY);O[0]=he[0],O[1]=he[1]}k.touches[1]&&(he=e.projectIntoViewport(k.touches[1].clientX,k.touches[1].clientY),O[2]=he[0],O[3]=he[1]),k.touches[2]&&(he=e.projectIntoViewport(k.touches[2].clientX,k.touches[2].clientY),O[4]=he[0],O[5]=he[1]);var Me,Te=e.touchData.startGPosition;if(B&&k.touches[0]&&Te){for(var Ie=[],Ee=0;Ee<O.length;Ee++)Ie[Ee]=O[Ee]-ee[Ee];var Le=k.touches[0].clientX-Te[0],Ot=k.touches[0].clientY-Te[1];Me=Le*Le+Ot*Ot>=e.touchTapThreshold2}if(B&&e.touchData.cxt){k.preventDefault();var Wt=k.touches[0].clientX-z,It=k.touches[0].clientY-I,Vt=k.touches[1].clientX-z,xt=k.touches[1].clientY-I,Sn=de(Wt,It,Vt,xt);if(Sn/_>=2.25||Sn>=22500){e.touchData.cxt=!1,e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var Pn={originalEvent:k,type:"cxttapend",position:{x:O[0],y:O[1]}};e.touchData.start?(e.touchData.start.unactivate().emit(Pn),e.touchData.start=null):j.emit(Pn)}}if(B&&e.touchData.cxt){Pn={originalEvent:k,type:"cxtdrag",position:{x:O[0],y:O[1]}},e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.touchData.start?e.touchData.start.emit(Pn):j.emit(Pn),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0;var qt=e.findNearestElement(O[0],O[1],!0,!0);e.touchData.cxtOver&&qt===e.touchData.cxtOver||(e.touchData.cxtOver&&e.touchData.cxtOver.emit({originalEvent:k,type:"cxtdragout",position:{x:O[0],y:O[1]}}),e.touchData.cxtOver=qt,qt&&qt.emit({originalEvent:k,type:"cxtdragover",position:{x:O[0],y:O[1]}}))}else if(B&&k.touches[2]&&j.boxSelectionEnabled())k.preventDefault(),e.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,e.touchData.selecting||j.emit({originalEvent:k,type:"boxstart",position:{x:O[0],y:O[1]}}),e.touchData.selecting=!0,e.touchData.didSelect=!0,R[4]=1,R&&0!==R.length&&void 0!==R[0]?(R[2]=(O[0]+O[2]+O[4])/3,R[3]=(O[1]+O[3]+O[5])/3):(R[0]=(O[0]+O[2]+O[4])/3,R[1]=(O[1]+O[3]+O[5])/3,R[2]=(O[0]+O[2]+O[4])/3+1,R[3]=(O[1]+O[3]+O[5])/3+1),e.redrawHint("select",!0),e.redraw();else if(B&&k.touches[1]&&!e.touchData.didSelect&&j.zoomingEnabled()&&j.panningEnabled()&&j.userZoomingEnabled()&&j.userPanningEnabled()){if(k.preventDefault(),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),cn=e.dragData.touchDragEles){e.redrawHint("drag",!0);for(var Kt=0;Kt<cn.length;Kt++){var Kr=cn[Kt]._private;Kr.grabbed=!1,Kr.rscratch.inDragLayer=!1}}var Zn=e.touchData.start,_n=te(Wt=k.touches[0].clientX-z,It=k.touches[0].clientY-I,Vt=k.touches[1].clientX-z,xt=k.touches[1].clientY-I),Un=_n/P;if(q){var $n=(Wt-E+(Vt-x))/2,oh=(It-w+(xt-S))/2,Gr=j.zoom(),Xi=Gr*Un,La=j.pan(),Tl=T[0]*Gr+La.x,zl=T[1]*Gr+La.y,sh={x:-Xi/Gr*(Tl-La.x-$n)+Tl,y:-Xi/Gr*(zl-La.y-oh)+zl};if(Zn&&Zn.active()){var cn=e.dragData.touchDragEles;c(cn),e.redrawHint("drag",!0),e.redrawHint("eles",!0),Zn.unactivate().emit("freeon"),cn.emit("free"),e.dragData.didDrag&&(Zn.emit("dragfreeon"),cn.emit("dragfree"))}j.viewport({zoom:Xi,pan:sh,cancelOnFailedZoom:!0}),j.emit("pinchzoom"),P=_n,E=Wt,w=It,x=Vt,S=xt,e.pinching=!0}k.touches[0]&&(he=e.projectIntoViewport(k.touches[0].clientX,k.touches[0].clientY),O[0]=he[0],O[1]=he[1]),k.touches[1]&&(he=e.projectIntoViewport(k.touches[1].clientX,k.touches[1].clientY),O[2]=he[0],O[3]=he[1]),k.touches[2]&&(he=e.projectIntoViewport(k.touches[2].clientX,k.touches[2].clientY),O[4]=he[0],O[5]=he[1])}else if(k.touches[0]&&!e.touchData.didSelect){var $t=e.touchData.start,Yi=e.touchData.last;if(e.hoverData.draggingEles||e.swipePanning||(qt=e.findNearestElement(O[0],O[1],!0,!0)),B&&null!=$t&&k.preventDefault(),B&&null!=$t&&e.nodeIsDraggable($t))if(Me){cn=e.dragData.touchDragEles;var Bl=!e.dragData.didDrag;Bl&&s(cn,{inDragLayer:!0}),e.dragData.didDrag=!0;var Zr={x:0,y:0};Z(Ie[0])&&Z(Ie[1])&&(Zr.x+=Ie[0],Zr.y+=Ie[1],Bl&&(e.redrawHint("eles",!0),(nn=e.touchData.dragDelta)&&Z(nn[0])&&Z(nn[1])&&(Zr.x+=nn[0],Zr.y+=nn[1]))),e.hoverData.draggingEles=!0,cn.silentShift(Zr).emit("position drag"),e.redrawHint("drag",!0),e.touchData.startPosition[0]==ee[0]&&e.touchData.startPosition[1]==ee[1]&&e.redrawHint("eles",!0),e.redraw()}else{var nn;0===(nn=e.touchData.dragDelta=e.touchData.dragDelta||[]).length?(nn.push(Ie[0]),nn.push(Ie[1])):(nn[0]+=Ie[0],nn[1]+=Ie[1])}if(n($t||qt,["touchmove","tapdrag","vmousemove"],k,{x:O[0],y:O[1]}),$t&&$t.grabbed()||qt==Yi||(Yi&&Yi.emit({originalEvent:k,type:"tapdragout",position:{x:O[0],y:O[1]}}),qt&&qt.emit({originalEvent:k,type:"tapdragover",position:{x:O[0],y:O[1]}})),e.touchData.last=qt,B)for(Kt=0;Kt<O.length;Kt++)O[Kt]&&e.touchData.startPosition[Kt]&&Me&&(e.touchData.singleTouchMoved=!0);B&&(null==$t||$t.pannable())&&j.panningEnabled()&&j.userPanningEnabled()&&(a($t,e.touchData.starts)&&(k.preventDefault(),e.data.bgActivePosistion||(e.data.bgActivePosistion=nr(e.touchData.startPosition)),e.swipePanning?(j.panBy({x:Ie[0]*K,y:Ie[1]*K}),j.emit("dragpan")):Me&&(e.swipePanning=!0,j.panBy({x:Le*K,y:Ot*K}),j.emit("dragpan"),$t&&($t.unactivate(),e.redrawHint("select",!0),e.touchData.start=null))),he=e.projectIntoViewport(k.touches[0].clientX,k.touches[0].clientY),O[0]=he[0],O[1]=he[1])}for(Ee=0;Ee<O.length;Ee++)ee[Ee]=O[Ee];B&&k.touches.length>0&&!e.hoverData.draggingEles&&!e.swipePanning&&null!=e.data.bgActivePosistion&&(e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.redraw())}},!1),e.registerBinding(window,"touchcancel",F=function(k){var B=e.touchData.start;e.touchData.capture=!1,B&&B.unactivate()}),e.registerBinding(window,"touchend",V=function(k){var B=e.touchData.start;if(e.touchData.capture){0===k.touches.length&&(e.touchData.capture=!1),k.preventDefault();var R=e.selection;e.swipePanning=!1,e.hoverData.draggingEles=!1;var j,O=e.cy,ee=O.zoom(),K=e.touchData.now,he=e.touchData.earlier;if(k.touches[0]){var Me=e.projectIntoViewport(k.touches[0].clientX,k.touches[0].clientY);K[0]=Me[0],K[1]=Me[1]}if(k.touches[1]&&(Me=e.projectIntoViewport(k.touches[1].clientX,k.touches[1].clientY),K[2]=Me[0],K[3]=Me[1]),k.touches[2]&&(Me=e.projectIntoViewport(k.touches[2].clientX,k.touches[2].clientY),K[4]=Me[0],K[5]=Me[1]),B&&B.unactivate(),e.touchData.cxt){if(j={originalEvent:k,type:"cxttapend",position:{x:K[0],y:K[1]}},B?B.emit(j):O.emit(j),!e.touchData.cxtDragged){var Te={originalEvent:k,type:"cxttap",position:{x:K[0],y:K[1]}};B?B.emit(Te):O.emit(Te)}return e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,void e.redraw()}if(!k.touches[2]&&O.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=!1;var Ie=O.collection(e.getAllInBox(R[0],R[1],R[2],R[3]));R[0]=void 0,R[1]=void 0,R[2]=void 0,R[3]=void 0,R[4]=0,e.redrawHint("select",!0),O.emit({type:"boxend",originalEvent:k,position:{x:K[0],y:K[1]}}),Ie.emit("box").stdFilter(function(Sn){return Sn.selectable()&&!Sn.selected()}).select().emit("boxselect"),Ie.nonempty()&&e.redrawHint("eles",!0),e.redraw()}if(null!=B&&B.unactivate(),k.touches[2])e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);else if(!k.touches[1]&&!k.touches[0]&&!k.touches[0]){e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var Ee=e.dragData.touchDragEles;if(null!=B){var Le=B._private.grabbed;c(Ee),e.redrawHint("drag",!0),e.redrawHint("eles",!0),Le&&(B.emit("freeon"),Ee.emit("free"),e.dragData.didDrag&&(B.emit("dragfreeon"),Ee.emit("dragfree"))),n(B,["touchend","tapend","vmouseup","tapdragout"],k,{x:K[0],y:K[1]}),B.unactivate(),e.touchData.start=null}else{var pt=e.findNearestElement(K[0],K[1],!0,!0);n(pt,["touchend","tapend","vmouseup","tapdragout"],k,{x:K[0],y:K[1]})}var Ot=e.touchData.startPosition[0]-K[0],It=e.touchData.startPosition[1]-K[1],Vt=(Ot*Ot+It*It)*ee*ee;e.touchData.singleTouchMoved||(B||O.$(":selected").unselect(["tapunselect"]),n(B,["tap","vclick"],k,{x:K[0],y:K[1]}),Y=!1,k.timeStamp-re<=O.multiClickDebounceTime()?($&&clearTimeout($),Y=!0,re=null,n(B,["dbltap","vdblclick"],k,{x:K[0],y:K[1]})):($=setTimeout(function(){Y||n(B,["onetap","voneclick"],k,{x:K[0],y:K[1]})},O.multiClickDebounceTime()),re=k.timeStamp)),null!=B&&!e.dragData.didDrag&&B._private.selectable&&Vt<e.touchTapThreshold2&&!e.pinching&&("single"===O.selectionType()?(O.$(t).unmerge(B).unselect(["tapunselect"]),B.select(["tapselect"])):B.selected()?B.unselect(["tapunselect"]):B.select(["tapselect"]),e.redrawHint("eles",!0)),e.touchData.singleTouchMoved=!0}for(var xt=0;xt<K.length;xt++)he[xt]=K[xt];e.dragData.didDrag=!1,0===k.touches.length&&(e.touchData.dragDelta=[],e.touchData.startPosition=null,e.touchData.startGPosition=null,e.touchData.didSelect=!1),k.touches.length<2&&(1===k.touches.length&&(e.touchData.startGPosition=[k.touches[0].clientX,k.touches[0].clientY]),e.pinching=!1,e.redrawHint("eles",!0),e.redraw())}},!1),"undefined"==typeof TouchEvent){var oe=[],ye=function(k){return{clientX:k.clientX,clientY:k.clientY,force:1,identifier:k.pointerId,pageX:k.pageX,pageY:k.pageY,radiusX:k.width/2,radiusY:k.height/2,screenX:k.screenX,screenY:k.screenY,target:k.target}},Q=function(k){for(var B=0;B<oe.length;B++)if(oe[B].event.pointerId===k.pointerId)return void oe.splice(B,1)},le=function(k){k.touches=oe.map(function(B){return B.touch})},pe=function(k){return"mouse"===k.pointerType||4===k.pointerType};e.registerBinding(e.container,"pointerdown",function(k){pe(k)||(k.preventDefault(),function(k){var B;oe.push({event:B=k,touch:ye(B)})}(k),le(k),L(k))}),e.registerBinding(e.container,"pointerup",function(k){pe(k)||(Q(k),le(k),V(k))}),e.registerBinding(e.container,"pointercancel",function(k){pe(k)||(Q(k),le(k),F())}),e.registerBinding(e.container,"pointermove",function(k){var B,R;pe(k)||(k.preventDefault(),B=k,(R=oe.filter(function(j){return j.event.pointerId===B.pointerId})[0]).event=B,R.touch=ye(B),le(k),X(k))})}}},kn={generatePolygon:function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,draw:function(n,r,a,i,o){this.renderer.nodeShapeImpl("polygon",n,r,a,i,o,this.points)},intersectLine:function(n,r,a,i,o,l,s){return Dr(o,l,this.points,n,r,a/2,i/2,s)},checkPoint:function(n,r,a,i,o,l,s){return sn(n,r,this.points,l,s,i,o,[0,-1],a)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,n,r,a){this.renderer.nodeShapeImpl(this.name,e,t,n,r,a)},intersectLine:function(e,t,n,r,a,i,o){return function(l,s,u,c,d,p){var f=u-l,h=c-s;f/=d,h/=p;var v=Math.sqrt(f*f+h*h),m=v-1;if(m<0)return[];var g=m/v;return[(u-l)*g+l,(c-s)*g+s]}(a,i,e,t,n/2+o,r/2+o)},checkPoint:function(e,t,n,r,a,i,o){return Rn(e,t,r,a,i,o,n)}}},generateRoundPolygon:function(e,t){for(var n=new Array(2*t.length),r=0;r<t.length/2;r++){var i,a=2*r;i=r<t.length/2-1?2*(r+1):0,n[4*r]=t[a],n[4*r+1]=t[a+1];var o=t[i]-t[a],l=t[i+1]-t[a+1],s=Math.sqrt(o*o+l*l);n[4*r+2]=o/s,n[4*r+3]=l/s}return this.nodeShapes[e]={renderer:this,name:e,points:n,draw:function(u,c,d,p,f){this.renderer.nodeShapeImpl("round-polygon",u,c,d,p,f,this.points)},intersectLine:function(u,c,d,p,f,h,v){return function(m,g,y,b,C,E,w,x){for(var S,P=[],_=new Array(y.length),D=E/2,T=w/2,z=Ka(E,w),I=0;I<y.length/4;I++){var N,M;M=0===I?y.length-2:4*I-2,N=4*I+2;var q=b+D*y[4*I],A=C+T*y[4*I+1],X=z/Math.tan(Math.acos(-y[M]*y[N]-y[M+1]*y[N+1])/2),F=q-X*y[M],V=A-X*y[M+1],Y=q+X*y[N],$=A+X*y[N+1];0===I?(_[y.length-2]=F,_[y.length-1]=V):(_[4*I-2]=F,_[4*I-1]=V),_[4*I]=Y,_[4*I+1]=$;var re=y[M+1],te=-y[M];re*y[N]+te*y[N+1]<0&&(re*=-1,te*=-1),0!==(S=Mr(m,g,b,C,F+re*z,V+te*z,z)).length&&P.push(S[0],S[1])}for(var de=0;de<_.length/4;de++)0!==(S=gn(m,g,b,C,_[4*de],_[4*de+1],_[4*de+2],_[4*de+3],!1)).length&&P.push(S[0],S[1]);if(P.length>2){for(var oe=[P[0],P[1]],ye=Math.pow(oe[0]-m,2)+Math.pow(oe[1]-g,2),ke=1;ke<P.length/2;ke++){var Q=Math.pow(P[2*ke]-m,2)+Math.pow(P[2*ke+1]-g,2);Q<=ye&&(oe[0]=P[2*ke],oe[1]=P[2*ke+1],ye=Q)}return oe}return P}(f,h,this.points,u,c,d,p)},checkPoint:function(u,c,d,p,f,h,v){return function(m,g,y,b,C,E,w){for(var x=new Array(y.length),S=E/2,P=w/2,_=Ka(E,w),D=_*_,T=0;T<y.length/4;T++){var z,I;I=0===T?y.length-2:4*T-2,z=4*T+2;var N=b+S*y[4*T],M=C+P*y[4*T+1],A=_/Math.tan(Math.acos(-y[I]*y[z]-y[I+1]*y[z+1])/2),L=N-A*y[I],X=M-A*y[I+1],F=N+A*y[z],V=M+A*y[z+1];x[4*T]=L,x[4*T+1]=X,x[4*T+2]=F,x[4*T+3]=V;var Y=y[I+1],$=-y[I];Y*y[z]+$*y[z+1]<0&&(Y*=-1,$*=-1);var te=X+$*_;if(Math.pow(L+Y*_-m,2)+Math.pow(te-g,2)<=D)return!0}return Ft(m,g,x)}(u,c,this.points,h,v,p,f)}}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Rt(4,0),draw:function(e,t,n,r,a){this.renderer.nodeShapeImpl(this.name,e,t,n,r,a)},intersectLine:function(e,t,n,r,a,i,o){return Ji(a,i,e,t,n,r,o)},checkPoint:function(e,t,n,r,a,i,o){var l=Tr(r,a),s=2*l;return!!(sn(e,t,this.points,i,o,r,a-s,[0,-1],n)||sn(e,t,this.points,i,o,r-s,a,[0,-1],n)||Rn(e,t,s,s,i-r/2+l,o-a/2+l,n)||Rn(e,t,s,s,i+r/2-l,o-a/2+l,n)||Rn(e,t,s,s,i+r/2-l,o+a/2-l,n)||Rn(e,t,s,s,i-r/2+l,o+a/2-l,n))}}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:Rt(4,0),draw:function(e,t,n,r,a){this.renderer.nodeShapeImpl(this.name,e,t,n,r,a)},generateCutTrianglePts:function(e,t,n,r){var a=this.cornerLength,i=t/2,o=e/2,l=n-o,s=n+o,u=r-i,c=r+i;return{topLeft:[l,u+a,l+a,u,l+a,u+a],topRight:[s-a,u,s,u+a,s-a,u+a],bottomRight:[s,c-a,s-a,c,s-a,c-a],bottomLeft:[l+a,c,l,c-a,l+a,c-a]}},intersectLine:function(e,t,n,r,a,i,o){var l=this.generateCutTrianglePts(n+2*o,r+2*o,e,t),s=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return Dr(a,i,s,e,t)},checkPoint:function(e,t,n,r,a,i,o){if(sn(e,t,this.points,i,o,r,a-2*this.cornerLength,[0,-1],n)||sn(e,t,this.points,i,o,r-2*this.cornerLength,a,[0,-1],n))return!0;var l=this.generateCutTrianglePts(r,a,i,o);return Ft(e,t,l.topLeft)||Ft(e,t,l.topRight)||Ft(e,t,l.bottomRight)||Ft(e,t,l.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Rt(4,0),draw:function(e,t,n,r,a){this.renderer.nodeShapeImpl(this.name,e,t,n,r,a)},intersectLine:function(e,t,n,r,a,i,o){var l=this.generateBarrelBezierPts(n+2*o,r+2*o,e,t),s=function(c){var d=rr({x:c[0],y:c[1]},{x:c[2],y:c[3]},{x:c[4],y:c[5]},.15),p=rr({x:c[0],y:c[1]},{x:c[2],y:c[3]},{x:c[4],y:c[5]},.5),f=rr({x:c[0],y:c[1]},{x:c[2],y:c[3]},{x:c[4],y:c[5]},.85);return[c[0],c[1],d.x,d.y,p.x,p.y,f.x,f.y,c[4],c[5]]},u=[].concat(s(l.topLeft),s(l.topRight),s(l.bottomRight),s(l.bottomLeft));return Dr(a,i,u,e,t)},generateBarrelBezierPts:function(e,t,n,r){var a=t/2,i=e/2,o=n-i,l=n+i,s=r-a,u=r+a,c=Ga(e,t),d=c.heightOffset,p=c.widthOffset,f=c.ctrlPtOffsetPct*e,h={topLeft:[o,s+d,o+f,s,o+p,s],topRight:[l-p,s,l-f,s,l,s+d],bottomRight:[l,u-d,l-f,u,l-p,u],bottomLeft:[o+p,u,o+f,u,o,u-d]};return h.topLeft.isTop=!0,h.topRight.isTop=!0,h.bottomLeft.isBottom=!0,h.bottomRight.isBottom=!0,h},checkPoint:function(e,t,n,r,a,i,o){var l=Ga(r,a),u=l.widthOffset;if(sn(e,t,this.points,i,o,r,a-2*l.heightOffset,[0,-1],n)||sn(e,t,this.points,i,o,r-2*u,a,[0,-1],n))return!0;for(var c=this.generateBarrelBezierPts(r,a,i,o),d=function(C,E,w){var x,S,P=w[4],_=w[2],D=w[0],T=w[5],z=w[1],I=Math.min(P,D),N=Math.max(P,D),M=Math.min(T,z),q=Math.max(T,z);if(I<=C&&C<=N&&M<=E&&E<=q){var A=[(x=P)-2*(S=_)+D,2*(S-x),x],L=function(X,F,V,Y){var $=F*F-4*X*(V-=Y);if($<0)return[];var re=Math.sqrt($),te=2*X;return[(-F+re)/te,(-F-re)/te]}(A[0],A[1],A[2],C).filter(function(X){return 0<=X&&X<=1});if(L.length>0)return L[0]}return null},p=Object.keys(c),f=0;f<p.length;f++){var h=c[p[f]],v=d(e,t,h);if(null!=v){var b=kt(h[5],h[3],h[1],v);if(h.isTop&&b<=t||h.isBottom&&t<=b)return!0}}return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Rt(4,0),draw:function(e,t,n,r,a){this.renderer.nodeShapeImpl(this.name,e,t,n,r,a)},intersectLine:function(e,t,n,r,a,i,o){var l=t-(r/2+o),s=gn(a,i,e,t,e-(n/2+o),l,e+(n/2+o),l,!1);return s.length>0?s:Ji(a,i,e,t,n,r,o)},checkPoint:function(e,t,n,r,a,i,o){var l=Tr(r,a),s=2*l;if(sn(e,t,this.points,i,o,r,a-s,[0,-1],n)||sn(e,t,this.points,i,o,r-s,a,[0,-1],n))return!0;var u=r/2+2*n,c=a/2+2*n;return!!Ft(e,t,[i-u,o-c,i-u,o,i+u,o,i+u,o-c])||!!Rn(e,t,s,s,i+r/2-l,o+a/2-l,n)||!!Rn(e,t,s,s,i-r/2+l,o+a/2-l,n)}}},registerNodeShapes:function(){var e=this.nodeShapes={},t=this;this.generateEllipse(),this.generatePolygon("triangle",Rt(3,0)),this.generateRoundPolygon("round-triangle",Rt(3,0)),this.generatePolygon("rectangle",Rt(4,0)),e.square=e.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var n=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",n),this.generateRoundPolygon("round-diamond",n),this.generatePolygon("pentagon",Rt(5,0)),this.generateRoundPolygon("round-pentagon",Rt(5,0)),this.generatePolygon("hexagon",Rt(6,0)),this.generateRoundPolygon("round-hexagon",Rt(6,0)),this.generatePolygon("heptagon",Rt(7,0)),this.generateRoundPolygon("round-heptagon",Rt(7,0)),this.generatePolygon("octagon",Rt(8,0)),this.generateRoundPolygon("round-octagon",Rt(8,0));var r=new Array(20),a=Wa(5,0),i=Wa(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var l=0;l<i.length/2;l++)i[2*l]*=o,i[2*l+1]*=o;for(l=0;l<5;l++)r[4*l]=a[2*l],r[4*l+1]=a[2*l+1],r[4*l+2]=i[2*l],r[4*l+3]=i[2*l+1];r=no(r),this.generatePolygon("star",r),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var s=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",s),this.generateRoundPolygon("round-tag",s),e.makePolygon=function(u){var c,d="polygon-"+u.join("$");return(c=this[d])?c:t.generatePolygon(d,u)}}},sl={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(e){e=e||Ki();var t=this;void 0===t.averageRedrawTime&&(t.averageRedrawTime=0),void 0===t.lastRedrawTime&&(t.lastRedrawTime=0),void 0===t.lastDrawTime&&(t.lastDrawTime=0),t.requestedFrame=!0,t.renderOptions=e},beforeRender:function(e,t){if(!this.destroyed){null==t&&ot("Priority is not optional for beforeRender");var n=this.beforeRenderCallbacks;n.push({fn:e,priority:t}),n.sort(function(r,a){return a.priority-r.priority})}}},ll=function(e,t,n){for(var r=e.beforeRenderCallbacks,a=0;a<r.length;a++)r[a].fn(t,n)};sl.startRenderLoop=function(){var e=this,t=e.cy;e.renderLoopStarted||(e.renderLoopStarted=!0,Be(function n(r){if(!e.destroyed){if(!t.batching())if(e.requestedFrame&&!e.skipFrame){ll(e,!0,r);var a=_e();e.render(e.renderOptions);var i=e.lastDrawTime=_e();void 0===e.averageRedrawTime&&(e.averageRedrawTime=i-a),void 0===e.redrawCount&&(e.redrawCount=0),e.redrawCount++,void 0===e.redrawTotalTime&&(e.redrawTotalTime=0);var o=i-a;e.redrawTotalTime+=o,e.lastRedrawTime=o,e.averageRedrawTime=e.averageRedrawTime/2+o/2,e.requestedFrame=!1}else ll(e,!1,r);e.skipFrame=!1,Be(n)}}))};var ul=function(e){this.init(e)},wr=ul.prototype;wr.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],wr.init=function(e){var t=this;t.options=e,t.cy=e.cy;var n=t.container=e.cy.container();if(U){var r=U.document,a=r.head,i="__________cytoscape_container",o=null!=r.getElementById("__________cytoscape_stylesheet");if(n.className.indexOf(i)<0&&(n.className=(n.className||"")+" "+i),!o){var l=r.createElement("style");l.id="__________cytoscape_stylesheet",l.innerHTML="."+i+" { position: relative; }",a.insertBefore(l,a.children[0])}"static"===U.getComputedStyle(n).getPropertyValue("position")&&Ue("A Cytoscape container has style position:static and so can not use UI extensions properly")}t.selection=[void 0,void 0,void 0,void 0,0],t.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],t.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},t.dragData={possibleDragElements:[]},t.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},t.redraws=0,t.showFps=e.showFps,t.debug=e.debug,t.hideEdgesOnViewport=e.hideEdgesOnViewport,t.textureOnViewport=e.textureOnViewport,t.wheelSensitivity=e.wheelSensitivity,t.motionBlurEnabled=e.motionBlur,t.forcedPixelRatio=Z(e.pixelRatio)?e.pixelRatio:null,t.motionBlur=e.motionBlur,t.motionBlurOpacity=e.motionBlurOpacity,t.motionBlurTransparency=1-t.motionBlurOpacity,t.motionBlurPxRatio=1,t.mbPxRBlurry=1,t.minMbLowQualFrames=4,t.fullQualityMb=!1,t.clearedForMotionBlur=[],t.desktopTapThreshold=e.desktopTapThreshold,t.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,t.touchTapThreshold=e.touchTapThreshold,t.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,t.tapholdDuration=500,t.bindings=[],t.beforeRenderCallbacks=[],t.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},t.registerNodeShapes(),t.registerArrowShapes(),t.registerCalculationListeners()},wr.notify=function(e,t){var n=this;this.destroyed||("init"!==e?"destroy"!==e?(("add"===e||"remove"===e||"move"===e&&n.cy.hasCompoundNodes()||"load"===e||"zorder"===e||"mount"===e)&&n.invalidateCachedZSortedEles(),"viewport"===e&&n.redrawHint("select",!0),"load"!==e&&"resize"!==e&&"mount"!==e||(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container)),n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()):n.destroy():n.load())},wr.destroy=function(){var e=this;e.destroyed=!0,e.cy.stopAnimationLoop();for(var t=0;t<e.bindings.length;t++){var n=e.bindings[t],r=n.target;(r.off||r.removeEventListener).apply(r,n.args)}if(e.bindings=[],e.beforeRenderCallbacks=[],e.onUpdateEleCalcsFns=[],e.removeObserver&&e.removeObserver.disconnect(),e.styleObserver&&e.styleObserver.disconnect(),e.resizeObserver&&e.resizeObserver.disconnect(),e.labelCalcDiv)try{document.body.removeChild(e.labelCalcDiv)}catch(a){}},wr.isHeadless=function(){return!1},[Nd,ol,Fd,Xr,kn,sl].forEach(function(e){me(wr,e)});var cl=function(e){return function(){var t=this,n=this.renderer;if(!t.dequeueingSetup){t.dequeueingSetup=!0;var r=we(function(){n.redrawHint("eles",!0),n.redrawHint("drag",!0),n.redraw()},e.deqRedrawThreshold);n.beforeRender(function(i,o){var l=_e(),s=n.averageRedrawTime,u=n.lastRedrawTime,c=[],d=n.cy.extent(),p=n.getPixelRatio();for(i||n.flushRenderedStyleQueue();;){var f=_e(),h=f-l,v=f-o;if(u<1e3/60){if(v>=e.deqFastCost*(1e3/60-(i?s:0)))break}else if(i){if(h>=e.deqCost*u||h>=e.deqAvgCost*s)break}else if(v>=e.deqNoDrawCost*(1e3/60))break;var g=e.deq(t,p,d);if(!(g.length>0))break;for(var y=0;y<g.length;y++)c.push(g[y])}c.length>0&&(e.onDeqd(t,c),!i&&e.shouldRedraw(t,c,p,d)&&r())},(e.priority||er)(t))}}},jd=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hn;fe(this,e),this.idsByKey=new en,this.keyForId=new en,this.cachesByLvl=new en,this.lvls=[],this.getKey=t,this.doesEleInvalidateKey=n}return J(e,[{key:"getIdsFor",value:function(t){null==t&&ot("Can not get id list for null key");var n=this.idsByKey,r=this.idsByKey.get(t);return r||(r=new tr,n.set(t,r)),r}},{key:"addIdForKey",value:function(t,n){null!=t&&this.getIdsFor(t).add(n)}},{key:"deleteIdForKey",value:function(t,n){null!=t&&this.getIdsFor(t).delete(n)}},{key:"getNumberOfIdsForKey",value:function(t){return null==t?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var n=t.id(),r=this.keyForId.get(n),a=this.getKey(t);this.deleteIdForKey(r,n),this.addIdForKey(a,n),this.keyForId.set(n,a)}},{key:"deleteKeyMappingFor",value:function(t){var n=t.id(),r=this.keyForId.get(n);this.deleteIdForKey(r,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(t){var n=t.id();return this.keyForId.get(n)!==this.getKey(t)}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var n=this.cachesByLvl,r=this.lvls,a=n.get(t);return a||(a=new en,n.set(t,a),r.push(t)),a}},{key:"getCache",value:function(t,n){return this.getCachesAt(n).get(t)}},{key:"get",value:function(t,n){var r=this.getKey(t),a=this.getCache(r,n);return null!=a&&this.updateKeyMappingFor(t),a}},{key:"getForCachedKey",value:function(t,n){var r=this.keyForId.get(t.id());return this.getCache(r,n)}},{key:"hasCache",value:function(t,n){return this.getCachesAt(n).has(t)}},{key:"has",value:function(t,n){var r=this.getKey(t);return this.hasCache(r,n)}},{key:"setCache",value:function(t,n,r){r.key=t,this.getCachesAt(n).set(t,r)}},{key:"set",value:function(t,n,r){var a=this.getKey(t);this.setCache(a,n,r),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,n){this.getCachesAt(n).delete(t)}},{key:"delete",value:function(t,n){var r=this.getKey(t);this.deleteCache(r,n)}},{key:"invalidateKey",value:function(t){var n=this;this.lvls.forEach(function(r){return n.deleteCache(t,r)})}},{key:"invalidate",value:function(t){var n=t.id(),r=this.keyForId.get(n);this.deleteKeyMappingFor(t);var a=this.doesEleInvalidateKey(t);return a&&this.invalidateKey(r),a||0===this.getNumberOfIdsForKey(r)}}]),e}(),Er={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},Vd=Ct({getKey:null,doesEleInvalidateKey:hn,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:Bn,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Yr=function(e,t){this.renderer=e,this.onDequeues=[];var n=Vd(t);me(this,n),this.lookup=new jd(n.getKey,n.doesEleInvalidateKey),this.setupDequeueing()},bt=Yr.prototype;bt.reasons=Er,bt.getTextureQueue=function(e){return this.eleImgCaches=this.eleImgCaches||{},this.eleImgCaches[e]=this.eleImgCaches[e]||[]},bt.getRetiredTextureQueue=function(e){var t=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return t[e]=t[e]||[]},bt.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new Pr(function(e,t){return t.reqs-e.reqs})},bt.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},bt.getElement=function(e,t,n,r,a){var i=this,o=this.renderer,l=o.cy.zoom(),s=this.lookup;if(!t||0===t.w||0===t.h||isNaN(t.w)||isNaN(t.h)||!e.visible()||e.removed()||!i.allowEdgeTxrCaching&&e.isEdge()||!i.allowParentTxrCaching&&e.isParent())return null;if(null==r&&(r=Math.ceil(qa(l*n))),r<-4)r=-4;else if(l>=7.99||r>3)return null;var u=Math.pow(2,r),c=t.h*u,d=t.w*u,p=o.eleTextBiggerThanMin(e,u);if(!this.isVisible(e,p))return null;var f,h=s.get(e,r);if(h&&h.invalidated&&(h.invalidated=!1,h.texture.invalidatedWidth-=h.width),h)return h;if(f=c<=25?25:c<=50?50:50*Math.ceil(c/50),c>1024||d>1024)return null;var v=i.getTextureQueue(f),m=v[v.length-2],g=function(){return i.recycleTexture(f,d)||i.addTexture(f,d)};m||(m=v[v.length-1]),m||(m=g()),m.width-m.usedWidth<d&&(m=g());for(var y,b=function(N){return N&&N.scaledLabelShown===p},C=a&&a===Er.dequeue,E=a&&a===Er.highQuality,w=a&&a===Er.downscale,x=r+1;x<=3;x++){var S=s.get(e,x);if(S){y=S;break}}var P=y&&y.level===r+1?y:null,_=function(){m.context.drawImage(P.texture.canvas,P.x,0,P.width,P.height,m.usedWidth,0,d,c)};if(m.context.setTransform(1,0,0,1,0,0),m.context.clearRect(m.usedWidth,0,d,f),b(P))_();else if(b(y)){if(!E)return i.queueElement(e,y.level-1),y;for(var D=y.level;D>r;D--)P=i.getElement(e,t,n,D,Er.downscale);_()}else{var T;if(!C&&!E&&!w)for(var z=r-1;z>=-4;z--){var I=s.get(e,z);if(I){T=I;break}}if(b(T))return i.queueElement(e,r),T;m.context.translate(m.usedWidth,0),m.context.scale(u,u),this.drawElement(m.context,e,t,p,!1),m.context.scale(1/u,1/u),m.context.translate(-m.usedWidth,0)}return h={x:m.usedWidth,texture:m,level:r,scale:u,width:d,height:c,scaledLabelShown:p},m.usedWidth+=Math.ceil(d+8),m.eleCaches.push(h),s.set(e,r,h),i.checkTextureFullness(m),h},bt.invalidateElements=function(e){for(var t=0;t<e.length;t++)this.invalidateElement(e[t])},bt.invalidateElement=function(e){var t=this.lookup,n=[];if(t.isInvalid(e)){for(var r=-4;r<=3;r++){var a=t.getForCachedKey(e,r);a&&n.push(a)}if(t.invalidate(e))for(var i=0;i<n.length;i++){var o=n[i],l=o.texture;l.invalidatedWidth+=o.width,o.invalidated=!0,this.checkTextureUtility(l)}this.removeFromQueue(e)}},bt.checkTextureUtility=function(e){e.invalidatedWidth>=.2*e.width&&this.retireTexture(e)},bt.checkTextureFullness=function(e){var t=this.getTextureQueue(e.height);e.usedWidth/e.width>.8&&e.fullnessChecks>=10?pn(t,e):e.fullnessChecks++},bt.retireTexture=function(e){var t=e.height,n=this.getTextureQueue(t),r=this.lookup;pn(n,e),e.retired=!0;for(var a=e.eleCaches,i=0;i<a.length;i++){var o=a[i];r.deleteCache(o.key,o.level)}ja(a),this.getRetiredTextureQueue(t).push(e)},bt.addTexture=function(e,t){var n={};return this.getTextureQueue(e).push(n),n.eleCaches=[],n.height=e,n.width=Math.max(1024,t),n.usedWidth=0,n.invalidatedWidth=0,n.fullnessChecks=0,n.canvas=this.renderer.makeOffscreenCanvas(n.width,n.height),n.context=n.canvas.getContext("2d"),n},bt.recycleTexture=function(e,t){for(var n=this.getTextureQueue(e),r=this.getRetiredTextureQueue(e),a=0;a<r.length;a++){var i=r[a];if(i.width>=t)return i.retired=!1,i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,ja(i.eleCaches),i.context.setTransform(1,0,0,1,0,0),i.context.clearRect(0,0,i.width,i.height),pn(r,i),n.push(i),i}},bt.queueElement=function(e,t){var n=this.getElementQueue(),r=this.getElementKeyToQueue(),a=this.getKey(e),i=r[a];if(i)i.level=Math.max(i.level,t),i.eles.merge(e),i.reqs++,n.updateItem(i);else{var o={eles:e.spawn().merge(e),level:t,reqs:1,key:a};n.push(o),r[a]=o}},bt.dequeue=function(e){for(var t=this.getElementQueue(),n=this.getElementKeyToQueue(),r=[],a=this.lookup,i=0;i<1&&t.size()>0;i++){var o=t.pop(),l=o.key,s=o.eles[0],u=a.hasCache(s,o.level);if(n[l]=null,!u){r.push(o);var c=this.getBoundingBox(s);this.getElement(s,c,e,o.level,Er.dequeue)}}return r},bt.removeFromQueue=function(e){var t=this.getElementQueue(),n=this.getElementKeyToQueue(),r=this.getKey(e),a=n[r];null!=a&&(1===a.eles.length?(a.reqs=zn,t.updateItem(a),t.pop(),n[r]=null):a.eles.unmerge(e))},bt.onDequeue=function(e){this.onDequeues.push(e)},bt.offDequeue=function(e){pn(this.onDequeues,e)},bt.setupDequeueing=cl({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(e,t,n){return e.dequeue(t,n)},onDeqd:function(e,t){for(var n=0;n<e.onDequeues.length;n++)(0,e.onDequeues[n])(t)},shouldRedraw:function(e,t,n,r){for(var a=0;a<t.length;a++)for(var i=t[a].eles,o=0;o<i.length;o++){var l=i[o].boundingBox();if(Ya(l,r))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var dl=function(e){var t=this,n=t.renderer=e,r=n.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=_e()-500,t.skipping=!1,t.eleTxrDeqs=r.collection(),t.scheduleElementRefinement=we(function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)},50),n.beforeRender(function(a,i){t.skipping=i-t.lastInvalidationTime<=250},n.beforeRenderPriorities.lyrTxrSkip),t.layersQueue=new Pr(function(a,i){return i.reqs-a.reqs}),t.setupDequeueing()},Mt=dl.prototype,hl=0,qd=Math.pow(2,53)-1;Mt.makeLayer=function(e,t){var n=Math.pow(2,t),r=Math.ceil(e.w*n),a=Math.ceil(e.h*n),i=this.renderer.makeOffscreenCanvas(r,a),o={id:hl=++hl%qd,bb:e,level:t,width:r,height:a,canvas:i,context:i.getContext("2d"),eles:[],elesQueue:[],reqs:0},l=o.context,s=-o.bb.x1,u=-o.bb.y1;return l.scale(n,n),l.translate(s,u),o},Mt.getLayers=function(e,t,n){var r=this,a=r.renderer.cy.zoom(),i=r.firstGet;if(r.firstGet=!1,null==n)if((n=Math.ceil(qa(a*t)))<-4)n=-4;else if(a>=3.99||n>2)return null;r.validateLayersElesOrdering(n,e);var o,l,s=r.layersByLevel,u=Math.pow(2,n),c=s[n]=s[n]||[];if(r.levelIsComplete(n,e))return c;!function(){var C=function(S){if(r.validateLayersElesOrdering(S,e),r.levelIsComplete(S,e))return l=s[S],!0},E=function(S){if(!l)for(var P=n+S;-4<=P&&P<=2&&!C(P);P+=S);};E(1),E(-1);for(var w=c.length-1;w>=0;w--){var x=c[w];x.invalid&&pn(c,x)}}();var d=function(C){var E=(C=C||{}).after;if(function(){if(!o){o=At();for(var S=0;S<e.length;S++)P=o,_=e[S].boundingBox(),P.x1=Math.min(P.x1,_.x1),P.x2=Math.max(P.x2,_.x2),P.w=P.x2-P.x1,P.y1=Math.min(P.y1,_.y1),P.y2=Math.max(P.y2,_.y2),P.h=P.y2-P.y1}var P,_}(),o.w*u*(o.h*u)>16e6)return null;var w=r.makeLayer(o,n);if(null!=E){var x=c.indexOf(E)+1;c.splice(x,0,w)}else(void 0===C.insert||C.insert)&&c.unshift(w);return w};if(r.skipping&&!i)return null;for(var p=null,f=e.length/1,h=!i,v=0;v<e.length;v++){var m=e[v],g=m._private.rscratch,y=g.imgLayerCaches=g.imgLayerCaches||{},b=y[n];if(b)p=b;else{if((!p||p.eles.length>=f||!Qi(p.bb,m.boundingBox()))&&!(p=d({insert:!0,after:p})))return null;l||h?r.queueLayer(p,m):r.drawEleInLayer(p,m,n,t),p.eles.push(m),y[n]=p}}return l||(h?null:c)},Mt.getEleLevelForLayerLevel=function(e,t){return e},Mt.drawEleInLayer=function(e,t,n,r){var a=this.renderer,i=e.context,o=t.boundingBox();0!==o.w&&0!==o.h&&t.visible()&&(n=this.getEleLevelForLayerLevel(n,r),a.setImgSmoothing(i,!1),a.drawCachedElement(i,t,null,null,n,!0),a.setImgSmoothing(i,!0))},Mt.levelIsComplete=function(e,t){var n=this.layersByLevel[e];if(!n||0===n.length)return!1;for(var r=0,a=0;a<n.length;a++){var i=n[a];if(i.reqs>0||i.invalid)return!1;r+=i.eles.length}return r===t.length},Mt.validateLayersElesOrdering=function(e,t){var n=this.layersByLevel[e];if(n)for(var r=0;r<n.length;r++){for(var a=n[r],i=-1,o=0;o<t.length;o++)if(a.eles[0]===t[o]){i=o;break}if(i<0)this.invalidateLayer(a);else{var l=i;for(o=0;o<a.eles.length;o++)if(a.eles[o]!==t[l+o]){this.invalidateLayer(a);break}}}},Mt.updateElementsInLayers=function(e,t){for(var n=at(e[0]),r=0;r<e.length;r++)for(var a=n?null:e[r],i=n?e[r]:e[r].ele,o=i._private.rscratch,l=o.imgLayerCaches=o.imgLayerCaches||{},s=-4;s<=2;s++){var u=l[s];u&&(a&&this.getEleLevelForLayerLevel(u.level)!==a.level||t(u,i,a))}},Mt.haveLayers=function(){for(var e=!1,t=-4;t<=2;t++){var n=this.layersByLevel[t];if(n&&n.length>0){e=!0;break}}return e},Mt.invalidateElements=function(e){var t=this;0!==e.length&&(t.lastInvalidationTime=_e(),0!==e.length&&t.haveLayers()&&t.updateElementsInLayers(e,function(n,r,a){t.invalidateLayer(n)}))},Mt.invalidateLayer=function(e){if(this.lastInvalidationTime=_e(),!e.invalid){var t=e.level,n=e.eles;pn(this.layersByLevel[t],e),e.elesQueue=[],e.invalid=!0,e.replacement&&(e.replacement.invalid=!0);for(var a=0;a<n.length;a++){var i=n[a]._private.rscratch.imgLayerCaches;i&&(i[t]=null)}}},Mt.refineElementTextures=function(e){var t=this;t.updateElementsInLayers(e,function(n,r,a){var i=n.replacement;if(i||((i=n.replacement=t.makeLayer(n.bb,n.level)).replaces=n,i.eles=n.eles),!i.reqs)for(var o=0;o<i.eles.length;o++)t.queueLayer(i,i.eles[o])})},Mt.enqueueElementRefinement=function(e){this.eleTxrDeqs.merge(e),this.scheduleElementRefinement()},Mt.queueLayer=function(e,t){var n=this.layersQueue,r=e.elesQueue,a=r.hasId=r.hasId||{};if(!e.replacement){if(t){if(a[t.id()])return;r.push(t),a[t.id()]=!0}e.reqs?(e.reqs++,n.updateItem(e)):(e.reqs=1,n.push(e))}},Mt.dequeue=function(e){for(var t=this.layersQueue,n=[],r=0;r<1&&0!==t.size();){var a=t.peek();if(a.replacement)t.pop();else if(a.replaces&&a!==a.replaces.replacement)t.pop();else if(a.invalid)t.pop();else{var i=a.elesQueue.shift();i&&(this.drawEleInLayer(a,i,a.level,e),r++),0===n.length&&n.push(!0),0===a.elesQueue.length&&(t.pop(),a.reqs=0,a.replaces&&this.applyLayerReplacement(a),this.requestRedraw())}}return n},Mt.applyLayerReplacement=function(e){var t=this.layersByLevel[e.level],n=e.replaces,r=t.indexOf(n);if(!(r<0||n.invalid)){t[r]=e;for(var a=0;a<e.eles.length;a++){var i=e.eles[a]._private,o=i.imgLayerCaches=i.imgLayerCaches||{};o&&(o[e.level]=e)}this.requestRedraw()}},Mt.requestRedraw=we(function(){var e=this.renderer;e.redrawHint("eles",!0),e.redrawHint("drag",!0),e.redraw()},100),Mt.setupDequeueing=cl({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(e,t){return e.dequeue(t)},onDeqd:er,shouldRedraw:Bn,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var pl,fl={};function Xd(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.lineTo(r.x,r.y)}}function Yd(e,t,n){for(var r,a=0;a<t.length;a++){var i=t[a];0===a&&(r=i),e.lineTo(i.x,i.y)}e.quadraticCurveTo(n.x,n.y,r.x,r.y)}function gl(e,t,n){e.beginPath&&e.beginPath();for(var r=t,a=0;a<r.length;a++){var i=r[a];e.lineTo(i.x,i.y)}var o=n,l=n[0];for(e.moveTo(l.x,l.y),a=1;a<o.length;a++)e.lineTo((i=o[a]).x,i.y);e.closePath&&e.closePath()}function Hd(e,t,n,r,a){e.beginPath&&e.beginPath(),e.arc(n,r,a,0,2*Math.PI,!1);var i=t,o=i[0];e.moveTo(o.x,o.y);for(var l=0;l<i.length;l++){var s=i[l];e.lineTo(s.x,s.y)}e.closePath&&e.closePath()}function Wd(e,t,n,r){e.arc(t,n,r,0,2*Math.PI,!1)}fl.arrowShapeImpl=function(e){return(pl||(pl={polygon:Xd,"triangle-backcurve":Yd,"triangle-tee":gl,"circle-triangle":Hd,"triangle-cross":gl,circle:Wd}))[e]};var kr={drawElement:function(e,t,n,r,a,i){t.isNode()?this.drawNode(e,t,n,r,a,i):this.drawEdge(e,t,n,r,a,i)},drawElementOverlay:function(e,t){t.isNode()?this.drawNodeOverlay(e,t):this.drawEdgeOverlay(e,t)},drawElementUnderlay:function(e,t){t.isNode()?this.drawNodeUnderlay(e,t):this.drawEdgeUnderlay(e,t)},drawCachedElementPortion:function(e,t,n,r,a,i,o,l){var s=this,u=n.getBoundingBox(t);if(0!==u.w&&0!==u.h){var c=n.getElement(t,u,r,a,i);if(null!=c){var d=l(s,t);if(0===d)return;var p,f,h,v,m,g,y=o(s,t),b=u.x1,C=u.y1,E=u.w,w=u.h;if(0!==y){var x=n.getRotationPoint(t);e.translate(h=x.x,v=x.y),e.rotate(y),(m=s.getImgSmoothing(e))||s.setImgSmoothing(e,!0);var S=n.getRotationOffset(t);p=S.x,f=S.y}else p=b,f=C;1!==d&&(e.globalAlpha=(g=e.globalAlpha)*d),e.drawImage(c.texture.canvas,c.x,0,c.width,c.height,p,f,E,w),1!==d&&(e.globalAlpha=g),0!==y&&(e.rotate(-y),e.translate(-h,-v),m||s.setImgSmoothing(e,!1))}else n.drawElement(e,t)}}},Kd=function(){return 0},Gd=function(e,t){return e.getTextAngle(t,null)},Zd=function(e,t){return e.getTextAngle(t,"source")},Ud=function(e,t){return e.getTextAngle(t,"target")},$d=function(e,t){return t.effectiveOpacity()},Fi=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};kr.drawCachedElement=function(e,t,n,r,a,i){var o=this,l=o.data,s=l.eleTxrCache,u=l.lblTxrCache,c=l.slbTxrCache,d=l.tlbTxrCache,p=t.boundingBox(),f=!0===i?s.reasons.highQuality:null;if(0!==p.w&&0!==p.h&&t.visible()&&(!r||Ya(p,r))){var h=t.isEdge(),v=t.element()._private.rscratch.badLine;o.drawElementUnderlay(e,t),o.drawCachedElementPortion(e,t,s,n,a,f,Kd,$d),h&&v||o.drawCachedElementPortion(e,t,u,n,a,f,Gd,Fi),h&&!v&&(o.drawCachedElementPortion(e,t,c,n,a,f,Zd,Fi),o.drawCachedElementPortion(e,t,d,n,a,f,Ud,Fi)),o.drawElementOverlay(e,t)}},kr.drawElements=function(e,t){for(var n=0;n<t.length;n++)this.drawElement(e,t[n])},kr.drawCachedElements=function(e,t,n,r){for(var a=0;a<t.length;a++)this.drawCachedElement(e,t[a],n,r)},kr.drawCachedNodes=function(e,t,n,r){for(var a=0;a<t.length;a++){var i=t[a];i.isNode()&&this.drawCachedElement(e,i,n,r)}},kr.drawLayeredElements=function(e,t,n,r){var a=this.data.lyrTxrCache.getLayers(t,n);if(a)for(var i=0;i<a.length;i++){var o=a[i],l=o.bb;0!==l.w&&0!==l.h&&e.drawImage(o.canvas,l.x1,l.y1,l.w,l.h)}else this.drawCachedElements(e,t,n,r)};var Cn={drawEdge:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=this,l=t._private.rscratch;if((!i||t.visible())&&!l.badLine&&null!=l.allpts&&!isNaN(l.allpts[0])){var s;n&&e.translate(-(s=n).x1,-s.y1);var u=i?t.pstyle("opacity").value:1,c=i?t.pstyle("line-opacity").value:1,d=t.pstyle("curve-style").value,p=t.pstyle("line-style").value,f=t.pstyle("width").pfValue,h=t.pstyle("line-cap").value,v=u*c,m=u*c,g=function(){var D=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;"straight-triangle"===d?(o.eleStrokeStyle(e,t,D),o.drawEdgeTrianglePath(t,e,l.allpts)):(e.lineWidth=f,e.lineCap=h,o.eleStrokeStyle(e,t,D),o.drawEdgePath(t,e,l.allpts,p),e.lineCap="butt")},y=function(){a&&o.drawEdgeOverlay(e,t)},b=function(){a&&o.drawEdgeUnderlay(e,t)},C=function(){var D=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;o.drawArrowheads(e,t,D)},E=function(){o.drawElementText(e,t,null,r)};e.lineJoin="round";var w="yes"===t.pstyle("ghost").value;if(w){var x=t.pstyle("ghost-offset-x").pfValue,S=t.pstyle("ghost-offset-y").pfValue,P=t.pstyle("ghost-opacity").value,_=v*P;e.translate(x,S),g(_),C(_),e.translate(-x,-S)}b(),g(),C(),y(),E(),n&&e.translate(s.x1,s.y1)}}},vl=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n){if(n.visible()){var r=n.pstyle("".concat(e,"-opacity")).value;if(0!==r){var a=this,i=a.usePaths(),o=n._private.rscratch,l=2*n.pstyle("".concat(e,"-padding")).pfValue,s=n.pstyle("".concat(e,"-color")).value;t.lineWidth=l,t.lineCap="self"!==o.edgeType||i?"round":"butt",a.colorStrokeStyle(t,s[0],s[1],s[2],r),a.drawEdgePath(n,t,o.allpts,"solid")}}}};Cn.drawEdgeOverlay=vl("overlay"),Cn.drawEdgeUnderlay=vl("underlay"),Cn.drawEdgePath=function(e,t,n,r){var a,i=e._private.rscratch,o=t,l=!1,s=this.usePaths(),u=e.pstyle("line-dash-pattern").pfValue,c=e.pstyle("line-dash-offset").pfValue;if(s){var d=n.join("$");i.pathCacheKey&&i.pathCacheKey===d?(a=t=i.pathCache,l=!0):(a=t=new Path2D,i.pathCacheKey=d,i.pathCache=a)}if(o.setLineDash)switch(r){case"dotted":o.setLineDash([1,1]);break;case"dashed":o.setLineDash(u),o.lineDashOffset=c;break;case"solid":o.setLineDash([])}if(!l&&!i.badLine)switch(t.beginPath&&t.beginPath(),t.moveTo(n[0],n[1]),i.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var p=2;p+3<n.length;p+=4)t.quadraticCurveTo(n[p],n[p+1],n[p+2],n[p+3]);break;case"straight":case"segments":case"haystack":for(var f=2;f+1<n.length;f+=2)t.lineTo(n[f],n[f+1])}t=o,s?t.stroke(a):t.stroke(),t.setLineDash&&t.setLineDash([])},Cn.drawEdgeTrianglePath=function(e,t,n){t.fillStyle=t.strokeStyle;for(var r=e.pstyle("width").pfValue,a=0;a+1<n.length;a+=2){var i=[n[a+2]-n[a],n[a+3]-n[a+1]],o=Math.sqrt(i[0]*i[0]+i[1]*i[1]),l=[i[1]/o,-i[0]/o],s=[l[0]*r/2,l[1]*r/2];t.beginPath(),t.moveTo(n[a]-s[0],n[a+1]-s[1]),t.lineTo(n[a]+s[0],n[a+1]+s[1]),t.lineTo(n[a+2],n[a+3]),t.closePath(),t.fill()}},Cn.drawArrowheads=function(e,t,n){var r=t._private.rscratch,a="haystack"===r.edgeType;a||this.drawArrowhead(e,t,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle,n),this.drawArrowhead(e,t,"mid-target",r.midX,r.midY,r.midtgtArrowAngle,n),this.drawArrowhead(e,t,"mid-source",r.midX,r.midY,r.midsrcArrowAngle,n),a||this.drawArrowhead(e,t,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle,n)},Cn.drawArrowhead=function(e,t,n,r,a,i,o){if(!(isNaN(r)||null==r||isNaN(a)||null==a||isNaN(i)||null==i)){var l=t.pstyle(n+"-arrow-shape").value;if("none"!==l){var s="hollow"===t.pstyle(n+"-arrow-fill").value?"both":"filled",u=t.pstyle(n+"-arrow-fill").value,c=t.pstyle("width").pfValue,d=t.pstyle("opacity").value;void 0===o&&(o=d);var p=e.globalCompositeOperation;1===o&&"hollow"!==u||(e.globalCompositeOperation="destination-out",this.colorFillStyle(e,255,255,255,1),this.colorStrokeStyle(e,255,255,255,1),this.drawArrowShape(t,e,s,c,l,r,a,i),e.globalCompositeOperation=p);var f=t.pstyle(n+"-arrow-color").value;this.colorFillStyle(e,f[0],f[1],f[2],o),this.colorStrokeStyle(e,f[0],f[1],f[2],o),this.drawArrowShape(t,e,u,c,l,r,a,i)}}},Cn.drawArrowShape=function(e,t,n,r,a,i,o,l){var s,u=this,c=this.usePaths()&&"triangle-cross"!==a,d=!1,p=t,f={x:i,y:o},h=e.pstyle("arrow-scale").value,v=this.getArrowWidth(r,h),m=u.arrowShapes[a];if(c){var g=u.arrowPathCache=u.arrowPathCache||[],y=Xe(a),b=g[y];null!=b?(s=t=b,d=!0):(s=t=new Path2D,g[y]=s)}d||(t.beginPath&&t.beginPath(),c?m.draw(t,1,0,{x:0,y:0},1):m.draw(t,v,l,f,r),t.closePath&&t.closePath()),t=p,c&&(t.translate(i,o),t.rotate(l),t.scale(v,v)),"filled"!==n&&"both"!==n||(c?t.fill(s):t.fill()),"hollow"!==n&&"both"!==n||(t.lineWidth=(m.matchEdgeWidth?r:1)/(c?v:1),t.lineJoin="miter",c?t.stroke(s):t.stroke()),c&&(t.scale(1/v,1/v),t.rotate(-l),t.translate(-i,-o))};var Qd={safeDrawImage:function(e,t,n,r,a,i,o,l,s,u){if(!(a<=0||i<=0||s<=0||u<=0))try{e.drawImage(t,n,r,a,i,o,l,s,u)}catch(c){Ue(c)}},drawInscribedImage:function(e,t,n,r,a){var i=this,o=n.position(),l=o.x,s=o.y,u=n.cy().style(),c=u.getIndexedStyle.bind(u),d=c(n,"background-fit","value",r),p=c(n,"background-repeat","value",r),f=n.width(),h=n.height(),v=2*n.padding(),m=f+("inner"===c(n,"background-width-relative-to","value",r)?0:v),g=h+("inner"===c(n,"background-height-relative-to","value",r)?0:v),y=n._private.rscratch,b="node"===c(n,"background-clip","value",r),C=c(n,"background-image-opacity","value",r)*a,E=c(n,"background-image-smoothing","value",r),w=t.width||t.cachedW,x=t.height||t.cachedH;null!=w&&null!=x||(document.body.appendChild(t),w=t.cachedW=t.width||t.offsetWidth,x=t.cachedH=t.height||t.offsetHeight,document.body.removeChild(t));var S=w,P=x;if("auto"!==c(n,"background-width","value",r)&&(S="%"===c(n,"background-width","units",r)?c(n,"background-width","pfValue",r)*m:c(n,"background-width","pfValue",r)),"auto"!==c(n,"background-height","value",r)&&(P="%"===c(n,"background-height","units",r)?c(n,"background-height","pfValue",r)*g:c(n,"background-height","pfValue",r)),0!==S&&0!==P){if("contain"===d)S*=_=Math.min(m/S,g/P),P*=_;else if("cover"===d){var _;S*=_=Math.max(m/S,g/P),P*=_}var D=l-m/2,T=c(n,"background-position-x","units",r),z=c(n,"background-position-x","pfValue",r);D+="%"===T?(m-S)*z:z;var I=c(n,"background-offset-x","units",r),N=c(n,"background-offset-x","pfValue",r);D+="%"===I?(m-S)*N:N;var M=s-g/2,q=c(n,"background-position-y","units",r),A=c(n,"background-position-y","pfValue",r);M+="%"===q?(g-P)*A:A;var L=c(n,"background-offset-y","units",r),X=c(n,"background-offset-y","pfValue",r);M+="%"===L?(g-P)*X:X,y.pathCache&&(D-=l,M-=s,l=0,s=0);var F=e.globalAlpha;e.globalAlpha=C;var V=i.getImgSmoothing(e),Y=!1;if("no"===E&&V?(i.setImgSmoothing(e,!1),Y=!0):"yes"!==E||V||(i.setImgSmoothing(e,!0),Y=!0),"no-repeat"===p)b&&(e.save(),y.pathCache?e.clip(y.pathCache):(i.nodeShapes[i.getNodeShape(n)].draw(e,l,s,m,g),e.clip())),i.safeDrawImage(e,t,0,0,w,x,D,M,S,P),b&&e.restore();else{var $=e.createPattern(t,p);e.fillStyle=$,i.nodeShapes[i.getNodeShape(n)].draw(e,l,s,m,g),e.translate(D,M),e.fill(),e.translate(-D,-M)}e.globalAlpha=F,Y&&i.setImgSmoothing(e,V)}}},Wn={};function Jd(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5;e.beginPath(),e.moveTo(t+i,n),e.lineTo(t+r-i,n),e.quadraticCurveTo(t+r,n,t+r,n+i),e.lineTo(t+r,n+a-i),e.quadraticCurveTo(t+r,n+a,t+r-i,n+a),e.lineTo(t+i,n+a),e.quadraticCurveTo(t,n+a,t,n+a-i),e.lineTo(t,n+i),e.quadraticCurveTo(t,n,t+i,n),e.closePath(),e.fill()}Wn.eleTextBiggerThanMin=function(e,t){if(!t){var n=e.cy().zoom(),r=this.getPixelRatio(),a=Math.ceil(qa(n*r));t=Math.pow(2,a)}return!(e.pstyle("font-size").pfValue*t<e.pstyle("min-zoomed-font-size").pfValue)},Wn.drawElementText=function(e,t,n,r,a){var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=this;if(null==r){if(i&&!o.eleTextBiggerThanMin(t))return}else if(!1===r)return;if(t.isNode()){var l=t.pstyle("label");if(!l||!l.value)return;var s=o.getLabelJustification(t);e.textAlign=s,e.textBaseline="bottom"}else{var u=t.element()._private.rscratch.badLine,c=t.pstyle("label"),d=t.pstyle("source-label"),p=t.pstyle("target-label");if(u||(!c||!c.value)&&(!d||!d.value)&&(!p||!p.value))return;e.textAlign="center",e.textBaseline="bottom"}var f,h=!n;n&&e.translate(-(f=n).x1,-f.y1),null==a?(o.drawText(e,t,null,h,i),t.isEdge()&&(o.drawText(e,t,"source",h,i),o.drawText(e,t,"target",h,i))):o.drawText(e,t,a,h,i),n&&e.translate(f.x1,f.y1)},Wn.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if((t=this.fontCaches[n]).context===e)return t;return this.fontCaches.push(t={context:e}),t},Wn.setupTextStyle=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t.pstyle("font-style").strValue,a=t.pstyle("font-size").pfValue+"px",i=t.pstyle("font-family").strValue,o=t.pstyle("font-weight").strValue,l=n?t.effectiveOpacity()*t.pstyle("text-opacity").value:1,s=t.pstyle("text-outline-opacity").value*l,u=t.pstyle("color").value,c=t.pstyle("text-outline-color").value;e.font=r+" "+o+" "+a+" "+i,e.lineJoin="round",this.colorFillStyle(e,u[0],u[1],u[2],l),this.colorStrokeStyle(e,c[0],c[1],c[2],s)},Wn.getTextAngle=function(e,t){var n=e._private.rscratch,a=e.pstyle((t?t+"-":"")+"text-rotation"),i=Zt(n,"labelAngle",t);return"autorotate"===a.strValue?e.isEdge()?i:0:"none"===a.strValue?0:a.pfValue},Wn.drawText=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=t._private,o=i.rscratch,l=a?t.effectiveOpacity():1;if(!a||0!==l&&0!==t.pstyle("text-opacity").value){"main"===n&&(n=null);var s,u,c=Zt(o,"labelX",n),d=Zt(o,"labelY",n),p=this.getLabelText(t,n);if(null!=p&&""!==p&&!isNaN(c)&&!isNaN(d)){this.setupTextStyle(e,t,a);var f,h=n?n+"-":"",v=Zt(o,"labelWidth",n),m=Zt(o,"labelHeight",n),g=t.pstyle(h+"text-margin-x").pfValue,y=t.pstyle(h+"text-margin-y").pfValue,b=t.isEdge(),C=t.pstyle("text-halign").value,E=t.pstyle("text-valign").value;switch(b&&(C="center",E="center"),c+=g,d+=y,0!==(f=r?this.getTextAngle(t,n):0)&&(e.translate(s=c,u=d),e.rotate(f),c=0,d=0),E){case"top":break;case"center":d+=m/2;break;case"bottom":d+=m}var w=t.pstyle("text-background-opacity").value,x=t.pstyle("text-border-opacity").value,S=t.pstyle("text-border-width").pfValue,P=t.pstyle("text-background-padding").pfValue;if(w>0||S>0&&x>0){var _=c-P;switch(C){case"left":_-=v;break;case"center":_-=v/2}var D=d-m-P,T=v+2*P,z=m+2*P;if(w>0){var I=e.fillStyle,N=t.pstyle("text-background-color").value;e.fillStyle="rgba("+N[0]+","+N[1]+","+N[2]+","+w*l+")";var M=t.pstyle("text-background-shape").strValue;0===M.indexOf("round")?Jd(e,_,D,T,z,2):e.fillRect(_,D,T,z),e.fillStyle=I}if(S>0&&x>0){var q=e.strokeStyle,A=e.lineWidth,L=t.pstyle("text-border-color").value,X=t.pstyle("text-border-style").value;if(e.strokeStyle="rgba("+L[0]+","+L[1]+","+L[2]+","+x*l+")",e.lineWidth=S,e.setLineDash)switch(X){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=S/4,e.setLineDash([]);break;case"solid":e.setLineDash([])}if(e.strokeRect(_,D,T,z),"double"===X){var F=S/2;e.strokeRect(_+F,D+F,T-2*F,z-2*F)}e.setLineDash&&e.setLineDash([]),e.lineWidth=A,e.strokeStyle=q}}var V=2*t.pstyle("text-outline-width").pfValue;if(V>0&&(e.lineWidth=V),"wrap"===t.pstyle("text-wrap").value){var Y=Zt(o,"labelWrapCachedLines",n),$=Zt(o,"labelLineHeight",n),re=v/2,te=this.getLabelJustification(t);switch("auto"===te||("left"===C?"left"===te?c+=-v:"center"===te&&(c+=-re):"center"===C?"left"===te?c+=-re:"right"===te&&(c+=re):"right"===C&&("center"===te?c+=re:"right"===te&&(c+=v))),E){case"top":case"center":case"bottom":d-=(Y.length-1)*$}for(var de=0;de<Y.length;de++)V>0&&e.strokeText(Y[de],c,d),e.fillText(Y[de],c,d),d+=$}else V>0&&e.strokeText(p,c,d),e.fillText(p,c,d);0!==f&&(e.rotate(-f),e.translate(-s,-u))}}};var Hr={drawNode:function(e,t,n){var r,a,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=this,u=t._private,c=u.rscratch,d=t.position();if(Z(d.x)&&Z(d.y)&&(!l||t.visible())){var p,f,h=l?t.effectiveOpacity():1,v=s.usePaths(),m=!1,g=t.padding();r=t.width()+2*g,a=t.height()+2*g,n&&e.translate(-(f=n).x1,-f.y1);for(var y=t.pstyle("background-image"),b=y.value,C=new Array(b.length),E=new Array(b.length),w=0,x=0;x<b.length;x++){var S=b[x],P=C[x]=null!=S&&"none"!==S;if(P){var _=t.cy().style().getIndexedStyle(t,"background-image-crossorigin","value",x);w++,E[x]=s.getCachedImage(S,_,function(){u.backgroundTimestamp=Date.now(),t.emitAndNotify("background")})}}var D=t.pstyle("background-blacken").value,T=t.pstyle("border-width").pfValue,z=t.pstyle("background-opacity").value*h,I=t.pstyle("border-color").value,N=t.pstyle("border-style").value,M=t.pstyle("border-opacity").value*h;e.lineJoin="miter";var q=function(){var j=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z;s.eleFillStyle(e,t,j)},A=function(){var j=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;s.colorStrokeStyle(e,I[0],I[1],I[2],j)},L=t.pstyle("shape").strValue,X=t.pstyle("shape-polygon-points").pfValue;if(v){e.translate(d.x,d.y);var F=s.nodePathCache=s.nodePathCache||[],V=Ur("polygon"===L?L+","+X.join(","):L,""+a,""+r),Y=F[V];null!=Y?(m=!0,c.pathCache=p=Y):(p=new Path2D,F[V]=c.pathCache=p)}var $=function(){if(!m){var j=d;v&&(j={x:0,y:0}),s.nodeShapes[s.getNodeShape(t)].draw(p||e,j.x,j.y,r,a)}v?e.fill(p):e.fill()},re=function(){for(var j=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,O=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],ee=u.backgrounding,K=0,he=0;he<E.length;he++){var Me=t.cy().style().getIndexedStyle(t,"background-image-containment","value",he);O&&"over"===Me||!O&&"inside"===Me?K++:C[he]&&E[he].complete&&!E[he].error&&(K++,s.drawInscribedImage(e,E[he],t,he,j))}u.backgrounding=K!==w,ee!==u.backgrounding&&t.updateStyle(!1)},te=function(){var j=arguments.length>0&&void 0!==arguments[0]&&arguments[0],O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;s.hasPie(t)&&(s.drawPie(e,t,O),j&&(v||s.nodeShapes[s.getNodeShape(t)].draw(e,d.x,d.y,r,a)))},de=function(){var j=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,O=(D>0?D:-D)*j,ee=D>0?0:255;0!==D&&(s.colorFillStyle(e,ee,ee,ee,O),v?e.fill(p):e.fill())},oe=function(){if(T>0){if(e.lineWidth=T,e.lineCap="butt",e.setLineDash)switch(N){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([])}if(v?e.stroke(p):e.stroke(),"double"===N){e.lineWidth=T/3;var j=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",v?e.stroke(p):e.stroke(),e.globalCompositeOperation=j}e.setLineDash&&e.setLineDash([])}},ye=function(){o&&s.drawNodeOverlay(e,t,d,r,a)},ke=function(){o&&s.drawNodeUnderlay(e,t,d,r,a)},Q=function(){s.drawElementText(e,t,null,i)},le="yes"===t.pstyle("ghost").value;if(le){var pe=t.pstyle("ghost-offset-x").pfValue,k=t.pstyle("ghost-offset-y").pfValue,B=t.pstyle("ghost-opacity").value,R=B*h;e.translate(pe,k),q(B*z),$(),re(R,!0),A(B*M),oe(),te(0!==D||0!==T),re(R,!1),de(R),e.translate(-pe,-k)}v&&e.translate(-d.x,-d.y),ke(),v&&e.translate(d.x,d.y),q(),$(),re(h,!0),A(),oe(),te(0!==D||0!==T),re(h,!1),de(),v&&e.translate(-d.x,-d.y),Q(),ye(),n&&e.translate(f.x1,f.y1)}}},yl=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n,r,a,i){if(n.visible()){var o=n.pstyle("".concat(e,"-padding")).pfValue,l=n.pstyle("".concat(e,"-opacity")).value,s=n.pstyle("".concat(e,"-color")).value,u=n.pstyle("".concat(e,"-shape")).value;if(l>0){if(r=r||n.position(),null==a||null==i){var c=n.padding();a=n.width()+2*c,i=n.height()+2*c}this.colorFillStyle(t,s[0],s[1],s[2],l),this.nodeShapes[u].draw(t,r.x,r.y,a+2*o,i+2*o),t.fill()}}}};Hr.drawNodeOverlay=yl("overlay"),Hr.drawNodeUnderlay=yl("underlay"),Hr.hasPie=function(e){return(e=e[0])._private.hasPie},Hr.drawPie=function(e,t,n,r){t=t[0],r=r||t.position();var a=t.cy().style(),i=t.pstyle("pie-size"),o=r.x,l=r.y,s=t.width(),u=t.height(),c=Math.min(s,u)/2,d=0;this.usePaths()&&(o=0,l=0),"%"===i.units?c*=i.pfValue:void 0!==i.pfValue&&(c=i.pfValue/2);for(var p=1;p<=a.pieBackgroundN;p++){var f=t.pstyle("pie-"+p+"-background-size").value,h=t.pstyle("pie-"+p+"-background-color").value,v=t.pstyle("pie-"+p+"-background-opacity").value*n,m=f/100;m+d>1&&(m=1-d);var g=1.5*Math.PI+2*Math.PI*d,y=g+2*Math.PI*m;0===f||d>=1||d+m>1||(e.beginPath(),e.moveTo(o,l),e.arc(o,l,c,g,y),e.closePath(),this.colorFillStyle(e,h[0],h[1],h[2],v),e.fill(),d+=m)}};for(var jt={getPixelRatio:function(){var e=this.data.contexts[0];return null!=this.forcedPixelRatio?this.forcedPixelRatio:(window.devicePixelRatio||1)/(e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)},paintCache:function(e){for(var t,n=this.paintCaches=this.paintCaches||[],r=!0,a=0;a<n.length;a++)if((t=n[a]).context===e){r=!1;break}return r&&n.push(t={context:e}),t},createGradientStyleFor:function(e,t,n,r,a){var i,o=this.usePaths(),l=n.pstyle(t+"-gradient-stop-colors").value,s=n.pstyle(t+"-gradient-stop-positions").pfValue;if("radial-gradient"===r)if(n.isEdge()){var u=n.sourceEndpoint(),c=n.targetEndpoint(),d=n.midpoint(),p=On(u,d),f=On(c,d);i=e.createRadialGradient(d.x,d.y,0,d.x,d.y,Math.max(p,f))}else{var h=o?{x:0,y:0}:n.position(),v=n.paddedWidth(),m=n.paddedHeight();i=e.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(v,m))}else if(n.isEdge()){var g=n.sourceEndpoint(),y=n.targetEndpoint();i=e.createLinearGradient(g.x,g.y,y.x,y.y)}else{var b=o?{x:0,y:0}:n.position(),C=n.paddedWidth()/2,E=n.paddedHeight()/2;switch(n.pstyle("background-gradient-direction").value){case"to-bottom":i=e.createLinearGradient(b.x,b.y-E,b.x,b.y+E);break;case"to-top":i=e.createLinearGradient(b.x,b.y+E,b.x,b.y-E);break;case"to-left":i=e.createLinearGradient(b.x+C,b.y,b.x-C,b.y);break;case"to-right":i=e.createLinearGradient(b.x-C,b.y,b.x+C,b.y);break;case"to-bottom-right":case"to-right-bottom":i=e.createLinearGradient(b.x-C,b.y-E,b.x+C,b.y+E);break;case"to-top-right":case"to-right-top":i=e.createLinearGradient(b.x-C,b.y+E,b.x+C,b.y-E);break;case"to-bottom-left":case"to-left-bottom":i=e.createLinearGradient(b.x+C,b.y-E,b.x-C,b.y+E);break;case"to-top-left":case"to-left-top":i=e.createLinearGradient(b.x+C,b.y+E,b.x-C,b.y-E)}}if(!i)return null;for(var w=s.length===l.length,x=l.length,S=0;S<x;S++)i.addColorStop(w?s[S]:S/(x-1),"rgba("+l[S][0]+","+l[S][1]+","+l[S][2]+","+a+")");return i},gradientFillStyle:function(e,t,n,r){var a=this.createGradientStyleFor(e,"background",t,n,r);if(!a)return null;e.fillStyle=a},colorFillStyle:function(e,t,n,r,a){e.fillStyle="rgba("+t+","+n+","+r+","+a+")"},eleFillStyle:function(e,t,n){var r=t.pstyle("background-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientFillStyle(e,t,r,n);else{var a=t.pstyle("background-color").value;this.colorFillStyle(e,a[0],a[1],a[2],n)}},gradientStrokeStyle:function(e,t,n,r){var a=this.createGradientStyleFor(e,"line",t,n,r);if(!a)return null;e.strokeStyle=a},colorStrokeStyle:function(e,t,n,r,a){e.strokeStyle="rgba("+t+","+n+","+r+","+a+")"},eleStrokeStyle:function(e,t,n){var r=t.pstyle("line-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientStrokeStyle(e,t,r,n);else{var a=t.pstyle("line-color").value;this.colorStrokeStyle(e,a[0],a[1],a[2],n)}},matchCanvasSize:function(e){var t=this,n=t.data,r=t.findContainerClientCoords(),a=r[2],i=r[3],o=t.getPixelRatio();e!==t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE]&&e!==t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG]||(o=t.motionBlurPxRatio);var s,u=a*o,c=i*o;if(u!==t.canvasWidth||c!==t.canvasHeight){t.fontCaches=null;var d=n.canvasContainer;d.style.width=a+"px",d.style.height=i+"px";for(var p=0;p<t.CANVAS_LAYERS;p++)(s=n.canvases[p]).width=u,s.height=c,s.style.width=a+"px",s.style.height=i+"px";for(p=0;p<t.BUFFER_COUNT;p++)(s=n.bufferCanvases[p]).width=u,s.height=c,s.style.width=a+"px",s.style.height=i+"px";t.textureMult=1,o<=1&&(s=n.bufferCanvases[t.TEXTURE_BUFFER],t.textureMult=2,s.width=u*t.textureMult,s.height=c*t.textureMult),t.canvasWidth=u,t.canvasHeight=c}},renderTo:function(e,t,n,r){this.render({forcedContext:e,forcedZoom:t,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})},render:function(e){var t=(e=e||Ki()).forcedContext,n=e.drawAllLayers,r=e.drawOnlyNodeLayer,a=e.forcedZoom,i=e.forcedPan,o=this,l=void 0===e.forcedPxRatio?this.getPixelRatio():e.forcedPxRatio,s=o.cy,u=o.data,c=u.canvasNeedsRedraw,d=o.textureOnViewport&&!t&&(o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming),p=void 0!==e.motionBlur?e.motionBlur:o.motionBlur,f=o.motionBlurPxRatio,h=s.hasCompoundNodes(),v=o.hoverData.draggingEles,g=p=p&&!t&&o.motionBlurEnabled&&!(o.hoverData.selecting||o.touchData.selecting);t||(o.prevPxRatio!==l&&(o.invalidateContainerClientCoordsCache(),o.matchCanvasSize(o.container),o.redrawHint("eles",!0),o.redrawHint("drag",!0)),o.prevPxRatio=l),!t&&o.motionBlurTimeout&&clearTimeout(o.motionBlurTimeout),p&&(null==o.mbFrames&&(o.mbFrames=0),o.mbFrames++,o.mbFrames<3&&(g=!1),o.mbFrames>o.minMbLowQualFrames&&(o.motionBlurPxRatio=o.mbPxRBlurry)),o.clearingMotionBlur&&(o.motionBlurPxRatio=1),o.textureDrawLastFrame&&!d&&(c[o.NODE]=!0,c[o.SELECT_BOX]=!0);var y=s.style(),b=s.zoom(),C=void 0!==a?a:b,E=s.pan(),w={x:E.x,y:E.y},x={zoom:b,pan:{x:E.x,y:E.y}},S=o.prevViewport;void 0===S||x.zoom!==S.zoom||x.pan.x!==S.pan.x||x.pan.y!==S.pan.y||v&&!h||(o.motionBlurPxRatio=1),i&&(w=i),C*=l,w.x*=l,w.y*=l;var P=o.getCachedZSortedEles();function _(Q,le,pe,k,B){var R=Q.globalCompositeOperation;Q.globalCompositeOperation="destination-out",o.colorFillStyle(Q,255,255,255,o.motionBlurTransparency),Q.fillRect(le,pe,k,B),Q.globalCompositeOperation=R}function D(Q,le){var pe,k,B,R;o.clearingMotionBlur||Q!==u.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]&&Q!==u.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG]?(pe=w,k=C,B=o.canvasWidth,R=o.canvasHeight):(pe={x:E.x*f,y:E.y*f},k=b*f,B=o.canvasWidth*f,R=o.canvasHeight*f),Q.setTransform(1,0,0,1,0,0),"motionBlur"===le?_(Q,0,0,B,R):t||void 0!==le&&!le||Q.clearRect(0,0,B,R),n||(Q.translate(pe.x,pe.y),Q.scale(k,k)),i&&Q.translate(i.x,i.y),a&&Q.scale(a,a)}if(d||(o.textureDrawLastFrame=!1),d){if(o.textureDrawLastFrame=!0,!o.textureCache){o.textureCache={},o.textureCache.bb=s.mutableElements().boundingBox(),o.textureCache.texture=o.data.bufferCanvases[o.TEXTURE_BUFFER];var T=o.data.bufferContexts[o.TEXTURE_BUFFER];T.setTransform(1,0,0,1,0,0),T.clearRect(0,0,o.canvasWidth*o.textureMult,o.canvasHeight*o.textureMult),o.render({forcedContext:T,drawOnlyNodeLayer:!0,forcedPxRatio:l*o.textureMult}),(x=o.textureCache.viewport={zoom:s.zoom(),pan:s.pan(),width:o.canvasWidth,height:o.canvasHeight}).mpan={x:(0-x.pan.x)/x.zoom,y:(0-x.pan.y)/x.zoom}}c[o.DRAG]=!1,c[o.NODE]=!1;var z=u.contexts[o.NODE],I=o.textureCache.texture;x=o.textureCache.viewport,z.setTransform(1,0,0,1,0,0),p?_(z,0,0,x.width,x.height):z.clearRect(0,0,x.width,x.height);var N=y.core("outside-texture-bg-color").value,M=y.core("outside-texture-bg-opacity").value;o.colorFillStyle(z,N[0],N[1],N[2],M),z.fillRect(0,0,x.width,x.height),b=s.zoom(),D(z,!1),z.clearRect(x.mpan.x,x.mpan.y,x.width/x.zoom/l,x.height/x.zoom/l),z.drawImage(I,x.mpan.x,x.mpan.y,x.width/x.zoom/l,x.height/x.zoom/l)}else o.textureOnViewport&&!t&&(o.textureCache=null);var q=s.extent(),A=o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming||o.hoverData.draggingEles||o.cy.animated(),L=o.hideEdgesOnViewport&&A,X=[];if(X[o.NODE]=!c[o.NODE]&&p&&!o.clearedForMotionBlur[o.NODE]||o.clearingMotionBlur,X[o.NODE]&&(o.clearedForMotionBlur[o.NODE]=!0),X[o.DRAG]=!c[o.DRAG]&&p&&!o.clearedForMotionBlur[o.DRAG]||o.clearingMotionBlur,X[o.DRAG]&&(o.clearedForMotionBlur[o.DRAG]=!0),c[o.NODE]||n||r||X[o.NODE]){var F=p&&!X[o.NODE]&&1!==f;D(z=t||(F?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]:u.contexts[o.NODE]),p&&!F?"motionBlur":void 0),L?o.drawCachedNodes(z,P.nondrag,l,q):o.drawLayeredElements(z,P.nondrag,l,q),o.debug&&o.drawDebugPoints(z,P.nondrag),n||p||(c[o.NODE]=!1)}if(!r&&(c[o.DRAG]||n||X[o.DRAG])&&(F=p&&!X[o.DRAG]&&1!==f,D(z=t||(F?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG]:u.contexts[o.DRAG]),p&&!F?"motionBlur":void 0),L?o.drawCachedNodes(z,P.drag,l,q):o.drawCachedElements(z,P.drag,l,q),o.debug&&o.drawDebugPoints(z,P.drag),n||p||(c[o.DRAG]=!1)),o.showFps||!r&&c[o.SELECT_BOX]&&!n){if(D(z=t||u.contexts[o.SELECT_BOX]),1==o.selection[4]&&(o.hoverData.selecting||o.touchData.selecting)){b=o.cy.zoom();var V=y.core("selection-box-border-width").value/b;z.lineWidth=V,z.fillStyle="rgba("+y.core("selection-box-color").value[0]+","+y.core("selection-box-color").value[1]+","+y.core("selection-box-color").value[2]+","+y.core("selection-box-opacity").value+")",z.fillRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]),V>0&&(z.strokeStyle="rgba("+y.core("selection-box-border-color").value[0]+","+y.core("selection-box-border-color").value[1]+","+y.core("selection-box-border-color").value[2]+","+y.core("selection-box-opacity").value+")",z.strokeRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]))}if(u.bgActivePosistion&&!o.hoverData.selecting){b=o.cy.zoom();var Y=u.bgActivePosistion;z.fillStyle="rgba("+y.core("active-bg-color").value[0]+","+y.core("active-bg-color").value[1]+","+y.core("active-bg-color").value[2]+","+y.core("active-bg-opacity").value+")",z.beginPath(),z.arc(Y.x,Y.y,y.core("active-bg-size").pfValue/b,0,2*Math.PI),z.fill()}var $=o.lastRedrawTime;if(o.showFps&&$){$=Math.round($);var re=Math.round(1e3/$);z.setTransform(1,0,0,1,0,0),z.fillStyle="rgba(255, 0, 0, 0.75)",z.strokeStyle="rgba(255, 0, 0, 0.75)",z.lineWidth=1,z.fillText("1 frame = "+$+" ms = "+re+" fps",0,20),z.strokeRect(0,30,250,20),z.fillRect(0,30,250*Math.min(re/60,1),20)}n||(c[o.SELECT_BOX]=!1)}if(p&&1!==f){var oe=u.contexts[o.DRAG],ye=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_DRAG],ke=function(Q,le,pe){Q.setTransform(1,0,0,1,0,0),pe||!g?Q.clearRect(0,0,o.canvasWidth,o.canvasHeight):_(Q,0,0,o.canvasWidth,o.canvasHeight),Q.drawImage(le,0,0,o.canvasWidth*f,o.canvasHeight*f,0,0,o.canvasWidth,o.canvasHeight)};(c[o.NODE]||X[o.NODE])&&(ke(u.contexts[o.NODE],o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_NODE],X[o.NODE]),c[o.NODE]=!1),(c[o.DRAG]||X[o.DRAG])&&(ke(oe,ye,X[o.DRAG]),c[o.DRAG]=!1)}o.prevViewport=x,o.clearingMotionBlur&&(o.clearingMotionBlur=!1,o.motionBlurCleared=!0,o.motionBlur=!0),p&&(o.motionBlurTimeout=setTimeout(function(){o.motionBlurTimeout=null,o.clearedForMotionBlur[o.NODE]=!1,o.clearedForMotionBlur[o.DRAG]=!1,o.motionBlur=!1,o.clearingMotionBlur=!d,o.mbFrames=0,c[o.NODE]=!0,c[o.DRAG]=!0,o.redraw()},100)),t||s.emit("render")}},ml={drawPolygonPath:function(e,t,n,r,a,i){var o=r/2,l=a/2;e.beginPath&&e.beginPath(),e.moveTo(t+o*i[0],n+l*i[1]);for(var s=1;s<i.length/2;s++)e.lineTo(t+o*i[2*s],n+l*i[2*s+1]);e.closePath()},drawRoundPolygonPath:function(e,t,n,r,a,i){var o=r/2,l=a/2,s=Ka(r,a);e.beginPath&&e.beginPath();for(var u=0;u<i.length/4;u++){var c,d;d=0===u?i.length-2:4*u-2,c=4*u+2;var p=t+o*i[4*u],f=n+l*i[4*u+1],v=s/Math.tan(Math.acos(-i[d]*i[c]-i[d+1]*i[c+1])/2),m=p-v*i[d],g=f-v*i[d+1],y=p+v*i[c],b=f+v*i[c+1];0===u?e.moveTo(m,g):e.lineTo(m,g),e.arcTo(p,f,y,b,s)}e.closePath()},drawRoundRectanglePath:function(e,t,n,r,a){var i=r/2,o=a/2,l=Tr(r,a);e.beginPath&&e.beginPath(),e.moveTo(t,n-o),e.arcTo(t+i,n-o,t+i,n,l),e.arcTo(t+i,n+o,t,n+o,l),e.arcTo(t-i,n+o,t-i,n,l),e.arcTo(t-i,n-o,t,n-o,l),e.lineTo(t,n-o),e.closePath()},drawBottomRoundRectanglePath:function(e,t,n,r,a){var i=r/2,o=a/2,l=Tr(r,a);e.beginPath&&e.beginPath(),e.moveTo(t,n-o),e.lineTo(t+i,n-o),e.lineTo(t+i,n),e.arcTo(t+i,n+o,t,n+o,l),e.arcTo(t-i,n+o,t-i,n,l),e.lineTo(t-i,n-o),e.lineTo(t,n-o),e.closePath()},drawCutRectanglePath:function(e,t,n,r,a){var i=r/2,o=a/2;e.beginPath&&e.beginPath(),e.moveTo(t-i+8,n-o),e.lineTo(t+i-8,n-o),e.lineTo(t+i,n-o+8),e.lineTo(t+i,n+o-8),e.lineTo(t+i-8,n+o),e.lineTo(t-i+8,n+o),e.lineTo(t-i,n+o-8),e.lineTo(t-i,n-o+8),e.closePath()},drawBarrelPath:function(e,t,n,r,a){var i=r/2,o=a/2,l=t-i,s=t+i,u=n-o,c=n+o,d=Ga(r,a),p=d.widthOffset,f=d.heightOffset,h=d.ctrlPtOffsetPct*p;e.beginPath&&e.beginPath(),e.moveTo(l,u+f),e.lineTo(l,c-f),e.quadraticCurveTo(l+h,c,l+p,c),e.lineTo(s-p,c),e.quadraticCurveTo(s-h,c,s,c-f),e.lineTo(s,u+f),e.quadraticCurveTo(s-h,u,s-p,u),e.lineTo(l+p,u),e.quadraticCurveTo(l+h,u,l,u+f),e.closePath()}},bl=Math.sin(0),xl=Math.cos(0),ji={},Vi={},wl=Math.PI/40,Cr=0*Math.PI;Cr<2*Math.PI;Cr+=wl)ji[Cr]=Math.sin(Cr),Vi[Cr]=Math.cos(Cr);ml.drawEllipsePath=function(e,t,n,r,a){if(e.beginPath&&e.beginPath(),e.ellipse)e.ellipse(t,n,r/2,a/2,0,0,2*Math.PI);else for(var i,o,l=r/2,s=a/2,u=0*Math.PI;u<2*Math.PI;u+=wl)i=t-l*ji[u]*bl+l*Vi[u]*xl,o=n+s*Vi[u]*bl+s*ji[u]*xl,0===u?e.moveTo(i,o):e.lineTo(i,o);e.closePath()};var Wr={};function El(e){var t=e.indexOf(",");return e.substr(t+1)}function kl(e,t,n){var r=function(){return t.toDataURL(n,e.quality)};switch(e.output){case"blob-promise":return new lr(function(a,i){try{t.toBlob(function(o){null!=o?a(o):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},n,e.quality)}catch(o){i(o)}});case"blob":return function(a,i){for(var o=atob(a),l=new ArrayBuffer(o.length),s=new Uint8Array(l),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);return new Blob([l],{type:i})}(El(r()),n);case"base64":return El(r());default:return r()}}Wr.createBuffer=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,[n,n.getContext("2d")]},Wr.bufferCanvasImage=function(e){var t=this.cy,n=t.mutableElements().boundingBox(),r=this.findContainerClientCoords(),a=e.full?Math.ceil(n.w):r[2],i=e.full?Math.ceil(n.h):r[3],o=Z(e.maxWidth)||Z(e.maxHeight),l=this.getPixelRatio(),s=1;if(void 0!==e.scale)a*=e.scale,i*=e.scale,s=e.scale;else if(o){var u=1/0,c=1/0;Z(e.maxWidth)&&(u=s*e.maxWidth/a),Z(e.maxHeight)&&(c=s*e.maxHeight/i),a*=s=Math.min(u,c),i*=s}o||(a*=l,i*=l,s*=l);var d=document.createElement("canvas");d.width=a,d.height=i,d.style.width=a+"px",d.style.height=i+"px";var p=d.getContext("2d");if(a>0&&i>0){p.clearRect(0,0,a,i),p.globalCompositeOperation="source-over";var f=this.getCachedZSortedEles();if(e.full)p.translate(-n.x1*s,-n.y1*s),p.scale(s,s),this.drawElements(p,f),p.scale(1/s,1/s),p.translate(n.x1*s,n.y1*s);else{var h=t.pan(),v={x:h.x*s,y:h.y*s};s*=t.zoom(),p.translate(v.x,v.y),p.scale(s,s),this.drawElements(p,f),p.scale(1/s,1/s),p.translate(-v.x,-v.y)}e.bg&&(p.globalCompositeOperation="destination-over",p.fillStyle=e.bg,p.rect(0,0,a,i),p.fill())}return d},Wr.png=function(e){return kl(e,this.bufferCanvasImage(e),"image/png")},Wr.jpg=function(e){return kl(e,this.bufferCanvasImage(e),"image/jpeg")};var th=Cl,He=Cl.prototype;function Cl(e){var t=this;t.data={canvases:new Array(He.CANVAS_LAYERS),contexts:new Array(He.CANVAS_LAYERS),canvasNeedsRedraw:new Array(He.CANVAS_LAYERS),bufferCanvases:new Array(He.BUFFER_COUNT),bufferContexts:new Array(He.CANVAS_LAYERS)},t.data.canvasContainer=document.createElement("div");var n=t.data.canvasContainer.style;t.data.canvasContainer.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",n.position="relative",n.zIndex="0",n.overflow="hidden";var r=e.cy.container();r.appendChild(t.data.canvasContainer),r.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)";var a={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};ae&&ae.userAgent.match(/msie|trident|edge/i)&&(a["-ms-touch-action"]="none",a["touch-action"]="none");for(var i=0;i<He.CANVAS_LAYERS;i++){var o=t.data.canvases[i]=document.createElement("canvas");t.data.contexts[i]=o.getContext("2d"),Object.keys(a).forEach(function(w){o.style[w]=a[w]}),o.style.position="absolute",o.setAttribute("data-id","layer"+i),o.style.zIndex=String(He.CANVAS_LAYERS-i),t.data.canvasContainer.appendChild(o),t.data.canvasNeedsRedraw[i]=!1}for(t.data.topCanvas=t.data.canvases[0],t.data.canvases[He.NODE].setAttribute("data-id","layer"+He.NODE+"-node"),t.data.canvases[He.SELECT_BOX].setAttribute("data-id","layer"+He.SELECT_BOX+"-selectbox"),t.data.canvases[He.DRAG].setAttribute("data-id","layer"+He.DRAG+"-drag"),i=0;i<He.BUFFER_COUNT;i++)t.data.bufferCanvases[i]=document.createElement("canvas"),t.data.bufferContexts[i]=t.data.bufferCanvases[i].getContext("2d"),t.data.bufferCanvases[i].style.position="absolute",t.data.bufferCanvases[i].setAttribute("data-id","buffer"+i),t.data.bufferCanvases[i].style.zIndex=String(-i-1),t.data.bufferCanvases[i].style.visibility="hidden";t.pathsEnabled=!0;var l=At(),s=function(w){return{x:-w.w/2,y:-w.h/2}},u=function(w){return w.boundingBox(),w[0]._private.bodyBounds},c=function(w){return w.boundingBox(),w[0]._private.labelBounds.main||l},d=function(w){return w.boundingBox(),w[0]._private.labelBounds.source||l},p=function(w){return w.boundingBox(),w[0]._private.labelBounds.target||l},f=function(w,x){return x},h=function(w,x,S){var P=w?w+"-":"";return{x:x.x+S.pstyle(P+"text-margin-x").pfValue,y:x.y+S.pstyle(P+"text-margin-y").pfValue}},v=function(w,x,S){var P=w[0]._private.rscratch;return{x:P[x],y:P[S]}},m=t.data.eleTxrCache=new Yr(t,{getKey:function(w){return w[0]._private.nodeKey},doesEleInvalidateKey:function(w){var x=w[0]._private;return x.oldBackgroundTimestamp!==x.backgroundTimestamp},drawElement:function(w,x,S,P,_){return t.drawElement(w,x,S,!1,!1,_)},getBoundingBox:u,getRotationPoint:function(w){return{x:((x=u(w)).x1+x.x2)/2,y:(x.y1+x.y2)/2};var x},getRotationOffset:function(w){return s(u(w))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),g=t.data.lblTxrCache=new Yr(t,{getKey:function(w){return w[0]._private.labelStyleKey},drawElement:function(w,x,S,P,_){return t.drawElementText(w,x,S,P,"main",_)},getBoundingBox:c,getRotationPoint:function(w){return h("",v(w,"labelX","labelY"),w)},getRotationOffset:function(w){var x=c(w),S=s(c(w));if(w.isNode()){switch(w.pstyle("text-halign").value){case"left":S.x=-x.w;break;case"right":S.x=0}switch(w.pstyle("text-valign").value){case"top":S.y=-x.h;break;case"bottom":S.y=0}}return S},isVisible:f}),y=t.data.slbTxrCache=new Yr(t,{getKey:function(w){return w[0]._private.sourceLabelStyleKey},drawElement:function(w,x,S,P,_){return t.drawElementText(w,x,S,P,"source",_)},getBoundingBox:d,getRotationPoint:function(w){return h("source",v(w,"sourceLabelX","sourceLabelY"),w)},getRotationOffset:function(w){return s(d(w))},isVisible:f}),b=t.data.tlbTxrCache=new Yr(t,{getKey:function(w){return w[0]._private.targetLabelStyleKey},drawElement:function(w,x,S,P,_){return t.drawElementText(w,x,S,P,"target",_)},getBoundingBox:p,getRotationPoint:function(w){return h("target",v(w,"targetLabelX","targetLabelY"),w)},getRotationOffset:function(w){return s(p(w))},isVisible:f}),C=t.data.lyrTxrCache=new dl(t);t.onUpdateEleCalcs(function(w,x){m.invalidateElements(x),g.invalidateElements(x),y.invalidateElements(x),b.invalidateElements(x),C.invalidateElements(x);for(var S=0;S<x.length;S++){var P=x[S]._private;P.oldBackgroundTimestamp=P.backgroundTimestamp}});var E=function(w){for(var x=0;x<w.length;x++)C.enqueueElementRefinement(w[x].ele)};m.onDequeue(E),g.onDequeue(E),y.onDequeue(E),b.onDequeue(E)}He.CANVAS_LAYERS=3,He.SELECT_BOX=0,He.DRAG=1,He.NODE=2,He.BUFFER_COUNT=3,He.TEXTURE_BUFFER=0,He.MOTIONBLUR_BUFFER_NODE=1,He.MOTIONBLUR_BUFFER_DRAG=2,He.redrawHint=function(e,t){var n=this;switch(e){case"eles":n.data.canvasNeedsRedraw[He.NODE]=t;break;case"drag":n.data.canvasNeedsRedraw[He.DRAG]=t;break;case"select":n.data.canvasNeedsRedraw[He.SELECT_BOX]=t}};var nh="undefined"!=typeof Path2D;He.path2dEnabled=function(e){if(void 0===e)return this.pathsEnabled;this.pathsEnabled=!!e},He.usePaths=function(){return nh&&this.pathsEnabled},He.setImgSmoothing=function(e,t){null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled=t:(e.webkitImageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.msImageSmoothingEnabled=t)},He.getImgSmoothing=function(e){return null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled:e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled},He.makeOffscreenCanvas=function(e,t){var n;return"undefined"!==("undefined"==typeof OffscreenCanvas?"undefined":Pe(OffscreenCanvas))?n=new OffscreenCanvas(e,t):((n=document.createElement("canvas")).width=e,n.height=t),n},[fl,kr,Cn,Qd,Wn,Hr,jt,ml,Wr,{nodeShapeImpl:function(e,t,n,r,a,i,o){switch(e){case"ellipse":return this.drawEllipsePath(t,n,r,a,i);case"polygon":return this.drawPolygonPath(t,n,r,a,i,o);case"round-polygon":return this.drawRoundPolygonPath(t,n,r,a,i,o);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(t,n,r,a,i);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(t,n,r,a,i);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(t,n,r,a,i);case"barrel":return this.drawBarrelPath(t,n,r,a,i)}}}].forEach(function(e){me(He,e)});var rh=[{type:"layout",extensions:Bd},{type:"renderer",extensions:[{name:"null",impl:Qs},{name:"base",impl:ul},{name:"canvas",impl:th}]}],Sl={},Pl={};function _l(e,t,n){var r=n,a=function(w){Ue("Can not register `"+t+"` for `"+e+"` since `"+w+"` already exists in the prototype and can not be overridden")};if("core"===e){if(qr.prototype[t])return a(t);qr.prototype[t]=n}else if("collection"===e){if(Pt.prototype[t])return a(t);Pt.prototype[t]=n}else if("layout"===e){for(var i=function(w){this.options=w,n.call(this,w),ve(this._private)||(this._private={}),this._private.cy=w.cy,this._private.listeners=[],this.createEmitter()},o=i.prototype=Object.create(n.prototype),l=[],s=0;s<l.length;s++){var u=l[s];o[u]=o[u]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var c=n.prototype.stop;o.stop=function(){var w=this.options;if(w&&w.animate){var x=this.animations;if(x)for(var S=0;S<x.length;S++)x[S].stop()}return c?c.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var d=function(w){return w._private.cy},p={addEventFields:function(w,x){x.layout=w,x.cy=d(w),x.target=w},bubble:function(){return!0},parent:function(w){return d(w)}};me(o,{createEmitter:function(){return this._private.emitter=new Ca(p,this),this},emitter:function(){return this._private.emitter},on:function(w,x){return this.emitter().on(w,x),this},one:function(w,x){return this.emitter().one(w,x),this},once:function(w,x){return this.emitter().one(w,x),this},removeListener:function(w,x){return this.emitter().removeListener(w,x),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(w,x){return this.emitter().emit(w,x),this}}),Ke.eventAliasesOn(o),r=i}else if("renderer"===e&&"null"!==t&&"base"!==t){var f=Ml("renderer","base"),h=f.prototype,v=n,m=n.prototype,g=function(){f.apply(this,arguments),v.apply(this,arguments)},y=g.prototype;for(var b in h){var C=h[b];if(null!=m[b])return a(b);y[b]=C}for(var E in m)y[E]=m[E];h.clientFunctions.forEach(function(w){y[w]=y[w]||function(){ot("Renderer does not implement `renderer."+w+"()` on its prototype")}}),r=g}else if("__proto__"===e||"constructor"===e||"prototype"===e)return ot(e+" is an illegal type to be registered, possibly lead to prototype pollutions");return Dt({map:Sl,keys:[e,t],value:r})}function Ml(e,t){return Qt({map:Sl,keys:[e,t]})}function ah(e,t,n,r,a){return Dt({map:Pl,keys:[e,t,n,r],value:a})}function ih(e,t,n,r){return Qt({map:Pl,keys:[e,t,n,r]})}var qi=function(){return 2===arguments.length?Ml.apply(null,arguments):3===arguments.length?_l.apply(null,arguments):4===arguments.length?ih.apply(null,arguments):5===arguments.length?ah.apply(null,arguments):void ot("Invalid extension access syntax")};qr.prototype.extension=qi,rh.forEach(function(e){e.extensions.forEach(function(t){_l(e.type,t.name,t.impl)})});var Dl=function e(){if(!(this instanceof e))return new e;this.length=0},Kn=Dl.prototype;Kn.instanceString=function(){return"stylesheet"},Kn.selector=function(e){return this[this.length++]={selector:e,properties:[]},this},Kn.css=function(e,t){var n=this.length-1;if(ie(e))this[n].properties.push({name:e,value:t});else if(ve(e))for(var r=e,a=Object.keys(r),i=0;i<a.length;i++){var o=a[i],l=r[o];if(null!=l){var s=Bt.properties[o]||Bt.properties[Gt(o)];null!=s&&this[n].properties.push({name:s.name,value:l})}}return this},Kn.style=Kn.css,Kn.generateStyle=function(e){var t=new Bt(e);return this.appendToStyle(t)},Kn.appendToStyle=function(e){for(var t=0;t<this.length;t++){var n=this[t],a=n.properties;e.selector(n.selector);for(var i=0;i<a.length;i++){var o=a[i];e.css(o.name,o.value)}}return e};var Gn=function(e){return void 0===e&&(e={}),ve(e)?new qr(e):ie(e)?qi.apply(qi,arguments):void 0};return Gn.use=function(e){var t=Array.prototype.slice.call(arguments,1);return t.unshift(Gn),e.apply(null,t),this},Gn.warnings=function(e){return Hi(e)},Gn.version="3.22.0",Gn.stylesheet=Gn.Stylesheet=Dl,Gn}),function(fe,ue){"object"==typeof exports&&"object"==typeof module?module.exports=ue(require("dagre")):"function"==typeof define&&define.amd?define(["dagre"],ue):"object"==typeof exports?exports.cytoscapeDagre=ue(require("dagre")):fe.cytoscapeDagre=ue(fe.dagre)}(this,function(Pe){return function(fe){var ue={};function J(W){if(ue[W])return ue[W].exports;var G=ue[W]={i:W,l:!1,exports:{}};return fe[W].call(G.exports,G,G.exports,J),G.l=!0,G.exports}return J.m=fe,J.c=ue,J.d=function(W,G,U){J.o(W,G)||Object.defineProperty(W,G,{enumerable:!0,get:U})},J.r=function(W){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(W,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(W,"__esModule",{value:!0})},J.t=function(W,G){if(1&G&&(W=J(W)),8&G||4&G&&"object"==typeof W&&W&&W.__esModule)return W;var U=Object.create(null);if(J.r(U),Object.defineProperty(U,"default",{enumerable:!0,value:W}),2&G&&"string"!=typeof W)for(var ae in W)J.d(U,ae,function(xe){return W[xe]}.bind(null,ae));return U},J.n=function(W){var G=W&&W.__esModule?function(){return W.default}:function(){return W};return J.d(G,"a",G),G},J.o=function(W,G){return Object.prototype.hasOwnProperty.call(W,G)},J.p="",J(J.s=0)}([function(fe,ue,J){var W=J(1),G=function(ae){!ae||ae("layout","dagre",W)};"undefined"!=typeof cytoscape&&G(cytoscape),fe.exports=G},function(fe,ue,J){function W(ce){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(be){return typeof be}:function(be){return be&&"function"==typeof Symbol&&be.constructor===Symbol&&be!==Symbol.prototype?"symbol":typeof be})(ce)}var U=J(2),ae=J(3),xe=J(4);function Re(ce){this.options=ae({},U,ce)}Re.prototype.run=function(){var ce=this.options,be=ce.cy,ie=ce.eles,H=function($e,Dt){return"function"==typeof Dt?Dt.apply($e,[$e]):Dt},ne=ce.boundingBox||{x1:0,y1:0,w:be.width(),h:be.height()};void 0===ne.x2&&(ne.x2=ne.x1+ne.w),void 0===ne.w&&(ne.w=ne.x2-ne.x1),void 0===ne.y2&&(ne.y2=ne.y1+ne.h),void 0===ne.h&&(ne.h=ne.y2-ne.y1);var Ve,ve=new xe.graphlib.Graph({multigraph:!0,compound:!0}),Z={},rt=function($e,Dt){null!=Dt&&(Z[$e]=Dt)};rt("nodesep",ce.nodeSep),rt("edgesep",ce.edgeSep),rt("ranksep",ce.rankSep),rt("rankdir",ce.rankDir),rt("align",ce.align),rt("ranker",ce.ranker),rt("acyclicer",ce.acyclicer),ve.setGraph(Z),ve.setDefaultEdgeLabel(function(){return{}}),ve.setDefaultNodeLabel(function(){return{}});for(var Oe=ie.nodes(),at=0;at<Oe.length;at++){var ft=Oe[at],Ge=ft.layoutDimensions(ce);ve.setNode(ft.id(),{width:Ge.w,height:Ge.h,name:ft.id()})}for(var se=0;se<Oe.length;se++){var Ae=Oe[se];Ae.isChild()&&ve.setParent(Ae.id(),Ae.parent().id())}for(var gt=ie.edges().stdFilter(function(vt){return!vt.source().isParent()&&!vt.target().isParent()}),Ze=0;Ze<gt.length;Ze++){var wt=gt[Ze];ve.setEdge(wt.source().id(),wt.target().id(),{minlen:H(wt,ce.minLen),weight:H(wt,ce.edgeWeight),name:wt.id()},wt.id())}xe.layout(ve);for(var Gt=ve.nodes(),Xt=0;Xt<Gt.length;Xt++){var rn=Gt[Xt],an=ve.node(rn);be.getElementById(rn).scratch().dagre=an}return ce.boundingBox?(Ve={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0},Oe.forEach(function(vt){var $e=vt.scratch().dagre;Ve.x1=Math.min(Ve.x1,$e.x),Ve.x2=Math.max(Ve.x2,$e.x),Ve.y1=Math.min(Ve.y1,$e.y),Ve.y2=Math.max(Ve.y2,$e.y)}),Ve.w=Ve.x2-Ve.x1,Ve.h=Ve.y2-Ve.y1):Ve=ne,Oe.layoutPositions(this,ce,function(vt){var $e=(vt="object"===W(vt)?vt:this).scratch().dagre;return function($e){return ce.boundingBox?{x:ne.x1+(0===Ve.w?0:($e.x-Ve.x1)/Ve.w)*ne.w,y:ne.y1+(0===Ve.h?0:($e.y-Ve.y1)/Ve.h)*ne.h}:$e}({x:$e.x,y:$e.y})}),this},fe.exports=Re},function(fe,ue){fe.exports={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,align:void 0,ranker:void 0,minLen:function(G){return 1},edgeWeight:function(G){return 1},fit:!0,padding:30,spacingFactor:void 0,nodeDimensionsIncludeLabels:!1,animate:!1,animateFilter:function(G,U){return!0},animationDuration:500,animationEasing:void 0,boundingBox:void 0,transform:function(G,U){return U},ready:function(){},stop:function(){}}},function(fe,ue){fe.exports=null!=Object.assign?Object.assign.bind(Object):function(J){for(var W=arguments.length,G=new Array(W>1?W-1:0),U=1;U<W;U++)G[U-1]=arguments[U];return G.forEach(function(ae){Object.keys(ae).forEach(function(xe){return J[xe]=ae[xe]})}),J}},function(fe,ue){fe.exports=Pe}])}),function(fe,ue){"object"==typeof exports&&"object"==typeof module?module.exports=ue(require("popper.js")):"function"==typeof define&&define.amd?define(["popper.js"],ue):"object"==typeof exports?exports.cytoscapePopper=ue(require("popper.js")):fe.cytoscapePopper=ue(fe.Popper)}(this,function(Pe){return function(fe){var ue={};function J(W){if(ue[W])return ue[W].exports;var G=ue[W]={i:W,l:!1,exports:{}};return fe[W].call(G.exports,G,G.exports,J),G.l=!0,G.exports}return J.m=fe,J.c=ue,J.i=function(W){return W},J.d=function(W,G,U){J.o(W,G)||Object.defineProperty(W,G,{configurable:!1,enumerable:!0,get:U})},J.n=function(W){var G=W&&W.__esModule?function(){return W.default}:function(){return W};return J.d(G,"a",G),G},J.o=function(W,G){return Object.prototype.hasOwnProperty.call(W,G)},J.p="",J(J.s=7)}([function(fe,ue,J){"use strict";fe.exports=null!=Object.assign?Object.assign.bind(Object):function(W){for(var G=arguments.length,U=Array(G>1?G-1:0),ae=1;ae<G;ae++)U[ae-1]=arguments[ae];return U.forEach(function(xe){null!=xe&&Object.keys(xe).forEach(function(Re){return W[Re]=xe[Re]})}),W}},function(fe,ue,J){"use strict";var G=J(5).getBoundingBox;fe.exports={getRef:function U(ae,xe){var Re=xe.renderedDimensions;return{getBoundingClientRect:function(){return G(ae,xe)},get clientWidth(){return Re(ae).w},get clientHeight(){return Re(ae).h}}}}},function(fe,ue,J){"use strict";var W=J(0),U=J(1).getRef,xe=J(6).getContent,Re={},ce=J(8),ze=ce.default;null!=ze&&null!=ze.Defaults&&(ce=ce.default),fe.exports={getPopper:function be(ie,H){var ne=U(ie,H),ve=xe(ie,H.content),Z=W({},Re,H.popper);return new ce(ne,ve,Z)}}},function(fe,ue,J){"use strict";var W=J(0),U=J(2).getPopper,xe=J(1).getRef;function ze(ne,ve){var Z=function(se){return se.isNode()?{w:se.renderedWidth(),h:se.renderedHeight()}:{w:3,h:3}},at=ne.cy(),ft={renderedDimensions:Z,renderedPosition:function(se){return se.isNode()?function be(ne,ve){var Z=ne.renderedPosition(),rt=ve(ne);return{x:Z.x-rt.w/2,y:Z.y-rt.h/2}}(se,Z):function ie(ne){var ve=ne.midpoint(),Z=ne.cy().pan(),rt=ne.cy().zoom();return{x:ve.x*rt+Z.x,y:ve.y*rt+Z.y}}(se)},popper:{},cy:at};return W({},ft,ve)}function H(ne){ne.length>1&&(console.warn("Popper.js Extension should only be used on one element."),console.warn("Ignoring all subsequent elements"))}fe.exports={popper:function Re(ne){return H(this),U(this[0],ze(this[0],ne))},popperRef:function ce(ne){return H(this),xe(this[0],ze(this[0],ne))}}},function(fe,ue,J){"use strict";var W=J(0),U=J(2).getPopper,xe=J(1).getRef;function ze(be,ie){return W({},{boundingBox:{top:0,left:0,right:0,bottom:0,w:3,h:3},renderedDimensions:function(){return{w:3,h:3}},redneredPosition:function(){return{x:0,y:0}},popper:{},cy:be},ie)}fe.exports={popper:function Re(be){return U(this,ze(this,be))},popperRef:function ce(be){return xe(this,ze(this,be))}}},function(fe,ue,J){"use strict";fe.exports={getBoundingBox:function W(G,U){var ae=U.renderedPosition,Re=U.renderedDimensions,ce=U.cy.container().getBoundingClientRect(),ze=Re(G),be=ae(G);return{top:be.y+ce.top,left:be.x+ce.left,right:be.x+ze.w+ce.left,bottom:be.y+ze.h+ce.top,width:ze.w,height:ze.h}}}},function(fe,ue,J){"use strict";fe.exports={getContent:function W(G,U){var ae;if("function"!=typeof U){if(U instanceof HTMLElement)return U;throw new Error("Can not create popper from 'target' with unknown type")}if(null===(ae=U(G)))throw new Error("No 'target' specified to create popper");return ae}}},function(fe,ue,J){"use strict";var W=J(4),G=J(3),U=function(xe){!xe||(xe("core","popper",W.popper),xe("collection","popper",G.popper),xe("core","popperRef",W.popperRef),xe("collection","popperRef",G.popperRef))};"undefined"!=typeof cytoscape&&U(cytoscape),fe.exports=U},function(fe,ue){fe.exports=Pe}])}),function(){var Pe=function(ue){ue&&ue("core","cyCanvas",function(G){var U=this,ae=U.container(),xe=document.createElement("canvas");ae.appendChild(xe);var ce=Object.assign({},{zIndex:1,pixelRatio:"auto"},G);function ze(){var be=ae.offsetWidth,ie=ae.offsetHeight,ne=ie*ce.pixelRatio;xe.width=be*ce.pixelRatio,xe.height=ne,xe.style.width=be+"px",xe.style.height=ie+"px",U.trigger("cyCanvas.resize")}return"auto"===ce.pixelRatio&&(ce.pixelRatio=window.devicePixelRatio||1),U.on("resize",function(){ze()}),xe.setAttribute("style","position:absolute; top:0; left:0; z-index:"+ce.zIndex+";"),ze(),{getCanvas:function(){return xe},clear:function(ie){var H=U.width(),ne=U.height();ie.save(),ie.setTransform(1,0,0,1,0,0),ie.clearRect(0,0,H*ce.pixelRatio,ne*ce.pixelRatio),ie.restore()},resetTransform:function(ie){ie.setTransform(1,0,0,1,0,0)},setTransform:function(ie){var H=U.pan(),ne=U.zoom();ie.setTransform(1,0,0,1,0,0),ie.translate(H.x*ce.pixelRatio,H.y*ce.pixelRatio),ie.scale(ne*ce.pixelRatio,ne*ce.pixelRatio)}}})};"undefined"!=typeof module&&module.exports&&(module.exports=function(fe){Pe(fe)}),"undefined"!=typeof define&&define.amd&&define("cytoscape-canvas",function(){return Pe}),"undefined"!=typeof cytoscape&&Pe(cytoscape)}(),function(){"use strict";var Pe=function(J,W){!J||!W||(W.fn.cyPanzoom=W.fn.cytoscapePanzoom=function(G){return ue.apply(this,[G,J,W]),this},J("core","panzoom",function(G){return ue.apply(this,[G,J,W]),this}))},fe={zoomFactor:.05,zoomDelay:45,minZoom:.1,maxZoom:10,fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,zoomOnly:!1,fitSelector:void 0,animateOnFit:function(){return!1},fitAnimationDuration:1e3,sliderHandleIcon:"fa fa-minus",zoomInIcon:"fa fa-plus",zoomOutIcon:"fa fa-minus",resetIcon:"fa fa-expand"},ue=function(J,W,G){var U=this,ae=G.extend(!0,{},fe,J),xe=J,Re={destroy:function(){var ze=G(U.container()).find(".cy-panzoom");ze.data("winbdgs").forEach(function(be){G(window).unbind(be.evt,be.fn)}),ze.data("cybdgs").forEach(function(be){U.off(be.evt,be.fn)}),ze.remove()},init:function(){return window,G(U.container()).each(function(){var ze=G(this);ze.cytoscape=W;var be=[],ie=G(window),H=function(we,ge){be.push({evt:we,fn:ge}),ie.bind(we,ge)},ne=function(we,ge){for(var Se=0;Se<be.length;Se++){var Ne=be[Se];if(Ne.evt===we&&Ne.fn===ge){be.splice(Se,1);break}}ie.unbind(we,ge)},ve=[],Oe=G('<div class="cy-panzoom"></div>');ze.prepend(Oe),Oe.css("position","absolute"),Oe.data("winbdgs",be),Oe.data("cybdgs",ve),ae.zoomOnly&&Oe.addClass("cy-panzoom-zoom-only");var at=G('<div class="cy-panzoom-zoom-in cy-panzoom-zoom-button"><span class="icon '+ae.zoomInIcon+'"></span></div>');Oe.append(at);var ft=G('<div class="cy-panzoom-zoom-out cy-panzoom-zoom-button"><span class="icon '+ae.zoomOutIcon+'"></span></div>');Oe.append(ft);var Ge=G('<div class="cy-panzoom-reset cy-panzoom-zoom-button"><span class="icon '+ae.resetIcon+'"></span></div>');Oe.append(Ge);var se=G('<div class="cy-panzoom-slider"></div>');Oe.append(se),se.append('<div class="cy-panzoom-slider-background"></div>');var Ae=G('<div class="cy-panzoom-slider-handle"><span class="icon '+ae.sliderHandleIcon+'"></span></div>');se.append(Ae);var gt=G('<div class="cy-panzoom-no-zoom-tick"></div>');se.append(gt);var Ze=G('<div class="cy-panzoom-panner"></div>');Oe.append(Ze);var wt=G('<div class="cy-panzoom-panner-handle"></div>');Ze.append(wt);var Gt=G('<div class="cy-panzoom-pan-up cy-panzoom-pan-button"></div>'),Xt=G('<div class="cy-panzoom-pan-down cy-panzoom-pan-button"></div>'),rn=G('<div class="cy-panzoom-pan-left cy-panzoom-pan-button"></div>'),an=G('<div class="cy-panzoom-pan-right cy-panzoom-pan-button"></div>');Ze.append(Gt).append(Xt).append(rn).append(an);var Ve=G('<div class="cy-panzoom-pan-indicator"></div>');function vt(){clearInterval(Dn),ne("mousemove",Tn),Ve.hide()}function Dt(){U.pan(),U.zoom(),ut=ze.width()/2,Qn=ze.height()/2}Ze.append(Ve);var ut,Qn,Qt=!1;function lt(){Qt=!0,Dt()}function Mn(){Qt=!1}function Jn(we){Qt||Dt(),U.zoom({level:we,renderedPosition:{x:ut,y:Qn}})}var Dn,Tn=function(we){we.stopPropagation(),we.preventDefault(),clearInterval(Dn);var ge=function me(we){var ge={x:we.originalEvent.pageX-Ze.offset().left-Ze.width()/2,y:we.originalEvent.pageY-Ze.offset().top-Ze.height()/2},Se=ae.panDragAreaSize,Ne=Math.sqrt(ge.x*ge.x+ge.y*ge.y),Be=Math.min(Ne/Se,1);return Ne<ae.panInactiveArea?{x:NaN,y:NaN}:(ge={x:ge.x/Ne,y:ge.y/Ne},Be=Math.max(ae.panMinPercentSpeed,Be),{x:-1*ge.x*(Be*ae.panDistance),y:-1*ge.y*(Be*ae.panDistance)})}(we);isNaN(ge.x)||isNaN(ge.y)?Ve.hide():(function $e(we){var ge=we,Se=Math.sqrt(ge.x*ge.x+ge.y*ge.y),Ne_x=-1*ge.x/Se,Ne_y=-1*ge.y/Se,Be=Ze.width(),_e=Ze.height(),ct=Math.max(ae.panIndicatorMinOpacity,Se/ae.panDistance),qe=255-Math.round(255*ct);Ve.show().css({left:Be/2*Ne_x+Be/2,top:_e/2*Ne_y+_e/2,background:"rgb("+qe+", "+qe+", "+qe+")"})}(ge),Dn=setInterval(function(){U.panBy(ge)},ae.panSpeed))};wt.bind("mousedown",function(we){Tn(we),H("mousemove",Tn)}),wt.bind("mouseup",function(){vt()}),H("mouseup blur",function(){vt()}),se.bind("mousedown",function(){return!1});var Qe,dt,ge,Fe=!1;function Je(we,ge){void 0===ge&&(ge=0);var Be=se.height()-Ae.height()-4,_e=we.pageY-se.offset().top-ge;_e<2&&(_e=2),_e>Be&&(_e=Be);var We=1-(_e-2)/(Be-2);Ae.css("top",_e);var ct=ae.minZoom,qe=ae.maxZoom,mt=Math.log(ct)/Math.log(qe),yt=Math.pow(qe,(1-mt)*We+mt);yt<ct?yt=ct:yt>qe&&(yt=qe),Jn(yt)}function et(){var we=U.zoom(),Se=ae.maxZoom,Ne=Math.log(ae.minZoom)/Math.log(Se),_e=1-(Math.log(we)/Math.log(Se)-Ne)/(1-Ne),ct=se.height()-Ae.height()-4,qe=_e*(ct-2);qe<2&&(qe=2),qe>ct&&(qe=ct),Ae.css("top",qe)}function Et(we,ge){var Se;we.bind("mousedown",function(Ne){if(Ne.preventDefault(),Ne.stopPropagation(),0==Ne.button){var Be=function(){var _e=U.zoom(),We=U.zoom()*ge;We<ae.minZoom&&(We=ae.minZoom),We>ae.maxZoom&&(We=ae.maxZoom),!(We==ae.maxZoom&&_e==ae.maxZoom||We==ae.minZoom&&_e==ae.minZoom)&&Jn(We)};return lt(),Be(),Se=setInterval(Be,ae.zoomDelay),!1}}),H("mouseup blur",function(){clearInterval(Se),Mn()})}Ae.bind("mousedown",Qe=function(we){var ge=we.target===Ae[0]?we.offsetY:0;Fe=!0,lt(),Ae.addClass("active");var Se=0;return H("mousemove",dt=function(Ne){var Be=+new Date;return Be>Se+10&&(Se=Be,Je(Ne,ge),!1)}),H("mouseup",function(){ne("mousemove",dt),Fe=!1,Ae.removeClass("active"),Mn()}),!1}),se.bind("mousedown",function(we){we.target!==Ae[0]&&(Qe(we),Je(we))}),et(),ve.push({evt:"zoom",fn:ge=function(){Fe||et()}}),U.on("zoom",ge),function(){var Se=ae.maxZoom,Ne=Math.log(ae.minZoom)/Math.log(Se),_e=1-(Math.log(1)/Math.log(Se)-Ne)/(1-Ne);if(_e>1||_e<0)gt.hide();else{var ct=se.height()-Ae.height()-4,qe=_e*(ct-2);qe<2&&(qe=2),qe>ct&&(qe=ct),gt.css("top",qe)}}(),Et(at,1+ae.zoomFactor),Et(ft,1-ae.zoomFactor),Ge.bind("mousedown",function(we){if(0==we.button){var ge=ae.fitSelector?U.elements(ae.fitSelector):U.elements();return 0===ge.size()?U.reset():("function"==typeof ae.animateOnFit?ae.animateOnFit.call():ae.animateOnFit)?U.animate({fit:{eles:ge,padding:ae.fitPadding}},{duration:ae.fitAnimationDuration}):U.fit(ge,ae.fitPadding),!1}})})}};return Re[xe]?Re[xe].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof xe&&xe?(G.error("No such function `"+xe+"` for jquery.cytoscapePanzoom"),G(this)):Re.init.apply(this,arguments)};"undefined"!=typeof module&&module.exports?module.exports=function(J,W){Pe(J,W||require("jquery"))}:"undefined"!=typeof define&&define.amd&&define("cytoscape-panzoom",function(){return Pe}),"undefined"!=typeof cytoscape&&"undefined"!=typeof jQuery&&Pe(cytoscape,jQuery)}(),function(fe,ue){"object"==typeof exports&&"object"==typeof module?module.exports=ue():"function"==typeof define&&define.amd?define([],ue):"object"==typeof exports?exports.cytoscapeCxtmenu=ue():fe.cytoscapeCxtmenu=ue()}(this,function(){return function(Pe){var fe={};function ue(J){if(fe[J])return fe[J].exports;var W=fe[J]={i:J,l:!1,exports:{}};return Pe[J].call(W.exports,W,W.exports,ue),W.l=!0,W.exports}return ue.m=Pe,ue.c=fe,ue.i=function(J){return J},ue.d=function(J,W,G){ue.o(J,W)||Object.defineProperty(J,W,{configurable:!1,enumerable:!0,get:G})},ue.n=function(J){var W=J&&J.__esModule?function(){return J.default}:function(){return J};return ue.d(W,"a",W),W},ue.o=function(J,W){return Object.prototype.hasOwnProperty.call(J,W)},ue.p="",ue(ue.s=4)}([function(Pe,fe,ue){"use strict";var J=ue(2),W=ue(1),G=ue(3),U=G.removeEles,ae=G.setStyles,xe=G.createElement,Re=G.getPixelRatio,ce=G.getOffset;Pe.exports=function(ie){var H=W({},J,ie),ne=this,ve=ne.container(),Z=void 0,rt={options:H,handlers:[],container:xe({class:"cxtmenu"})},Oe=rt.container,at=xe(),ft=xe({tag:"canvas"}),Ge=[],se=ft.getContext("2d"),Ae=100,gt=2*(Ae+H.activePadding),Ze=void 0,wt=void 0;function Xt(De,Fe){$e.drawBg=[De,Fe]}function rn(De,Fe){se.globalCompositeOperation="source-over",se.clearRect(0,0,gt,gt),se.fillStyle=H.fillColor;for(var Ce=2*Math.PI/Ge.length,Je=Math.PI/2,Qe=Je+Ce,dt=0;dt<Ge.length;dt++){var et=Ge[dt];et.fillColor&&(se.fillStyle=et.fillColor),se.beginPath(),se.moveTo(De+H.activePadding,De+H.activePadding),se.arc(De+H.activePadding,De+H.activePadding,De,2*Math.PI-Je,2*Math.PI-Qe,!0),se.closePath(),se.fill(),Je+=Ce,Qe+=Ce,se.fillStyle=H.fillColor}se.globalCompositeOperation="destination-out",se.strokeStyle="white",se.lineWidth=H.separatorWidth,Qe=(Je=Math.PI/2)+Ce;for(var Et=0;Et<Ge.length;Et++){var we=De*Math.cos(Je),ge=De*Math.sin(Je);se.beginPath(),se.moveTo(De+H.activePadding,De+H.activePadding),se.lineTo(De+H.activePadding+we,De+H.activePadding-ge),se.closePath(),se.stroke(),Je+=Ce,Qe+=Ce}se.fillStyle="white",se.globalCompositeOperation="destination-out",se.beginPath(),se.arc(De+H.activePadding,De+H.activePadding,Fe+H.spotlightPadding,0,2*Math.PI,!0),se.closePath(),se.fill(),se.globalCompositeOperation="source-over"}function Ve(De,Fe,Ce,Je,Qe){var dt=2*Math.PI/Ge.length,et=Math.PI/2,Et=et+dt;et+=dt*Ze,Et+=dt*Ze,se.fillStyle=H.activeFillColor,se.strokeStyle="black",se.lineWidth=1,se.beginPath(),se.moveTo(Ce+H.activePadding,Ce+H.activePadding),se.arc(Ce+H.activePadding,Ce+H.activePadding,Ce+H.activePadding,2*Math.PI-et,2*Math.PI-Et,!0),se.closePath(),se.fill(),se.fillStyle="white",se.globalCompositeOperation="destination-out";var we=Ce+H.activePadding+De/Ce*(Qe+H.spotlightPadding-H.indicatorSize/4),ge=Ce+H.activePadding+Fe/Ce*(Qe+H.spotlightPadding-H.indicatorSize/4),Se=Math.PI/4-Je;se.translate(we,ge),se.rotate(Se);var Ne=H.indicatorSize>Qe+H.spotlightPadding?Qe+H.spotlightPadding:H.indicatorSize;se.beginPath(),se.fillRect(-Ne/2,-Ne/2,Ne,Ne),se.closePath(),se.fill(),se.rotate(-Se),se.translate(-we,-ge),se.beginPath(),se.arc(Ce+H.activePadding,Ce+H.activePadding,Qe+H.spotlightPadding,0,2*Math.PI,!0),se.closePath(),se.fill(),se.globalCompositeOperation="source-over"}function me(){var De=Re(),Fe=gt,Ce=gt;ft.width=Fe*De,ft.height=Ce*De,ft.style.width=Fe+"px",ft.style.height=Ce+"px",se.setTransform(1,0,0,1,0,0),se.scale(De,De)}ve.insertBefore(Oe,ve.firstChild),Oe.appendChild(at),at.appendChild(ft),ae(Oe,{position:"absolute",zIndex:H.zIndex,userSelect:"none",pointerEvents:"none"}),["mousedown","mousemove","mouseup","contextmenu"].forEach(function(De){Oe.addEventListener(De,function(Fe){return Fe.preventDefault(),!1})}),ae(at,{display:"none",width:gt+"px",height:gt+"px",position:"absolute",zIndex:1,marginLeft:-H.activePadding+"px",marginTop:-H.activePadding+"px",userSelect:"none"}),ft.width=gt,ft.height=gt;var vt=!0,$e={},Dt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(De){return setTimeout(De,16)};me(),function De(){$e.drawBg&&rn.apply(null,$e.drawBg),$e.drawCommands&&Ve.apply(null,$e.drawCommands),$e={},vt&&Dt(De)}();var lt=void 0,Mn=void 0,ut=void 0,Qn={on:function(Fe,Ce,Je){var Qe=Je;return"core"===Ce&&(Qe=function(et){if(et.cyTarget===ne||et.target===ne)return Je.apply(this,[et])}),rt.handlers.push({events:Fe,selector:Ce,fn:Qe}),"core"===Ce?ne.on(Fe,Qe):ne.on(Fe,Ce,Qe),this}};return function Jn(){var Ce,De=void 0,Fe=!1,Je=void 0,Qe=void 0,dt=void 0,et=void 0,Ne=function(){De&&Z.grabify(),Je&&ne.userZoomingEnabled(!0),Qe&&ne.userPanningEnabled(!0),dt&&ne.boxSelectionEnabled(!0)};window.addEventListener("resize",me),Qn.on("resize",function(){me()}).on(H.openMenuEvents,H.selector,function(Be){Z=this;var _e=this,We=this===ne;if(Fe&&(at.style.display="none",Fe=!1,Ne()),"function"==typeof H.commands){var ct=H.commands(Z);ct.then?ct.then(function(mt){Ge=mt,qe()}):(Ge=ct,qe())}else Ge=H.commands,qe();function qe(){if(Ge&&0!==Ge.length){Je=ne.userZoomingEnabled(),ne.userZoomingEnabled(!1),Qe=ne.userPanningEnabled(),ne.userPanningEnabled(!1),dt=ne.boxSelectionEnabled(),ne.boxSelectionEnabled(!1),(De=Z.grabbable&&Z.grabbable())&&Z.ungrabify();var mt=void 0,it=void 0,Xe=void 0;!We&&_e&&_e.isNode instanceof Function&&_e.isNode()&&!_e.isParent()&&!H.atMouse?(mt=_e.renderedPosition(),it=_e.renderedOuterWidth(),_e.renderedOuterHeight(),Xe=it/2,Xe=!H.adaptativeNodeSpotlightRadius&&H.minSpotlightRadius?Math.max(Xe,H.minSpotlightRadius):Xe,Xe=!H.adaptativeNodeSpotlightRadius&&H.maxSpotlightRadius?Math.min(Xe,H.maxSpotlightRadius):Xe):(mt=Be.renderedPosition||Be.cyRenderedPosition,Xe=(it=1)/2,Xe=H.minSpotlightRadius?Math.max(Xe,H.minSpotlightRadius):Xe,Xe=H.maxSpotlightRadius?Math.min(Xe,H.maxSpotlightRadius):Xe),wt=ce(ve),lt=mt.x,Mn=mt.y,Ae=it/2+(H.menuRadius instanceof Function?H.menuRadius(Z):Number(H.menuRadius)),gt=2*(Ae+H.activePadding),me(),ae(at,{width:gt+"px",height:gt+"px",display:"block",left:mt.x-Ae+"px",top:mt.y-Ae+"px"}),function Gt(De,Fe){U(".cxtmenu-item",at);for(var Ce=2*Math.PI/Ge.length,Je=Math.PI/2,Qe=Je+Ce,dt=0;dt<Ge.length;dt++){var et=Ge[dt],Et=(Je+Qe)/2,we=(De+Fe)/2*Math.cos(Et),ge=(De+Fe)/2*Math.sin(Et),Se=1*Math.abs((De-Fe)*Math.cos(Et)),Ne=1*Math.abs((De-Fe)*Math.sin(Et));Se=Math.max(Se,Ne);var Be=xe({class:"cxtmenu-item"});ae(Be,{color:H.itemColor,cursor:"default",display:"table","text-align":"center",position:"absolute","text-shadow":"-1px -1px 2px "+H.itemTextShadowColor+", 1px -1px 2px "+H.itemTextShadowColor+", -1px 1px 2px "+H.itemTextShadowColor+", 1px 1px 1px "+H.itemTextShadowColor,left:"50%",top:"50%","min-height":Se+"px",width:Se+"px",height:Se+"px",marginLeft:we-Se/2+"px",marginTop:-ge-Se/2+"px"});var _e=xe({class:"cxtmenu-content"});et.content instanceof HTMLElement?_e.appendChild(et.content):_e.innerHTML=et.content,ae(_e,{width:Se+"px",height:Se+"px","vertical-align":"middle",display:"table-cell"}),ae(_e,et.contentStyle||{}),(!0===et.disabled||!1===et.enabled)&&_e.setAttribute("class","cxtmenu-content cxtmenu-disabled"),at.appendChild(Be),Be.appendChild(_e),Je+=Ce,Qe+=Ce}}(Ae,Xe),Xt(Ae,Xe),Ze=void 0,Fe=!0,et=Be}}}).on("cxtdrag tapdrag",H.selector,Ce=function(_e){if(Fe){_e.preventDefault();var We=_e.originalEvent,ct=We.touches&&We.touches.length>0,qe=(ct?We.touches[0].pageX:We.pageX)-window.pageXOffset,mt=(ct?We.touches[0].pageY:We.pageY)-window.pageYOffset;Ze=void 0;var it=qe-wt.left-lt,yt=mt-wt.top-Mn;0===it&&(it=.01);var Xe=Math.sqrt(it*it+yt*yt),on=Math.acos((yt*yt-Xe*Xe-it*it)/(-2*Xe*it)),dn=void 0;if(Z&&Z.isNode instanceof Function&&Z.isNode()&&!Z.isParent()&&!H.atMouse?(dn=Z.renderedOuterWidth(),ut=dn/2,ut=!H.adaptativeNodeSpotlightRadius&&H.minSpotlightRadius?Math.max(ut,H.minSpotlightRadius):ut,ut=!H.adaptativeNodeSpotlightRadius&&H.maxSpotlightRadius?Math.min(ut,H.maxSpotlightRadius):ut):(ut=(dn=1)/2,ut=H.minSpotlightRadius?Math.max(ut,H.minSpotlightRadius):ut,ut=H.maxSpotlightRadius?Math.min(ut,H.maxSpotlightRadius):ut),Ae=dn/2+(H.menuRadius instanceof Function?H.menuRadius(Z):Number(H.menuRadius)),Xe<ut+H.spotlightPadding||"number"==typeof H.outsideMenuCancel&&Xe>Ae+H.activePadding+H.outsideMenuCancel)return void Xt(Ae,ut);Xt(Ae,ut);var Aa=it*Ae/Xe,Fa=yt*Ae/Xe;yt>0&&(on=Math.PI+Math.abs(on-Math.PI));for(var zn=2*Math.PI/Ge.length,Bn=Math.PI/2,hn=Bn+zn,Nn=0;Nn<Ge.length;Nn++){var er=Ge[Nn],ot=Bn<=on&&on<=hn||Bn<=on+2*Math.PI&&on+2*Math.PI<=hn;if((!0===er.disabled||!1===er.enabled)&&(ot=!1),ot){Ze=Nn;break}Bn+=zn,hn+=zn}!function an(De,Fe,Ce,Je,Qe){$e.drawCommands=[De,Fe,Ce,Je,Qe]}(Aa,Fa,Ae,on,ut)}}).on("tapdrag",Ce).on("cxttapend tapend",function(){if(at.style.display="none",void 0!==Ze){var Be=Ge[Ze].select;Be&&(Be.apply(Z,[Z,et]),Ze=void 0)}Fe=!1,Ne()})}(),{destroy:function(){!function Tn(){vt=!1,function Dn(){for(var De=rt.handlers,Fe=0;Fe<De.length;Fe++){var Ce=De[Fe];"core"===Ce.selector?ne.off(Ce.events,Ce.fn):ne.off(Ce.events,Ce.selector,Ce.fn)}window.removeEventListener("resize",me)}(),Oe.remove()}()}}}},function(Pe,fe,ue){"use strict";Pe.exports=null!=Object.assign?Object.assign.bind(Object):function(J){for(var W=arguments.length,G=Array(W>1?W-1:0),U=1;U<W;U++)G[U-1]=arguments[U];return G.filter(function(ae){return null!=ae}).forEach(function(ae){Object.keys(ae).forEach(function(xe){return J[xe]=ae[xe]})}),J}},function(Pe,fe,ue){"use strict";Pe.exports={menuRadius:function(G){return 100},selector:"node",commands:[],fillColor:"rgba(0, 0, 0, 0.75)",activeFillColor:"rgba(1, 105, 217, 0.75)",activePadding:20,indicatorSize:24,separatorWidth:3,spotlightPadding:4,adaptativeNodeSpotlightRadius:!1,minSpotlightRadius:24,maxSpotlightRadius:38,openMenuEvents:"cxttapstart taphold",itemColor:"white",itemTextShadowColor:"transparent",zIndex:9999,atMouse:!1,outsideMenuCancel:!1}},function(Pe,fe,ue){"use strict";var W=function(Re,ce){for(var ze=Object.keys(ce),be=0,ie=ze.length;be<ie;be++)Re.style[ze[be]]=ce[ze[be]]};Pe.exports={removeEles:function(Re){for(var ce=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,ze=ce.querySelectorAll(Re),be=0;be<ze.length;be++){var ie=ze[be];ie.parentNode.removeChild(ie)}},setStyles:W,createElement:function(Re){Re=Re||{};var ce=document.createElement(Re.tag||"div");return ce.className=Re.class||"",Re.style&&W(ce,Re.style),ce},getPixelRatio:function(){return window.devicePixelRatio||1},getOffset:function(Re){var ce=Re.getBoundingClientRect();return{left:ce.left+document.body.scrollLeft+parseFloat(getComputedStyle(document.body)["padding-left"])+parseFloat(getComputedStyle(document.body)["border-left-width"]),top:ce.top+document.body.scrollTop+parseFloat(getComputedStyle(document.body)["padding-top"])+parseFloat(getComputedStyle(document.body)["border-top-width"])}}}},function(Pe,fe,ue){"use strict";var J=ue(0),W=function(U){!U||U("core","cxtmenu",J)};"undefined"!=typeof cytoscape&&W(cytoscape),Pe.exports=W}])});